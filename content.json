[{"title":"IMä¸­ç¾¤æ¶ˆæ¯å‘é€è€…ä¿¡æ¯åˆ·æ–°æ–¹æ¡ˆ","date":"2020-07-21T11:20:30.000Z","path":"2020/07/21/android_10/","text":"å‰è¨€åœ¨IMé¡¹ç›®ï¼ˆAndroidï¼‰ä¸­ï¼ŒèŠå¤©é¡µé¢ï¼Œè¿›å…¥ä¼šå±•ç¤ºå†å²æ¶ˆæ¯ï¼Œè€Œå†å²æ¶ˆæ¯å­˜ä¸‹æ¥çš„å‘é€è€…ä¿¡æ¯å¯èƒ½å¹¶ä¸æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥éœ€è¦å»åˆ·æ–°æ•°æ®ã€‚å•èŠåœºæ™¯åªéœ€è¦åˆ·æ–°å¯¹æ–¹ä¸€ä¸ªäººä¿¡æ¯ï¼Œå®ç°è¾ƒä¸ºç®€å•ã€‚ä½†æ˜¯åˆ°ç¾¤èŠï¼Œå‘é€è€…ä¼—å¤šï¼Œä¸å¯èƒ½æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½å»è·å–å…¨éƒ¨æˆå‘˜çš„ä¿¡æ¯ï¼ˆæ•°é‡å¤§ï¼Œè·å–ç¼“æ…¢ï¼‰ï¼Œæ‰€ä»¥éœ€è¦åˆ¶å®šç­–ç•¥å»å®ç°å¥½çš„æ•ˆæœã€‚ éœ€æ±‚åˆ†ææœŸæœ›ï¼š åªå»åˆ·æ–°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å‘é€è€…ä¿¡æ¯ã€‚ æ¯ä¸ªå‘é€è€…åªéœ€è¦åˆ·æ–°ä¸€æ¬¡ã€‚ï¼ˆåšä¸ªç¼“å­˜ï¼‰ å±å¹•æ»šåŠ¨å¾ˆå¿«ï¼Œä¸­é€”æ˜¾ç¤ºçš„ä¸å»åˆ·æ–°ã€‚ å¦‚æœå…¶ä»–åœ°æ–¹ç¼“å­˜è¿‡äº†è¿™ä¸ªæˆå‘˜ï¼Œå°±ä¸å†å»è·å–ã€‚ ç¾¤æˆå‘˜ä¿¡æ¯ä¿®æ”¹ï¼ŒåŠæ—¶åˆ·æ–°ç¼“å­˜æ•°æ®ã€‚ æ–¹æ¡ˆè®¾è®¡è®¾è®¡ï¼š åœ¨recyclerçš„onBindVHé‡Œæ”¶é›†æ¶ˆæ¯åˆ—è¡¨é‡Œçš„å‘é€è€…çš„IDï¼ˆimAccount)ã€‚ æ”¶é›†åˆ°æ•°æ®æ± ï¼ˆåªæ”¶é›†ä¸æ˜¯æœ€æ–°æ•°æ®çš„ï¼Œé˜²æ­¢åå¤æ”¶é›†ï¼‰ï¼Œå¯¹imAccountå»é‡ï¼Œå¤§å°ä¸º10ã€‚åˆ©ç”¨LRUçš„ç¼“å­˜æ·˜æ±°imAccountã€‚ é™ç½®0.5ç§’åå¼€å§‹å°†ç¼“å­˜æ± å†…å®¹å‘å°„è¯·æ±‚ã€‚ï¼ˆå³å±å¹•åœæ­¢äº†æ»‘åŠ¨ï¼Œæˆ–æ»‘åŠ¨æ²¡æ—¶æ–°çš„itemæ·»åŠ åˆ°å±å¹•ï¼‰ã€‚ æ¯ä¸ªimAccountå¯¹åº”ä¸€ä¸ªé”å¯¹è±¡ï¼Œä¿è¯å¼‚æ­¥ä¸‹åŒä¸€ä¸ªimAccountåªä¼šè¯·æ±‚ä¸€æ¬¡ã€‚ ç»“åˆç¾¤æˆå‘˜ä¿¡æ¯åšç¼“å­˜ã€‚ï¼ˆç¾¤æˆå‘˜ç¼“å­˜è·å–è¿‡äº†ï¼Œå¦‚è¿›è¿‡ç¾¤æˆå‘˜é¡µç­‰ï¼Œ å°±ä¸å†å»è¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜é‡Œçš„æ•°æ®ï¼‰ åˆ·æ–°æˆåŠŸä¸€ä¸ªimAccountåˆ™ä¼šæŠŠæ•´ä¸ªåˆ—è¡¨é‡ŒåŒä¸€ä¸ªå‘é€è€…çš„ä¿¡æ¯éƒ½åˆ·æ–°æ‰ã€‚ æ•°æ®åˆ·æ–°æˆåŠŸï¼Œå›è°ƒåˆ·æ–°UIåˆ—è¡¨ã€‚éœ€è¦ç»‘å®šèŠå¤©é¡µé¢ç”Ÿå‘½å‘¨æœŸã€‚ æ”¶åˆ°ç¾¤æˆå‘˜ä¿¡æ¯ä¿®æ”¹é€šçŸ¥æ¶ˆæ¯ï¼Œä¿®æ”¹ç¼“å­˜æ•°æ®ã€‚ æµç¨‹å›¾ï¼š ä»£ç å®ç°è¯¥éƒ¨åˆ†åŠŸèƒ½éœ€è¦ç»“åˆæˆå‘˜ç¼“å­˜åŠŸèƒ½ã€‚è¯·çœ‹ï¼šIMé¡¹ç›®ä¸­ç¾¤æˆå‘˜è·å–ä¸ç¼“å­˜ç­–ç•¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228class SenderHelper private constructor() : DefaultLifecycleObserver &#123; companion object &#123; private const val CACHE_MAX_SIZE = 10 private const val COUNT_DOWN_DELAY = 500L // ä¿è¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚ private val map = WeakHashMap&lt;LifecycleOwner, SenderHelper&gt;() fun with(owner: LifecycleOwner, observer: Observer&lt;List&lt;String&gt;&gt;): SenderHelper &#123; return map[owner] ?: SenderHelper().apply &#123; map[owner] = this with(owner, observer) &#125; &#125; fun get(owner: LifecycleOwner): SenderHelper? &#123; return map[owner] &#125; fun get(sessionId: String): SenderHelper? &#123; return map.values.find &#123; it.sessionId == sessionId &#125; &#125; &#125; // å›è°ƒçš„ liveDataã€‚ private val liveData = MutableLiveData&lt;List&lt;String&gt;&gt;() // rxã€‚ private var compositeDisposable = CompositeDisposable() // å…¥å‚ç¼“å­˜æ± ã€‚ private val cache = LruCache&lt;String, Unit&gt;(CACHE_MAX_SIZE) // ç»“æœåˆ—è¡¨ã€‚ private val resultList = CopyOnWriteArrayList&lt;String&gt;() // é”å¯¹è±¡ mapã€‚ private val lockMap = ConcurrentHashMap&lt;String, Lock&gt;() // dataã€‚ private var groupCode: String = \"\" private var sessionId: String = \"\" private lateinit var dataList: (Unit) -&gt; List&lt;SenderModel&gt; private val memberSet by lazy &#123; MemberHelper.getIfAbsent(groupCode) &#125; private val handler = Handler() private val runnable = Runnable &#123; cache.snapshot().keys.apply &#123; forEach &#123; k -&gt; cache.remove(k) &#125; task(this.toList()) &#125; &#125; /** * åˆå§‹åŒ–ã€‚ */ fun init(sessionId: String, groupCode: String, dataList: (Unit) -&gt; List&lt;SenderModel&gt;) &#123; this.sessionId = sessionId this.groupCode = groupCode this.dataList = dataList &#125; /** * è·å–æœ€æ–°æ•°æ®ã€‚ */ fun bind(sender: SenderModel) &#123; // å¦‚æœæ˜¯è‡ªå·±ï¼Œç›´æ¥è¿”å›ã€‚ if (sender.isSelf || sender.imAccount.isEmpty()) return // å¦‚æœæœ€æ–°ï¼Œç›´æ¥è¿”å›ã€‚ memberSet.get(sender.imAccount)?.let &#123; if (compare(sender, it).falseRun &#123; changeListAndPost(it) &#125;) return &#125; // å­˜å…¥ç¼“å­˜æ± ã€‚ cache.get(sender.imAccount) ?: cache.put(sender.imAccount, Unit) countDown() &#125; /** * ä¸»åŠ¨åˆ·æ–°åç§°ã€‚ */ fun updateNickname(imAccount: String, nickname: String) &#123; memberSet.get(imAccount)?.let &#123; it.nickName = nickname changeListAndPost(it) &#125; &#125; /** * ä¸»åŠ¨åˆ·æ–°èº«ä»½ã€‚ */ fun updateGroupRole(imAccount: String, groupRole: Int) &#123; memberSet.get(imAccount)?.let &#123; it.groupRole = groupRole changeListAndPost(it) &#125; &#125; override fun onDestroy(owner: LifecycleOwner) &#123; compositeDisposable.clear() handler.removeCallbacksAndMessages(null) map.remove(owner) &#125; //---------private method-----------// /** * ç»‘å®šç”Ÿå‘½å‘¨æœŸå’Œè§‚å¯Ÿã€‚ */ private fun with(owner: LifecycleOwner, observer: Observer&lt;List&lt;String&gt;&gt;) &#123; owner.lifecycle.addObserver(this) liveData.observe(owner, observer) &#125; /** * å»¶æ—¶è®¡æ—¶ã€‚ */ private fun countDown() &#123; handler.removeCallbacksAndMessages(null) handler.postDelayed(runnable, COUNT_DOWN_DELAY) &#125; /** * ä»»åŠ¡ã€‚ */ private fun task(imAccountList: List&lt;String&gt;) &#123; Observable .fromIterable(imAccountList) .flatMap &#123; work(it) &#125; .doFinally &#123; if (resultList.isNotEmpty()) &#123; liveData.postValue(ArrayList(resultList)) resultList.clear() &#125; &#125; .subscribe(&#123;&#125;, &#123;&#125;) .addToComposite() &#125; /** * å·¥ä½œã€‚å„è‡ªå¼€è¾Ÿå­çº¿ç¨‹ã€‚ */ private fun work(imAccount: String): Observable&lt;*&gt; &#123; return Observable.just(imAccount) .subscribeOn(Schedulers.io()) .flatMap &#123; synchronized(getLock(it).lock) &#123; if (memberSet.get(it) == null) &#123; netWork(it) &#125; else &#123; Observable.just(it) &#125; &#125; &#125; &#125; /** * ç½‘ç»œæ“ä½œã€‚ä¸å·¥ä½œåŒä¸€ä¸ªçº¿ç¨‹ã€‚ */ private fun netWork(imAccount: String): Observable&lt;*&gt; &#123; return MemberHelper .loadMember(sessionId, imAccount) .filter &#123; it.status &amp;&amp; it.entry != null &#125; .map &#123; it.entry!! &#125; .doOnNext &#123; resultList.add(it.imAccount.orEmpty()) memberSet.put(it) updateDb(it) changeList(it) &#125; &#125; /** * * æ›´æ–°æ•°æ®åº“æ•°æ®ã€‚ */ private fun updateDb(bean: MemberBean) &#123; ...ä¿®æ”¹æ•°æ®åº“å®ç°ä¸é‡è¦... &#125; /** * åˆ·æ´—æ•°æ®åŠå‘é€æ•°æ®å˜åŒ–ä¿¡å·ã€‚ */ private fun changeListAndPost(bean: MemberBean) &#123; changeList(bean).trueRun &#123; liveData.postValue(arrayListOf(bean.imAccount.orEmpty())) &#125; &#125; /** * åˆ·æ–°åˆ—è¡¨æ•°æ®ã€‚ */ private fun changeList(bean: MemberBean): Boolean &#123; val isChange: Boolean dataList() .filter &#123; it.imAccount == bean.imAccount &amp;&amp; compare(it, bean).not() &#125; .apply &#123; isChange = this.isNotEmpty() &#125; .forEach &#123; it.nickName = bean.nickName.orEmpty() it.avatar = bean.avatar?.toLoadUrl().orEmpty() it.setGroupRole(bean.groupRole) &#125; return isChange &#125; /** * æ¯”è¾ƒæ˜¯å¦æœ€æ–°äº†ã€‚ */ private fun compare(sender: SenderModel, bean: MemberBean): Boolean &#123; return (bean.groupRole == sender.groupRole &amp;&amp; bean.nickName == sender.nickName &amp;&amp; bean.avatar?.toLoadUrl() == sender.avatar) &#125; /** * é”ã€‚ */ class Lock(val lock: Any = Any()) /** * è·å–é”å¯¹è±¡ã€‚ */ private fun getLock(imAccount: String): Lock &#123; return lockMap[imAccount] ?: Lock().apply &#123; lockMap[imAccount] = this &#125; &#125; /** * add åˆ°å¤åˆä½“ã€‚ */ private fun Disposable.addToComposite() &#123; compositeDisposable.add(this) &#125;&#125; ä½¿ç”¨ï¼š åˆå§‹åŒ–ï¼š123SenderHelper .with(lifecyclerOwner, Observer &#123; updateList() &#125;) .init(sessionId, groupCode) &#123; getSenderList() &#125; åœ¨recyclerViewé€‚é…å™¨çš„onBindVHå¤„ï¼š1SenderHelper.get(lifecyclerOwner)?.bind(sender) æ”¶åˆ°æ¶ˆæ¯ä¸»åŠ¨åˆ·æ–°ç¼“å­˜ï¼š1234// æ›´æ–°åç§°ã€‚SenderHelper.get(sessionId)?.updateNickname(imAccount,nickNameï¼‰// æ›´æ–°èº«ä»½ã€‚SenderHelper.get(sessionId)?.updateGroupRole(imAccount,groupRoleï¼‰ æ€»ç»“è¦ç‚¹ï¼š æ”¶é›†æœ€æ–°è¿›å…¥çš„ imAccountï¼Œæœ€å¤š10ä¸ªã€‚ é™ç½® 0.5 ç§’ï¼Œå°†æ”¶é›†çš„æ•°æ®åˆ†åˆ«è¯·æ±‚ã€‚ åŒä¸€ä¸ª imAccount åªèƒ½è¯·æ±‚ä¸€æ¬¡ã€‚ ç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œä¸€å¯¹ä¸€å…³ç³»ã€‚ ä¸ç¾¤æˆå‘˜ç¼“å­˜ç»“åˆã€‚ PSï¼šä»è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œå¯ä»¥æ‰©å±•åˆ°åˆ—è¡¨å†…å®¹å±€éƒ¨æ•°æ®è¯·æ±‚æ¥å£åˆ·æ–°çš„åœºæ™¯ã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"IMä¸­æŒ‰åç§°æ‹¼éŸ³å­—æ¯åˆ†ç»„æ’åº","date":"2020-07-21T02:20:30.000Z","path":"2020/07/21/android_9/","text":"å‰è¨€ï¼šåœ¨IMé¡¹ç›®ï¼ˆAndroidé¡¹ç›®ï¼‰ä¸­ï¼Œä¾‹å¦‚ç¾¤æˆå‘˜åˆ—è¡¨ï¼Œé€šè®¯å½•ï¼ˆä»¿å¾®ä¿¡ï¼‰ç­‰ç­‰ã€‚å¾€å¾€ä¼šæŒ‰åç§°é¦–å­—æ¯åˆ†ç»„å¹¶æ’åºã€‚ä»è€Œæ–¹ä¾¿ç”¨æˆ·æ£€ç´¢ã€‚ éœ€æ±‚ï¼šå…ˆä¸Šä¸€å¼ UIæ•ˆæœå›¾ï¼š åˆ†æéœ€æ±‚ æ¯ä¸ªiteméœ€è¦æŒ‰é¦–å­—æ¯åˆ†ç»„ï¼Œç¾¤ä¸»å’Œç®¡ç†å‘˜å•ç‹¬ä¸€ç»„ã€‚Aï½Zä»¥å¤–çš„å­—ç¬¦æ”¾å…¥â€˜#â€™è¿™ç»„ã€‚ æ¯ç»„å†…æŒ‰æ–‡å­—æ‹¼éŸ³æ’åºã€‚ æ¯ç»„ä¹‹é—´æœ‰åˆ†éš”æ ‡é¢˜ã€‚ å³ä¾§ SideBar ï¼ˆè‡ªå®šä¹‰Viewï¼‰å¿«é€Ÿæ£€ç´¢ã€‚ æ³¨ï¼šSideBarè‡ªå®šä¹‰Viewå¹¶éæœ¬æ–‡é‡ç‚¹ã€‚å½“ä½œæœ‰è¿™ä¸ªViewå°±æ˜¯äº†ï¼Œæ–‡æœ«ä¼šç»™ä»£ç ï¼Œè‡ªå·±å»å®ç°æ›´å¥½å“ˆğŸ˜Šã€‚ æ–¹æ¡ˆè®¾è®¡æŒ‰å­—æ¯åˆ†ç»„ï¼šé’ˆå¯¹éœ€æ±‚1ï¼Œ2ã€‚å†™ä¸€ä¸ªé€šç”¨çš„ç±»å»åšè¿™ä¸ªæ—¶ã€‚ï¼ˆå°½é‡ä¸å…·ä½“ä¸šåŠ¡è§£è€¦ï¼Œä¹Ÿæ–¹ä¾¿æ—¥åæ€»ç»“ã€‚ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162object LatterSetUtil &#123; // \"â˜…\" ä»£è¡¨ç‰¹æ®Šåˆ†ç±»ã€‚ private val LETTERS = arrayOf(\"â˜…\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"#\") /** * å®¹å™¨ã€‚ */ class Container&lt;T : ILetter&gt; &#123; internal val map: HashMap&lt;String, ArrayList&lt;T&gt;&gt; = HashMap() init &#123; // å»ºç«‹å­—æ¯åˆ†ç»„mapã€‚ for (s in LETTERS) &#123; map[s] = ArrayList() &#125; &#125; /** * æ’åºåçš„åˆ—è¡¨ã€‚ */ fun getSortList(sort: (ArrayList&lt;T&gt;) -&gt; Unit, addLetter: Boolean = true): List&lt;Any&gt; &#123; val resultList = ArrayList&lt;Any&gt;() // å°†åˆ†ç»„ç»“æœæ’æˆåˆ—è¡¨ã€‚ for (s in LETTERS) &#123; val list = map[s] // é›†åˆéç©ºæ‰èƒ½åŠ å…¥ã€‚ if (list.isNullOrEmpty()) continue if (addLetter) &#123; resultList.add(Letter(s, list.size)) &#125; sort(list) resultList.addAll(list) &#125; return resultList &#125; &#125; class Letter(val letter: String, val size: Int) interface ILetter &#123; /** * è·å–é¦–å­—æ¯ã€‚ */ fun getFirstLetter(): String = \"#\" &#125; /** * æŒ‰å­—æ¯åˆ†ç»„ã€‚ * * @param dataList æ•°æ®æºã€‚ */ fun &lt;T : ILetter&gt; getContainer(dataList: List&lt;T&gt;): Container&lt;T&gt; &#123; val c = Container&lt;T&gt;() // é»˜è®¤æ”¾å…¥\"#\"é›†åˆã€‚ val defList = c.map[\"#\"] ?: return c // å°†åŸæ•°æ®åˆ†ç»„ã€‚ for (ifl in dataList) &#123; // è·å–é¦–å­—æ¯ã€‚ val s = ifl.getFirstLetter() val list = c.map[s] ?: defList // åŠ å…¥å¯¹åº”å­—æ¯çš„å°ç»„ã€‚ list.add(ifl) &#125; return c &#125;&#125; ä½¿ç”¨ï¼š æ•°æ®æºéœ€è¦å®ç°LatterSetUtil.ILetteræ¥å£ã€‚ æ”¾å…¥æ•°æ®æºï¼ˆlistï¼‰è¿”å›ä¸€ä¸ªå®¹å™¨å¯¹è±¡ã€‚é‡Œé¢æ˜¯å·²ç»æŒ‰å­—æ¯åˆ†å¥½ç»„çš„é›†åˆã€‚ è°ƒç”¨getSortListæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªlistã€‚å¤–éƒ¨æŒ‡å®šç»„å†…æ’åºè§„åˆ™ï¼Œæ¯ç»„ä¹‹å‰ä¼šæ’ä¸€ä¸ªLetterè®°å½•é¦–å­—æ¯å’Œè¿™ç»„å…ƒç´ çš„æ•°é‡ã€‚ è·å–é¦–å­—æ¯ æ ¹æ®ä¸­æ–‡è·å–é¦–å­—æ¯ï¼ŒåŸå…ˆï¼Œè‡ªå·±å†™äº†ä¸ªæ ¹æ®æ±‰å­—ç¼–ç è§„å¾‹ï¼ŒæŒ‰å­—ç¬¦åŒºé—´å»åˆ¤æ–­é¦–å­—æ¯çš„æ–¹æ³•ã€‚èƒ½è¦†ç›–å¤§å¤šåœºæ™¯ï¼Œä½†æ˜¯å¾ˆå¿«å°±è¢«æµ‹è¯•æ‰¾å‡ºäº†åä¾‹ğŸ˜“ã€‚äºæ˜¯é‡‡ç”¨ç°æœ‰çš„â€œæ±‰è¯­æ‹¼éŸ³â€åº“ï¼špinyin4jã€‚1implementation 'com.belerweb:pinyin4j:2.5.1' ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132public class FirstLetterUtil &#123; // æ ¹æ®ä¸€ä¸ªåŒ…å«æ±‰å­—çš„å­—ç¬¦ä¸²è¿”å›ä¸€ä¸ªæ±‰å­—æ‹¼éŸ³é¦–å­—æ¯çš„å­—ç¬¦ä¸² æœ€é‡è¦çš„ä¸€ä¸ªæ–¹æ³•. @NonNull public static String first(@Nullable String str) &#123; if (str == null || str.equals(\"\")) &#123; return \"#\"; &#125; char ch = str.charAt(0); if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') &#123; return (char) (ch - 'a' + 'A') + \"\"; &#125; if (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z') &#123; return ch + \"\"; &#125; try &#123; HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat(); // è®¾ç½®å¤§å°å†™æ ¼å¼ defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE); // è®¾ç½®å£°è°ƒæ ¼å¼ï¼š defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE); if (Character.toString(ch).matches(\"[\\\\u4E00-\\\\u9FA5]+\")) &#123; String[] array = PinyinHelper.toHanyuPinyinStringArray(ch, defaultFormat); if (array != null) &#123; return array[0].charAt(0) + \"\"; &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return \"#\"; &#125;&#125; PSï¼šHanyuPinyinï¼šæ±‰è¯­æ‹¼éŸ³ã€‚ã€‚ã€‚ã€‚æ±—ğŸ˜“ã€‚ã€‚ ä½¿ç”¨ï¼š è®©MemberVhModelå®ç°LatterSetUtil.ILetteræ¥å£ï¼ŒgetFirstLetter()å®ç°ä¸ºè¿”å›this.latterã€‚latterå±æ€§åœ¨è®¾ç½®åç§°æ—¶èµ‹å€¼ï¼ˆåˆ©ç”¨FirstLetterUtilï¼‰ã€‚ æ³¨ï¼šä¸ç›´æ¥åœ¨getFirstLetter()æ–¹æ³•è¿”å›FirstLetterUtil.first(name)ã€‚æ˜¯å› ä¸ºFirstLetterUtilçš„è¿™ä¸ªæ–¹æ³•æ•ˆç‡å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œè€ŒgetFirstLetter()è°ƒç”¨å¯èƒ½è¾ƒä¸ºé¢‘ç¹ã€‚å…¶æ¬¡ï¼ŒMemberVhModelå°½é‡å†™æ•°æ®ï¼Œä¸šåŠ¡é€»è¾‘æœ€å¥½è§£è€¦ã€‚ ç»„åˆåˆ—è¡¨å°†ä¸Šè¿°å†…å®¹ç»„åˆèµ·æ¥ã€‚123456789101112131415161718192021/** * åˆ—è¡¨å˜åŒ–ã€‚ */ private fun sortMemberAndLetterList(dataList: List&lt;MemberVhModel&gt;, memberSet: MemberSetModel) &#123; memberSet.clearMembers() val container = LatterSetUtil.getContainer(dataList) val lsList = container.getSortList(&#123; sortMemberList(it) &#125;) for (ls in lsList) &#123; if (ls is LatterSetUtil.Letter) &#123; val model = MemberTitleVhModel(title = ls.letter, letter = ls.letter, size = ls.size) if (ls.letter == ADMIN_LETTER) &#123;// ç®¡ç†å‘˜ã€‚ model.title = String.format(getString(R.string.im_group_admin_count), ls.size) &#125; memberSet.letterList.add(ls.letter) memberSet.itemList.add(model) &#125; else if (ls is MemberVhModel) &#123; memberSet.itemList.add(ls) memberSet.userList.add(ls) &#125; &#125; &#125; ç»„å†…æ’åºï¼š 1234567private val cmp = Collator.getInstance(Locale.CHINA)!! /** * æ’åºã€‚ */ fun sortMemberList(list: ArrayList&lt;MemberVhModel&gt;) &#123; list.sortWith(Comparator &#123; l, r -&gt;cmp.compare(l.name, r.name)&#125;) &#125; UIæ–¹æ¡ˆxmlå¸ƒå±€ï¼šæŠŠè¿™ä¸ªå¸ƒå±€includeåˆ°å…·ä½“çš„å¤§é¡µé¢ä¸­ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:background=\"@color/color_EEEEEE\"&gt; &lt;androidx.recyclerview.widget.RecyclerView android:id=\"@+id/rv_member\" binding_rv_data=\"@&#123;item.syncList&#125;\" binding_rv_noAnim=\"@&#123;true&#125;\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:background=\"@color/color_EEEEEE\" android:orientation=\"vertical\" android:scrollbars=\"none\" app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"&gt; &lt;/androidx.recyclerview.widget.RecyclerView&gt; &lt;--è¿™æ˜¯å¸é¡¶çš„titleã€‚--&gt; &lt;TextView android:id=\"@+id/tv_title\" android:layout_width=\"match_parent\" android:layout_height=\"@dimen/pt_36\" android:background=\"@color/white\" android:gravity=\"center_vertical\" android:paddingStart=\"@dimen/pt_15\" android:paddingEnd=\"@dimen/pt_15\" android:textColor=\"@color/color_3CC55D\" android:textSize=\"@dimen/pt_17\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" tools:text=\"A\" /&gt; &lt;è‡ªå®šä¹‰çš„.SideBar android:id=\"@+id/sb_letter\" android:layout_width=\"@dimen/pt_40\" android:layout_height=\"match_parent\" android:layout_marginTop=\"@dimen/pt_20\" android:layout_marginBottom=\"@dimen/pt_30\" android:focusable=\"true\" android:paddingStart=\"@dimen/pt_20\" android:paddingEnd=\"10dp\" android:textColorHighlight=\"@color/color_3CC55D\" android:textSize=\"@dimen/pt_12_5\" app:layout_constraintEnd_toEndOf=\"parent\" /&gt; &lt;--è¿™æ˜¯æŒ‰ä½SideBarå±•ç¤ºçš„å­—æ¯ã€‚--&gt; &lt;TextView android:id=\"@+id/tv_letter\" android:layout_width=\"@dimen/pt_54\" android:layout_height=\"@dimen/pt_45\" android:layout_marginEnd=\"@dimen/pt_40\" android:background=\"@drawable/im_bg_side_bar_txt\" android:gravity=\"center\" android:includeFontPadding=\"false\" android:paddingStart=\"@dimen/pt_1\" android:paddingEnd=\"@dimen/pt_10\" android:textColor=\"@color/color_3CC55D\" android:textSize=\"@dimen/pt_20\" android:visibility=\"gone\" app:layout_constraintEnd_toEndOf=\"parent\" app:layout_constraintTop_toTopOf=\"@id/sb_letter\" tools:text=\"â˜…\" tools:visibility=\"visible\" /&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; RecyclerViewä¸SideBaræœ‰è”åŠ¨æ•ˆæœã€‚å¹¶ä¸”ä¸å…·ä½“æ•°æ®ä¸šåŠ¡æ— å…³ã€‚æ‰€ä»¥æŠŠè¿™éƒ¨åˆ†ä»£ç è§£è€¦å‡ºæ¥ã€‚ä¸å•æˆå‘˜åˆ—è¡¨ä¸€ä¸ªé¡µé¢ç”¨ã€‚æ·»åŠ ï¼Œåˆ é™¤ç¾¤æˆå‘˜ï¼ŒATæˆå‘˜é¡µé¢éƒ½æœ‰ä¸€æ ·çš„é€»è¾‘ã€‚è¦å­¦ä¼šæŠ½ç¦»å…¬å…±é€»è¾‘ğŸ‘Œã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950object MemberListUI &#123; // æ•°æ®è®°å½•ã€‚ private class Data(var lastPosition: Int = -1) fun init(binding: ImCommonMemberListBinding, rvAdapter: RecyclerView.Adapter&lt;*&gt;) &#123; val data = Data() // è¿™æ˜¯RecyclerViewã€‚ binding.rvMember.run &#123; adapter = rvAdapter addOnScrollListener(object : RecyclerView.OnScrollListener() &#123; override fun onScrolled(v: RecyclerView, dx: Int, dy: Int) &#123; super.onScrolled(v, dx, dy) val item = binding.item ?: return val headerCount = MemberUtil.getHeaderCount(item) // v.getChildAt(0)ä¸ä¼šè¶Šç•Œå¼‚å¸¸ï¼Œè¶…å‡ºç´¢å¼•ä¼šè¿”å›nullã€‚ val position = v.getChildAt(0)?.let &#123; v.getChildLayoutPosition(it) &#125; ?: 0 // å¸é¡¶æ•ˆæœã€‚ binding.tvTitle.setVisible(position &gt; headerCount) // positionå‘ç”Ÿå˜åŒ–æ—¶ã€‚ if (data.lastPosition != position) &#123; binding.tvTitle.text = MemberUtil.getTitleByIndex(item, position - headerCount) data.lastPosition = position &#125; &#125; &#125;) &#125; // è¿™æ˜¯SlideBarã€‚ binding.sbLetter.run &#123; setTextView(binding.tvLetter) setOnTouchingLetterChangedListener &#123; letter -&gt; // è”åŠ¨æˆå‘˜åˆ—è¡¨ã€‚ val item = binding.item ?: return@setOnTouchingLetterChangedListener val index = MemberUtil.getIndexByLetter(item, letter) if (index &lt; 0) return@setOnTouchingLetterChangedListener // åˆ—è¡¨å‰å¯èƒ½æœ‰headerã€‚ val headerCount = MemberUtil.getHeaderCount(item) val position = index + headerCount if (position in 0 until rvAdapter.itemCount) &#123; val layoutManager = binding.rvMember.layoutManager if (layoutManager is LinearLayoutManager) &#123; layoutManager.scrollToPositionWithOffset(position, 0) &#125; if (data.lastPosition != position) &#123; binding.tvTitle.text = MemberUtil.getTitleByIndex(item, position - headerCount) data.lastPosition = position &#125; &#125; &#125; &#125; &#125;&#125; ä½¿ç”¨ï¼š åªéœ€è¦ä¸€å¥è¯ã€‚å†™åœ¨Viewçš„åˆå§‹åŒ–å¤„ã€‚ï¼ˆvListæ˜¯includeçš„å¸ƒå±€IDè½¬è¿‡æ¥çš„bindingã€‚ï¼‰1MemberListUI.init(binding.vList, memberAdapter) æ€»ç»“è¿™ç¯‡çš„å€Ÿç€ç¾¤æˆå‘˜åˆ—è¡¨çš„ä¸šåŠ¡ï¼Œä¸»è¦æƒ³è®²è¿°ä¸€ä¸‹å‡ ç‚¹ã€‚ è¦ç‚¹ï¼š æ•°æ®ç»“æ„ç›¸å…³ï¼Œå°½é‡ä»ä¸šåŠ¡ä¸­æŠ½ç¦»ã€‚è¾¾åˆ°å¯å¤ç”¨æ•ˆæœã€‚ æ•°æ®ç±»å°½é‡ä¸å†™å…·ä½“é€»è¾‘ã€‚é™¤äº†å®ç°æ¥å£ï¼Œå°½å¯èƒ½ç®€å•ã€‚å¤æ‚é€»è¾‘å¤–é¢å»åšã€‚ å…¬å…±UIè¯•ç€æŠ½ç¦»ä¸šåŠ¡ã€‚ ä½“ä¼šï¼š æŠŠä»£ç å®ç°æœ‰æ¡ç†ä¸€ç‚¹ï¼Œæ€»ç»“èµ·æ¥æ„‰å¿«ä¸€äº›ğŸ˜Šã€‚ é™„ä»¶SideBar.java","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"IMé¡¹ç›®ä¸­ç¾¤æˆå‘˜è·å–ä¸ç¼“å­˜ç­–ç•¥","date":"2020-07-21T02:00:30.000Z","path":"2020/07/21/android_8/","text":"å‰è¨€åœ¨IMé¡¹ç›®ï¼ˆAndroidï¼‰ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è·å–ç¾¤æˆå‘˜ï¼Œå¾€å¾€æ•°æ®è¾ƒå¤§ï¼Œè·å–ç¼“æ…¢ï¼Œæ‰€ä»¥éœ€è¦åšä¸ªç¼“å­˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ ç­–ç•¥ å¦‚æœæœ¬åœ°ï¼ˆç¼“å­˜é‡Œï¼‰æœ‰å®Œæ•´æ•°æ®ï¼Œåˆ™å–ç¼“å­˜é‡Œæ•°æ®ï¼Œå¦åˆ™ä»ç½‘è·¯è·å–ã€‚ï¼ˆå¯èƒ½å¤šä¸ªåœ°æ–¹éœ€è¦åŠ è½½æˆå‘˜åˆ—è¡¨ï¼Œä½†æ— æ³•ä¿è¯é‚£å¤„å…ˆåŠ è½½ã€‚æ¯”å¦‚æŸ¥çœ‹ç¾¤æˆå‘˜ï¼Œé€‰æ‹©ATç¾¤å†…æŸäººï¼Œç®¡ç†å‘˜åˆ—è¡¨ç­‰ç­‰ã€‚ï¼‰ ä»ç½‘ç»œè·å–å…¨éƒ¨æˆå‘˜æ—¶ï¼Œåˆ†é¡µè·å–ã€‚é‡‡ç”¨é€’å½’è¯·æ±‚ï¼Œç›´åˆ°æ²¡æœ‰ä¸‹ä¸€é¡µã€‚ æœ€å¤šç¼“å­˜15ä¸ªç¾¤çš„æˆå‘˜ï¼Œå¦‚æœè¶…è¿‡15ä¸ªï¼Œæ·˜æ±°æ‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é‚£ä¸ªç¾¤çš„æˆå‘˜ã€‚ å•ä¸ªæˆå‘˜ä¿¡æ¯è·å–ï¼Œä¼šå­˜åœ¨ä¸´æ—¶æˆå‘˜é‡Œã€‚ï¼ˆç”¨é€”æ˜¯ï¼Œåœ¨ç¾¤èŠå¤©é¡µï¼Œå®æ—¶åˆ·æ–°è°ƒå¤©å‘é€è€…ä¿¡æ¯ã€‚ï¼‰å¦‚æœè¿™ä¸ªç¾¤å·²ç»æœ‰å®Œæˆçš„ç¾¤æˆå‘˜åˆ—è¡¨ï¼Œåˆ™åˆ é™¤ä¸´æ—¶æˆå‘˜ã€‚ï¼ˆèŠå¤©é¡µå‘é€è€…ä¿¡æ¯ç›´æ¥ä»å®Œæ•´çš„ç¾¤æˆå‘˜è¡¨é‡Œå–å‡ºå¯¹æ¯”ï¼‰ã€‚ æ”¯æŒä¿®æ”¹ç¼“å­˜æ•°æ®ã€‚åŒ…æ‹¬å¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹æˆå‘˜ã€‚ æ–¹æ¡ˆè®¾è®¡ç¼“å­˜ï¼šå®šä¹‰æˆå‘˜é›†åˆæ¥å£ï¼š1234567891011121314151617181920212223242526272829/** * æˆå‘˜é›†åˆæ¥å£ã€‚ */interface IMemberSet &#123; /** * æ”¾å…¥å•ä¸ªæˆå‘˜ã€‚ */ fun put(member: MemberBean) /** * è·å–æˆå‘˜ã€‚ */ fun get(imAccount: String): MemberBean? /** * æ”¾å…¥å…¨éƒ¨æˆå‘˜ã€‚ */ fun putAll(memberList: ArrayList&lt;MemberBean&gt;) /** * è·å–å…¨éƒ¨æˆå‘˜ã€‚ */ fun getAll(): ArrayList&lt;MemberBean&gt; /** * å¤§å°ã€‚ */ fun size(): Int /** * æ˜¯å¦å…¨éƒ¨ã€‚ */ fun isAll(): Boolean&#125; å®šä¹‰ç¼“å­˜å™¨æ¥å£ï¼š123456789/** * ç¼“å­˜å™¨æ¥å£ã€‚å¯è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ã€‚ */private interface IMemberCache &#123; fun put(groupCode: String, memberSet: IMemberSet) fun get(groupCode: String): IMemberSet? fun remove(groupCode: String) fun clear()&#125; è·å–ï¼šå…ˆåˆ¤æ–­ç¼“å­˜ï¼Œå†é€’å½’è·å–å…¨éƒ¨ç¾¤æˆå‘˜ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243private val repository by lazy &#123; MemberRepository(RetrofitHelper.instance.createApiService(MemberApi::class.java))&#125;/** * åŠ è½½ç¾¤æˆå‘˜ã€‚ * @param groupCode ç¾¤å·ã€‚ * @param justByNet åªé€šè¿‡ç½‘ç»œè·å–ã€‚ä¼šæŠŠç»“æœç¼“å­˜ã€‚ */fun loadMemberList(groupCode: String, justByNet: Boolean = false): Observable&lt;ArrayList&lt;MemberBean&gt;&gt; &#123; val cacheSet = cache.get(groupCode) return if (cacheSet != null &amp;&amp; cacheSet.isAll() &amp;&amp; justByNet.not()) &#123; // ä»ç¼“å­˜ä¸­è·å–ã€‚ Observable.just(cacheSet.getAll()) &#125; else &#123; // ä»ç½‘ç»œè·å–ã€‚ val list = ArrayList&lt;MemberBean&gt;() getMemberListFromNet(groupCode, 1, list) .doOnNext &#123; val set = cacheSet ?: MemberSet() set.putAll(it) cache.put(groupCode, set) &#125; &#125;&#125;//---------private method-----------///** * é€’å½’è·å–ç¾¤æˆå‘˜ã€‚ */private fun getMemberListFromNet(groupCode: String, pageNo: Int, beanList: ArrayList&lt;MemberBean&gt;) : Observable&lt;ArrayList&lt;MemberBean&gt;&gt; &#123; return repository .postGroupMembers(groupCode, pageNo, pageSize) .filter &#123; it.status.falseRun &#123; throw RuntimeException(it.message.orEmpty()) &#125; &#125; .flatMap &#123; it.entry?.groupMemberList?.let &#123; l -&gt; beanList.addAll(l) &#125; return@flatMap if (it.entry?.hasNextPage == true) &#123; getMemberListFromNet(groupCode, pageNo + 1, beanList) &#125; else &#123; Observable.just(beanList) &#125; &#125;&#125; å®Œæ•´ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176object MemberHelper &#123; private const val pageSize: Int = 500 // ç¼“å­˜15ä¸ªç¾¤ã€‚ private const val maxCount: Int = 15 /** * ç¼“å­˜å™¨æ¥å£ã€‚å¯è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ã€‚ */ private interface IMemberCache &#123; fun put(groupCode: String, memberSet: IMemberSet) fun get(groupCode: String): IMemberSet? fun remove(groupCode: String) fun clear() &#125; /** * æˆå‘˜é›†åˆæ¥å£ã€‚ */ interface IMemberSet &#123; /** * æ”¾å…¥å•ä¸ªæˆå‘˜ã€‚ */ fun put(member: MemberBean) /** * è·å–æˆå‘˜ã€‚ */ fun get(imAccount: String): MemberBean? /** * æ”¾å…¥å…¨éƒ¨æˆå‘˜ã€‚ */ fun putAll(memberList: ArrayList&lt;MemberBean&gt;) /** * è·å–å…¨éƒ¨æˆå‘˜ã€‚ */ fun getAll(): ArrayList&lt;MemberBean&gt; /** * å¤§å°ã€‚ */ fun size(): Int /** * æ˜¯å¦å…¨éƒ¨ã€‚ */ fun isAll(): Boolean &#125; /** * é»˜è®¤ç”¨ LRU ç¼“å­˜ã€‚ */ private val cache: IMemberCache = LruMemberCache(maxCount) private val repository by lazy &#123; MemberRepository(RetrofitHelper.instance.createApiService(MemberApi::class.java)) &#125; /** * ç§»é™¤ä¸€ä¸ªç¾¤æˆå‘˜çš„ç¼“å­˜ã€‚ */ fun remove(groupCode: String) &#123; cache.remove(groupCode) &#125; /** * è·å–ç¼“å­˜é‡Œçš„é›†åˆã€‚ */ fun get(groupCode: String): IMemberSet? &#123; return cache.get(groupCode) &#125; /** * è·å– IMemberSet å¦‚æœæ²¡æœ‰ï¼Œå°±å­˜ä¸€ä¸ªè¿›å»ã€‚ */ fun getIfAbsent(groupCode: String): IMemberSet &#123; return cache.get(groupCode) ?: MemberSet().apply &#123; cache.put(groupCode, this) &#125; &#125; /** * æ¸…ç©ºã€‚ */ fun clear() &#123; cache.clear() &#125; /** * åŠ è½½å•ä¸ªæˆå‘˜åœ¨è¿™ä¸ªç¾¤çš„ä¿¡æ¯ã€‚ * @param sessionId ä¼šè¯ã€‚ * @param imAccount IMå·ã€‚ */ fun loadMember(sessionId: String, imAccount: String): Observable&lt;HttpResponse&lt;MemberBean&gt;&gt; &#123; return repository.getUserInfoBySession(sessionId, imAccount) &#125; /** * åŠ è½½ç¾¤æˆå‘˜ã€‚ * @param groupCode ç¾¤å·ã€‚ * @param justByNet åªé€šè¿‡ç½‘ç»œè·å–ã€‚ä¼šæŠŠç»“æœç¼“å­˜ã€‚ */ fun loadMemberList(groupCode: String, justByNet: Boolean = false): Observable&lt;ArrayList&lt;MemberBean&gt;&gt; &#123; val cacheSet = cache.get(groupCode) return if (cacheSet != null &amp;&amp; cacheSet.isAll() &amp;&amp; justByNet.not()) &#123; // ä»ç¼“å­˜ä¸­è·å–ã€‚ Observable.just(cacheSet.getAll()) &#125; else &#123; // ä»ç½‘ç»œè·å–ã€‚ val list = ArrayList&lt;MemberBean&gt;() getMemberListFromNet(groupCode, 1, list) .doOnNext &#123; val set = cacheSet ?: MemberSet() set.putAll(it) cache.put(groupCode, set) &#125; &#125; &#125; //---------private method-----------// /** * é€’å½’è·å–ç¾¤æˆå‘˜ã€‚ */ private fun getMemberListFromNet(groupCode: String, pageNo: Int, beanList: ArrayList&lt;MemberBean&gt;) : Observable&lt;ArrayList&lt;MemberBean&gt;&gt; &#123; return repository .postGroupMembers(groupCode, pageNo, pageSize) .filter &#123; it.status.falseRun &#123; throw RuntimeException(it.message.orEmpty()) &#125; &#125; .flatMap &#123; it.entry?.groupMemberList?.let &#123; l -&gt; beanList.addAll(l) &#125; return@flatMap if (it.entry?.hasNextPage == true) &#123; getMemberListFromNet(groupCode, pageNo + 1, beanList) &#125; else &#123; Observable.just(beanList) &#125; &#125; &#125; /** * LRUç¼“å­˜å™¨ã€‚ */ private class LruMemberCache(maxSize: Int) : IMemberCache &#123; private val lruCache = LruCache&lt;String, IMemberSet&gt;(maxSize) override fun put(groupCode: String, memberSet: IMemberSet) &#123; lruCache.put(groupCode, memberSet) &#125; override fun get(groupCode: String): IMemberSet? &#123; return lruCache.get(groupCode) &#125; override fun remove(groupCode: String) &#123; lruCache.remove(groupCode) &#125; override fun clear() &#123; lruCache.evictAll() &#125; &#125; /** * æˆå‘˜é›†åˆã€‚ */ private class MemberSet : IMemberSet &#123; // å…¨éƒ¨æˆå‘˜åˆ—è¡¨ã€‚ private val list = ArrayList&lt;MemberBean&gt;() // æ˜¯å¦å…¨éƒ¨æˆå‘˜ã€‚ private var all: Boolean = false // ä¸´æ—¶å­˜æ”¾çš„æˆå‘˜ã€‚ä¿¡æ¯ä¸å…¨çš„beanã€‚ private val map = HashMap&lt;String, MemberBean&gt;() override fun putAll(memberList: ArrayList&lt;MemberBean&gt;) &#123; list.clear() list.addAll(memberList) all = true map.clear() &#125; override fun getAll(): ArrayList&lt;MemberBean&gt; = list override fun size(): Int = list.size + map.size override fun isAll(): Boolean = all override fun put(member: MemberBean) &#123; val have = all &amp;&amp; list.find &#123; it.imAccount == member.imAccount &#125;?.apply &#123; nickName = member.nickName groupRole = member.groupRole avatar = member.avatar &#125; != null if (!have) &#123; map[member.imAccount.orEmpty()] = member &#125; &#125; override fun get(imAccount: String): MemberBean? &#123; return list.find &#123; it.imAccount == imAccount &#125; ?: map[imAccount] &#125; &#125;&#125; æ³¨ï¼šlruCache è®¡ç®—sizeï¼Œä¸èƒ½ç”¨æˆå‘˜ä¸ªæ•°ï¼ˆå³list.size()ï¼‰æ¥è®¡ç®—ï¼Œå› ä¸ºä¸€ä¸ªç¾¤çš„æˆå‘˜åœ¨å­˜å…¥åä¸­é€”æ˜¯å¤§å°ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´lruCacheå†…éƒ¨ç»´æŠ¤çš„sizeè®¡ç®—å°äº0 ï¼ŒtrimToSize æ–¹æ³• æŠ›å‡ºIllegalStateException å¼‚å¸¸ã€‚1234if (size &lt; 0 || (map.isEmpty() &amp;&amp; size != 0)) &#123; throw new IllegalStateException(getClass().getName() + \".sizeOf() is reporting inconsistent results!\"); &#125; ä½¿ç”¨ è·å–æ•°æ®ï¼šloadMemberList()ã€‚å¯ä»¥æŒ‡å®šå¼ºåˆ¶ä»ç½‘ç»œè·å–ã€‚ ç¾¤æˆå‘˜æ–°å¢æ—¶ï¼Œä¸€èˆ¬æ˜¯æ¸…ç©ºè¿™ä¸ªç¾¤çš„ç¼“å­˜æ•°æ®ã€‚è®©ä¸‹æ¬¡é‡æ–°è·å–ï¼Œå› ä¸ºæ–°å¢ç¾¤æˆå‘˜æ—¶ï¼Œå¹¶ä¸èƒ½æ‹¿åˆ°è¿™ä¸ªæˆå‘˜åœ¨è¿™ä¸ªç¾¤çš„è¯¦æƒ…ã€‚ åˆ é™¤å’Œä¿®æ”¹ç›´æ¥ä¿®æ”¹ç¼“å­˜é‡Œçš„æ•°æ®ã€‚ ç»“åˆèŠå¤©é¡µé¢å•ä¸ªæ¶ˆæ¯å‘é€è€…å»åˆ·æ–°æ•°æ®ã€‚ï¼ˆè¿™ä¸ªä¸‹ä¸€ç¯‡ä¼šè®²ï¼‰ã€‚ æ€»ç»“ è®¾è®¡å¥½ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œèƒ½ä½¿å¼€å‘å®ç°æ›´æœ‰æ¡ç†ã€‚ lruCacheï¼Œè®¡ç®—sizeï¼Œå¯¹åŒä¸€ä¸ªå…ƒç´ ï¼Œsizeåº”å½“ä¸å¯å˜ã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"å°æ•…äº‹ï¼šæœªç†Ÿçš„æœå®","date":"2020-07-20T01:50:00.000Z","path":"2020/07/20/story_2/","text":"æ•…äº‹æŸä¸ªåœºæ™¯ã€‚ å¤©åè¦å¸¦å¥¹å›å¤©ç•Œï¼Œå¥¹ä¸æ„¿æ„å‘ç”Ÿäº†äº‰æ‰§ã€‚æˆ‘æ­£èº²åœ¨å¢™åæ¸…æ¥šåœ°å¬ç€ä¸€åˆ‡ã€‚åˆ°åé¢ï¼Œå¥¹ä¸æƒ³å†è¯´ä»€ä¹ˆä»»æ€§åœ°è·‘äº†ã€‚æˆ‘ä¸»åŠ¨èµ°äº†å‡ºæ¥ï¼Œé¢è§å¤©åï¼Œè¯´äº†äº›â€œæ¯ä¸ªäººå¯ä»¥è¿½æ±‚è‡ªç”±â€çš„è¯ã€‚å¤©åå…ˆä¸è¿½ç©¶ï¼Œæš‚æ—¶æ”¾æ‰‹ã€‚ æˆ‘çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æˆ‘çš„è¯æ‰“åŠ¨å¤©åï¼Œè€Œæ˜¯å¤©åçˆ±è‡ªå·±çš„å¥³å„¿ï¼Œå‡¡äººçš„ç†å¿µåœ¨å¥¹çœ‹æ¥åªæ˜¯ä¸€äº›å¹¼ç¨šçš„å„¿è¯ã€‚ æˆ‘æ¥åˆ°ä¸€ä¸ªä»“åº“é—´ï¼Œæˆ‘çŸ¥é“å¥¹ä¸€å®šè—åœ¨è¿™ä¼‘æ¯ã€‚æˆ‘æŠŠä¸€å¼ çº¸ç‰‡å¯¹æŠ˜æ”¾åœ¨æ¡Œå­ä¸Šçš„å‰ªåˆ€æ—è¾¹ã€‚æˆ‘æ‰¾åˆ°äº†å¥¹ï¼Œå¥¹æ­£è£¹ç€éº»è¢‹å°ç¡ã€‚å¥¹åŠçå¼€çœ¼ä¹åŠ›åœ°å¯¹æˆ‘è¯´ï¼Œå¥¹éœ€è¦ç¦»å¼€è¿™é‡Œã€‚ æˆ‘èƒŒç€å¥¹èµ°åœ¨å±±é—´çš„é©¬è·¯ä¸Šï¼Œä¸¤è¾¹èŒ‚ç››çš„æ ‘ä¸›é‡Œå¼€ç€æœé¹ƒèŠ±ã€‚å¥¹ä¸‹å·´æ­åœ¨æˆ‘å·¦è‚©ä¸Šï¼Œä¾§è„¸å¶å¶è§¦ç¢°åˆ°æˆ‘çš„è€³æ ¹ã€‚ æˆ‘é—®å¥¹ï¼šâ€œä¸ºä»€ä¹ˆç»™æˆ‘å’ŒæŸäº›äººä¸€å¼ çº¸ï¼Ÿâ€ å¥¹ç›´ç‡å›ç­”é“ï¼šâ€œä¸ºäº†æ¯”è¾ƒã€‚â€ æˆ‘å†…å¿ƒå¹äº†å£æ°”ï¼Œç‚¹äº†ç‚¹å¤´ã€‚è¯´é“ï¼šâ€œä¹Ÿæ˜¯ï¼Œäººæ´»ç€å°±æ˜¯ç«äº‰ï¼Œæœ‰ç«äº‰å°±æœ‰æ¯”è¾ƒã€‚â€ ä¸ä¹…ï¼Œæˆ‘ä»¬åˆ°äº†ç›®çš„åœ°ï¼Œä¸€æ‰€å¤§åˆ«å¢…ã€‚å¥¹ä¸‹æ¥æˆ‘æ‰¶ç€å¥¹èµ°ã€‚å¥¹è¦èµ°é•¿æ»¡èŠ±çš„å°é“ã€‚æˆ‘åœ¨åœ°ä¸Šæ¡èµ·ä¸€é¢—æ¾æœå¤§å°çš„æœå®ã€‚å¥¹é—®è¿™æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¯´è¿™æ˜¯ä¸€ç§æ— åæ ‘çš„æœå­ï¼Œæˆç†Ÿåæ˜¯èƒ½å¤Ÿåƒçš„ã€‚æˆ‘æ‰“å¼€æœå®ï¼Œé‡Œé¢çš„æœè‚‰è¿˜æ˜¯é€æ˜é‡Œå¸¦é’ï¼Œæ˜¾ç„¶æœå®è¿˜æ²¡æœ‰æˆç†Ÿã€‚","tags":[{"name":"æ•…äº‹","slug":"æ•…äº‹","permalink":"https://wzmyyj.top/tags/æ•…äº‹/"}]},{"title":"IMé¡¹ç›®ä¸­çš„è‡ªå®šä¹‰å°è¡¨æƒ…å®ç°","date":"2020-07-19T02:10:30.000Z","path":"2020/07/19/android_7/","text":"å‰è¨€åœ¨imé¡¹ç›®ï¼ˆAndroidï¼‰ä¸­ï¼Œç”¨æˆ·å‘æ¶ˆæ¯ï¼Œå–œæ¬¢åœ¨æ–‡å­—ä¸­åµŒå…¥ä¸€äº›å°è¡¨æƒ…ï¼Œä»¥è¡¨è¾¾å‘é€è€…å½“æ—¶çš„æƒ…æ„Ÿã€‚é™¤äº†ç³»ç»Ÿè¾“å…¥æ³•è‡ªå¸¦çš„emojiè¡¨æƒ…ï¼ˆemojiå…¶å®æ˜¯ç‰¹æ®Šçš„æ–‡å­—ï¼‰å¤–ã€‚é¡¹ç›®å¸Œæœ›å¸¦ä¸€äº›æ›´æ¼‚äº®ï¼Œå¸¦äº§å“ç‰¹è‰²æ–‡åŒ–çš„è‡ªå®šä¹‰å°è¡¨æƒ…ï¼ˆå°å›¾ç‰‡ï¼‰ã€‚ å›¾ç‰‡åµŒå…¥åœ¨æ–‡å­—ä¸­æ˜¾ç¤ºï¼Œå¾ˆæ˜æ˜¾å¯ä»¥ä½¿ç”¨ImageSpanå»å®ç°è¯¥æ•ˆæœã€‚ æ•ˆæœå¦‚å›¾ï¼š å®ç°ï¼šå®ç°ä¸Šï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼Œå®ç°æ–‡å­—ä¸è¡¨æƒ…çš„è½¬æ¢ã€‚å› æ­¤éœ€è¦å®šä¹‰ä¸€å¥—å¯¹åº”å…³ç³»ã€‚ è¿™é‡Œé‡‡ç”¨ç±»ä¼¼å¾®ä¿¡çš„å®ç°ï¼Œ[key]å¯¹åº”è¡¨æƒ…ã€‚æ¯”å¦‚ï¼š [å¾®ç¬‘] å¯¹åº” ğŸ˜Šã€‚ å·¥å…·ç±»ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154object EmoticonHelper &#123; private const val SIGN_LEFT = '[' private const val SIGN_RIGHT = ']' private const val ZOOM_SIZE = 1.3F private const val CACHE_SIZE = 60 private val def = R.drawable.im_emoticon_def private val keyList = ArrayList&lt;String&gt;() private val cache = LruCache&lt;String, Drawable&gt;(CACHE_SIZE) // è¡¨æƒ…ã€‚ private val map = hashMapOf( \"å¾®ç¬‘\" kto R.drawable.im_emoticon_wx, \"æ’‡å˜´\" kto R.drawable.im_emoticon_pz, \"è‰²\" kto R.drawable.im_emoticon_se, \"å¾—æ„\" kto R.drawable.im_emoticon_dy, \"å¤§å“­\" kto R.drawable.im_emoticon_dk, \"å‘å‘†\" kto R.drawable.im_emoticon_fd, \"é—­å˜´\" kto R.drawable.im_emoticon_bz, \"ç¡\" kto R.drawable.im_emoticon_shui, \"æµæ³ª\" kto R.drawable.im_emoticon_ll, \"å°´å°¬\" kto R.drawable.im_emoticon_gg, \"å‘æ€’\" kto R.drawable.im_emoticon_fn, \"è°ƒçš®\" kto R.drawable.im_emoticon_tb, \"æƒŠè®¶\" kto R.drawable.im_emoticon_jy, \"å›§\" kto R.drawable.im_emoticon_jiong, \"å\" kto R.drawable.im_emoticon_tu, \"å“‡\" kto R.drawable.im_emoticon_wa, \"å·ç¬‘\" kto R.drawable.im_emoticon_tx, \"æ„‰å¿«\" kto R.drawable.im_emoticon_yk, \"ç™½çœ¼\" kto R.drawable.im_emoticon_by, \"ææƒ§\" kto R.drawable.im_emoticon_kj, \"è¡°\" kto R.drawable.im_emoticon_shuai, \"ç¬‘å“­\" kto R.drawable.im_emoticon_kx, \"æ— è¯­\" kto R.drawable.im_emoticon_ww, \"æ™•\" kto R.drawable.im_emoticon_yun, \"å›°\" kto R.drawable.im_emoticon_kun, \"äº²äº²\" kto R.drawable.im_emoticon_qq, \"åº†ç¥\" kto R.drawable.im_emoticon_qz, \"æ±—\" kto R.drawable.im_emoticon_han, \"å’’éª‚\" kto R.drawable.im_emoticon_zm, \"å˜˜\" kto R.drawable.im_emoticon_xu, \"å¯æ€œ\" kto R.drawable.im_emoticon_kl, \"å¤±æœ›\" kto R.drawable.im_emoticon_sw, \"æ†¨ç¬‘\" kto R.drawable.im_emoticon_hx, \"å‘²ç‰™\" kto R.drawable.im_emoticon_cy, \"æ‹¥æŠ±\" kto R.drawable.im_emoticon_yb, \"æ€è€ƒ\" kto R.drawable.im_emoticon_sk, \"å£ç½©\" kto R.drawable.im_emoticon_kz, \"æ‚ é—²\" kto R.drawable.im_emoticon_yxi, \"å§”å±ˆ\" kto R.drawable.im_emoticon_wq, \"åèˆŒå¤´\" kto R.drawable.im_emoticon_tst, \"é¬¼è„¸\" kto R.drawable.im_emoticon_gl, \"é˜´é™©\" kto R.drawable.im_emoticon_yx, \"å•¤é…’\" kto R.drawable.im_emoticon_pj, \"ç«ç‘°\" kto R.drawable.im_emoticon_mg, \"å‡‹è°¢\" kto R.drawable.im_emoticon_dx, \"å¤ªé˜³\" kto R.drawable.im_emoticon_ty, \"ç«\" kto R.drawable.im_emoticon_huo, \"ç¤¼ç‰©\" kto R.drawable.im_emoticon_lw, \"çˆ±å¿ƒ\" kto R.drawable.im_emoticon_ax, \"å¿ƒç¢\" kto R.drawable.im_emoticon_xs, \"å¼º\" kto R.drawable.im_emoticon_qiang, \"å¼±\" kto R.drawable.im_emoticon_ruo, \"é¼“æŒ\" kto R.drawable.im_emoticon_gz, \"OK\" kto R.drawable.im_emoticon_ok, \"è›‹ç³•\" kto R.drawable.im_emoticon_dg, \"åˆå\" kto R.drawable.im_emoticon_h10, \"èƒœåˆ©\" kto R.drawable.im_emoticon_sl, \"æ¡æ‰‹\" kto R.drawable.im_emoticon_ws, \"çº¢åŒ…\" kto R.drawable.im_emoticon_hb, \"é’±\" kto R.drawable.im_emoticon_qian ) /** * è½¬æ¢è¡¨æƒ…ã€‚ */ fun transEmoticon(context: Context, text: CharSequence, size: Float): Spannable &#123; val ss = SpannableString.valueOf(text)!! spanEmoticon(context, ss, 0, ss.length, size) return ss &#125; /** * span è¡¨æƒ…ã€‚è¿”å›æœ€åä¸€ä¸ªspançš„æœ«å°¾ä½ç½®ï¼ˆä¸åŒ…å«ï¼‰ã€‚ */ fun spanEmoticon(context: Context, sp: Spannable, startSp: Int, endSp: Int, size: Float): Int &#123; if (endSp - startSp &lt;= 2) return startSp var last = startSp val wh = size.toZoom() var start = sp.indexOf(SIGN_LEFT, startSp) while (start &gt; -1) &#123; val end = sp.indexOf(SIGN_RIGHT, start) if (end &lt;= start || end &gt;= endSp) break val key = sp.substring(start + 1, end) if (key in map.keys) &#123; val drawable = getDrawable(context, key, wh) ?: continue sp.setSpan(ImageSpan(drawable), start, end + 1, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE) last = end + 1 &#125; start = sp.indexOf(SIGN_LEFT, start + 1) &#125; return last &#125; /** * è·å–è¡¨æƒ…åˆ—è¡¨ã€‚ */ fun getEmoticonList(): List&lt;Emoticon&gt; &#123; return keyList.map &#123; Emoticon(it, it.toCode(), map[it] ?: def) &#125; &#125; class Emoticon(val key: String, val code: String, @DrawableRes val resId: Int) //---------private method-----------// /** * è·å– Drawable å¹¶æ ¹æ® key å’Œ å¤§å° ç¼“å­˜ã€‚ */ private fun getDrawable(context: Context, key: String, size: Int): Drawable? &#123; return cache[key + size] ?: ContextCompat.getDrawable(context, map[key] ?: def)?.apply &#123; cache.put(key + size, this) this.setBounds(0, 0, size, size) &#125; &#125; /** * è½¬æ¢æˆ codeã€‚ */ private fun String.toCode() = SIGN_LEFT + this + SIGN_RIGHT /** * ç¼©æ”¾å¤§å°ã€‚ */ private fun Float.toZoom() = (this * ZOOM_SIZE).toInt() /** * K-V å¯¹ï¼ŒåŒæ—¶ä¿å­˜ keyã€‚ */ private infix fun String.kto(that: Int): Pair&lt;String, Int&gt; &#123; keyList.add(this) return Pair(this, that) &#125;&#125; ä¸»è¦å°±æ˜¯åšä¸€ä¸ªè½¬æ¢åŠŸèƒ½ã€‚åŒæ—¶éœ€è¦è€ƒè™‘ä¸€ä¸‹æ€§èƒ½ä¼˜åŒ–ï¼Œå¦åˆ™æ•ˆç‡ä½å°±ä¼šå¡é¡¿ã€‚ PSï¼šè¿™é‡Œä¼˜åŒ–äº† æŸ¥è¯¢è½¬æ¢ç­–ç•¥ å’Œ Drawableå¤ç”¨ç­–ç•¥ï¼Œä¾›å‚è€ƒã€‚ æ³¨ï¼šSpannableæœ‰å…³çš„æ“ä½œï¼Œå°‘ç”¨Stringã€‚ä½¿ç”¨CharSequenceï¼Œå› ä¸ºä¸ä¸€å®šæ˜¯Stringã€‚ç”¨SpannableString.valueOf(text) ä»£æ›¿new SpannableString(text) ä½¿ç”¨ï¼šåœ¨TextViewä¸Šä½¿ç”¨ï¼Œä¹Ÿå†™ä¸ªBindingAdapteræ–¹æ³•ã€‚ 12345678910111213141516171819202122@BindingAdapter(value = [\"binding_text_emoticon\"], requireAll = true)fun TextView.setEmoticonText(text: CharSequence?) &#123; if (this.text?.toString() != text) &#123; this.text = if (text != null) &#123; EmoticonHelper.transEmoticon(context, text, textSize) &#125; else &#123; \"\" &#125; &#125;&#125;@BindingAdapter(value = [\"binding_text_emoticon\", \"binding_text_emoticon_ellipsize\"], requireAll = true)fun TextView.setEmoticonText(text: CharSequence?, avail: Float) &#123; if (this.text?.toString() != text) &#123; this.text = if (text != null) &#123; val emo = EmoticonHelper.transEmoticon(context, text, textSize) TextUtils.ellipsize(emo, paint, avail, TextUtils.TruncateAt.END) &#125; else &#123; \"\" &#125; &#125;&#125; æ³¨ï¼šå…¶ä¸­TextUtils.ellipsize(emo, paint, avail, TextUtils.TruncateAt.END) æ˜¯ä¸ºäº†è§£å†³è¡¨æƒ…åœ¨å•è¡ŒtextViewæ˜¾ç¤ºä¸ä¸‹æ—¶æ˜¾â€œâ€¦â€.çš„é—®é¢˜ã€‚ç›´æ¥é»˜è®¤ç”¨TextViewçš„ellipsizeå±æ€§ï¼Œå¯¹è¡¨æƒ…ï¼ˆImageSpanï¼‰æ— æ•ˆï¼Œä¼šæˆªæˆåŠä¸ªã€‚ è¾“å…¥æ¡†ï¼šè¡¨æƒ…è¦åœ¨è¾“å…¥æ¡†ä¸­æ˜¾ç¤ºã€‚æ ¹æ®è¾“å…¥codeï¼Œè‡ªåŠ¨è½¬æ¢æˆè¡¨æƒ…ï¼ˆImageSpanï¼‰ã€‚ æ–¹æ¡ˆ1ï¼šç»™EditViewè®¾ç½®ç›‘å¬ï¼Œåœ¨æ–‡å­—å˜åŒ–åå°†æ–‡å­—åšä¸ªè½¬æ¢ã€‚è¿™æ ·æ•ˆç‡è¶…ä½ï¼Œè¾“å…¥è¶Šå¤šè¶Šå¡ã€‚å¦å†³ï¼ æ–¹æ¡ˆ2ï¼šæ ¹æ®å…·ä½“å˜åŒ–çš„æ–‡æœ¬è®¾ç½®è½¬æ¢ã€‚ 1234567891011121314151617181920212223242526272829303132editText.addTextChangedListener(object : TextWatcher &#123; override fun afterTextChanged(s: Editable?) &#123; &#125; override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) &#123; &#125; override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) &#123; if (s !is Spannable) return // è¾“å…¥ä¼šèƒ½å½±å“åˆ°çš„åŒ…å«å‰åå‡ æ ¼ã€‚ val end = start + count val sl = s.lastIndexOf('[', start) val st = if (sl &gt; -1 &amp;&amp; start &lt;= s.indexOf(']', sl)) &#123; sl &#125; else &#123; start &#125; val er = s.indexOf(']', end) val en = if (er &gt; -1 &amp;&amp; s.lastIndexOf('[', er) in 0 until end) &#123; er + 1 &#125; else &#123; end &#125; val last = EmoticonHelper.spanEmoticon(editText.context, s, st, en, editText.textSize) // å¦‚æœè¾“å…¥å½±å“åå‡ æ ¼ï¼Œå³è¿åŒåå‡ æ ¼ä¸€èµ·å˜æˆè¡¨æƒ…ã€‚å°†å…‰æ ‡ç½®äºè¡¨æƒ…æœ«å°¾ã€‚ if (last &gt; end &amp;&amp; last &lt;= s.length) &#123; Selection.setSelection(s, last) &#125; &#125; &#125;) æ³¨ï¼šå½“å‰è¾“å…¥çš„ä¸œè¥¿ï¼ˆå¯èƒ½æ˜¯å¤åˆ¶è¿‡æ¥çš„å¤šä¸ªå­—ç¬¦ï¼‰ã€‚å¯èƒ½ä¼šå½±å“åˆ°å‰é¢æˆ–åé¢çš„å‡ ä¸ªå­—ç¬¦ã€‚ ä¾‹å¦‚ï¼šåŸæœ¬æ–‡æœ¬ï¼šâ€œ[å¾®]â€ ,åœ¨â€œå¾®â€åé¢è¾“å…¥ä¸€ä¸ªâ€œç¬‘â€ï¼Œå®é™…æ–‡æœ¬æ˜¯â€œ[å¾®ç¬‘]â€æ»¡è¶³codeã€‚å°±ä¼šè‡ªåŠ¨è½¬å˜æˆğŸ˜Šè¡¨æƒ…ã€‚æ­¤æ—¶ï¼Œå…‰æ ‡åœ¨â€œç¬‘â€åé¢ï¼Œéœ€è¦ä»£ç æ§åˆ¶æŠŠå…‰æ ‡æŒªåˆ°â€œ]â€çš„åé¢ã€‚æ‰ç¬¦åˆå®é™…è¾“å…¥æ•ˆæœã€‚ è¡¨æƒ…é€‰æ‹©æ¡†æ“ä½œï¼š åˆ é™¤ï¼šæ¨¡æ‹Ÿé€€æ ¼ï¼Œè¡¨æƒ…éœ€è¦æ•´ä¸ªæ•´ä¸ªåˆ ã€‚1editText.dispatchKeyEvent(KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL)) æ’å…¥ï¼šå°†codeæ’å…¥åˆ°å…‰æ ‡æœ«å°¾ã€‚1editText.run &#123; text.insert(selectionEnd, code) &#125; å…¶ä»–ï¼šè½¬å‘åˆ°å¾®ä¿¡ï¼Œæœ‰äº›è¡¨æƒ…å¾®ä¿¡é‡Œæ²¡æœ‰å¯¹åº”ã€‚è½¬æ¢æˆemojiä»£æ›¿ã€‚ 123456789101112131415161718192021222324252627282930// è½¬å‘å¾®ä¿¡éœ€è¦æ›¿æ¢æˆ emoji çš„è¡¨æƒ…ã€‚private val emojiMap = hashMapOf( \"ææƒ§\" to \"\\uD83D\\uDE31\", \"ç¬‘å“­\" to \"\\uD83D\\uDE02\", \"æ— è¯­\" to \"\\uD83D\\uDE12\", \"åº†ç¥\" to \"\\uD83C\\uDF89\", \"å¤±æœ›\" to \"\\uD83D\\uDE14\", \"æ€è€ƒ\" to \"\\uD83E\\uDD14\", \"å£ç½©\" to \"\\uD83D\\uDE37\", \"åèˆŒå¤´\" to \"\\uD83D\\uDE1D\", \"é¬¼è„¸\" to \"\\uD83D\\uDC7B\", \"ç«\" to \"\\uD83D\\uDD25\", \"åˆå\" to \"\\uD83D\\uDE4F\", \"é’±\" to \"\\uD83D\\uDCB0\", \"ç¤¼ç‰©\" to \"\\uD83C\\uDF81\") /** * è½¬å‘å¾®ä¿¡ã€‚ä¸æ”¯æŒçš„ code è½¬åŒ–ä¸º emoji ã€‚ */fun transCodeToEmoji(text: String): String &#123; var str = text for (key in emojiMap.keys) &#123; val code = key.toCode() if (str.contains(code)) &#123; str = str.replace(code, emojiMap[key].orEmpty()) &#125; &#125; return str&#125; æ€»ç»“ï¼šè¦ç‚¹ï¼š ImageSpanå®ç°è¡¨æƒ…çš„æ˜¾ç¤ºã€‚ğŸ˜Š codeä¸Drawableçš„å¯¹åº”å…³ç³»ã€‚ Drawableæ€§èƒ½çš„è€ƒé‡ã€‚ è¡¨æƒ…åœ¨EditTexté‡Œè¾“å…¥çš„å‡ ä¸ªä¼˜åŒ–ç‚¹ã€‚ å¾®ä¿¡è½¬å‘æ—¶æ›¿æ¢codeã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"TextViewè¯†åˆ«æ–‡æœ¬ä¸­çš„è¶…é“¾æ¥å¹¶èƒ½ç‚¹å‡»è·³è½¬","date":"2020-05-12T02:20:30.000Z","path":"2020/05/12/android_6/","text":"éœ€æ±‚ï¼šå¦‚é¢˜æ‰€è¯‰ã€‚éœ€è¦è¯†åˆ«å‡ºæ–‡æœ¬ä¸­çš„é“¾æ¥ï¼Œå¹¶æ˜¾ç¤ºæˆè¶…é“¾æ¥çš„UIæ ·å¼ã€‚ç‚¹å‡»èƒ½å¤Ÿè·³è½¬æ‰“å¼€ç½‘é¡µï¼ˆæœ€å¥½æ˜¯è‡ªå·±appå†…éƒ¨çš„WebViewã€‚ï¼‰ ç®€å•å®ç°ï¼šåœ¨ xml é‡Œç»™TextView è®¾ç½®: 12345&lt;TextView android:autoLink=\"web\" android:linksClickable=\"true\" android:textColorLink=\"@color/color_017EBD\".../&gt; ç®€å•ï¼Œä½†æ˜¯æœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼š é“¾æ¥ä¸‹çš„ä¸‹åˆ’çº¿å»ä¸æ‰ã€‚ åªèƒ½è·³è½¬åˆ°ç³»ç»Ÿé»˜è®¤çš„æµè§ˆå™¨ã€‚ é“¾æ¥åé¢ä¸ä½³ç©ºæ ¼æœ‰ä¸­æ–‡å°±è¯†åˆ«ä¸å‡ºæ¥ã€‚ è™½ç„¶å®ƒä¸å¥½ã€‚ä½†å®ƒæ˜¯ç³»ç»Ÿè‡ªå¸¦çš„åŠŸèƒ½ï¼Œå¯ä»¥çœ‹çœ‹å®ƒçš„å®ç°åŸç†ï¼Œå¯ä»¥å…³é”®åœ°æ–¹æ”¹å†™å®ƒã€‚ åŸç†ï¼šæ ¹æ®æ‰€å­¦çŸ¥è¯†ã€‚æƒ³å¿…ä¹Ÿæ˜¯ClickableSpançš„ä¸€ç§å®é™…ä½¿ç”¨ç½¢äº†ã€‚å¯ä»¥å…ˆçœ‹çœ‹ï¼šClickableSpançš„ä¸€ç‚¹ç‚¹æ‘¸ç´¢ ã€‚ å…³é”®ç±»ï¼š URLSpanï¼šClickableSpançš„å­ç±»ï¼Œå¸¦URLï¼Œä¸‹åˆ’çº¿å»ä¸æ‰ã€‚ LinkMovementMethodï¼šClickableSpanç”Ÿæ•ˆæ‰€éœ€ï¼Œä¹‹å‰è®²äº†ã€‚ Linkifyï¼šä¸€ä¸ªè¯†åˆ«æ–‡å­—ä¸­é“¾æ¥ï¼Œåœ°å€ï¼Œé‚®ç®±ä¹‹ç±»çš„å·¥å…·ç±»ã€‚ å‰é¢ä¸¤ä¸ªçœ‹ClickableSpané‚£ç¯‡å°±ç†è§£äº†ã€‚é‡ç‚¹çœ‹Linkifyã€‚ Linkifyï¼š Linkify take a piece of text and a regular expression and turns all of the regex matches in the text into clickable links. This is particularly useful for matching things like email addresses, web URLs, etc. and making them actionable. Linkifyæ˜¯ä¸€ä¸ªè¾…åŠ©ç±»ï¼Œé€šè¿‡RegExæ ·å¼åŒ¹é…ï¼Œè‡ªåŠ¨åœ°åœ¨TextViewç±»ï¼ˆå’Œç»§æ‰¿çš„ç±»ï¼‰ä¸­åˆ›å»ºè¶…é“¾æ¥ã€‚ å®ƒçš„æ–¹æ³•publicæ–¹æ³•æœ‰å¤šä¸ªé‡è½½æ–¹æ³•ã€‚åªéœ€è¦äº†è§£å®ƒçš„ä¸»è¦åŠŸèƒ½ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨å®ƒå®ç°è¶…é“¾æ¥çš„è¯†åˆ«ã€‚å†™ä¸ªå·¥å…·ç±»ã€‚ å·¥å…·ç±»ï¼šæˆ‘ä»¬åªéœ€è¦è‡ªå®šä¹‰RegExå°±å¯ä»¥å®ç°æˆ‘ä»¬è‡ªå·±çš„è¯†åˆ«è¶…é“¾æ¥è§„åˆ™ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859object HyperLinkHelper &#123; private const val REGEX = \"(((http[s]?|ftp?|file?)://)?[a-zA-Z0-9.\\\\-]+\\\\.([a-zA-Z]&#123;2,4&#125;)(:\\\\d+)?(/[a-zA-Z0-9.\\\\-~!@#$%^&amp;*+?:_/=&lt;&gt;]*)?)|(www.[a-zA-Z0-9.\\\\-]+\\\\.([a-zA-Z]&#123;2,4&#125;)(:\\\\d+)?(/[a-zA-Z0-9.\\\\-~!@#$%^&amp;*+?:_/=&lt;&gt;]*)?)\" /** * è½¬æ¢æˆé“¾æ¥ã€‚ */ fun transUrlSpan(text: CharSequence, @ColorInt highColor: Int = -0xa8946b): Spannable &#123; val ss = SpannableString.valueOf(text) Linkify.addLinks(ss, Pattern.compile(REGEX), \"\") val urlSpans = ss.getSpans(0, ss.length, URLSpan::class.java) ?: return ss for (sp in urlSpans) &#123; val start = ss.getSpanStart(sp) val end = ss.getSpanEnd(sp) ss.removeSpan(sp) ss.setSpan(UrlLinkSpan(sp.url.formatUrl(), highColor), start, end, Spannable.SPAN_INCLUSIVE_EXCLUSIVE) &#125; return ss &#125; /** * è®¾ç½®ç‚¹å‡»äº‹ä»¶ã€‚ */ fun setClickListener(spanned: Spanned, listener: UrlLinkSpan.OnClickListener) &#123; spanned.getSpans(0, spanned.length, UrlLinkSpan::class.java) .forEach &#123; it.listener = listener &#125; &#125; private fun String.formatUrl(): String &#123; return if (indexOf(\"http\") != 0 &amp;&amp; indexOf(\"ftp\") != 0 &amp;&amp; indexOf(\"file\") != 0) &#123; \"http://$this\" &#125; else &#123; this &#125; &#125; // å¹¶æŠŠURLSpanæ›¿æ¢æˆæ ·å¼éœ€è¦çš„Spanã€‚ class UrlLinkSpan(val url: String, @ColorInt val highColor: Int) : ClickableSpan() &#123; var listener: OnClickListener? = null interface OnClickListener &#123; fun onUrlLinkClick(widget: View, url: String) &#125; override fun onClick(widget: View) &#123; listener?.onUrlLinkClick(widget, url) &#125; override fun updateDrawState(ds: TextPaint) &#123; super.updateDrawState(ds) ds.color = highColor ds.isUnderlineText = false &#125; &#125; &#125; æ•´ä¸€ä¸ª BindingAdapter æ–¹æ³•ï¼š 12345678910111213@BindingAdapter(value = [\"binding_text_url_link\", \"binding_url_link_listener\"], requireAll = true)fun TextView.setUrlLinkText(text: CharSequence?, listener: HyperLinkHelper.UrlLinkSpan.OnClickListener) &#123; if (this.text?.toString() != text) &#123; this.text = if (text != null) &#123; HyperLinkHelper.transUrlSpan(text, getColor(R.color.color_017EBD)).apply &#123; HyperLinkHelper.setClickListener(this, listener) movementMethod = ClickLinkMovementMethod &#125; &#125; else &#123; \"\" &#125; &#125;&#125; ClickLinkMovementMethod æ˜¯ä¸ºäº†è§£å†³é•¿æŒ‰çš„é—®é¢˜ã€‚ClickableSpançš„ä¸€ç‚¹ç‚¹æ‘¸ç´¢é‚£ç¯‡æ–‡ç« æœ‰è®²ã€‚ æ‰©å±•ï¼šLinkifyè¿˜å¯ä»¥å®šä¹‰å¦‚ä¸‹æ¥å£ï¼š Match Filterï¼šå®ç°acceptMatchæ–¹æ³•ï¼Œæ¥ä¸ºRegExæ ·å¼åŒ¹é…æ·»åŠ é¢å¤–çš„æ¡ä»¶ã€‚å½“ä¸€ä¸ªæ½œåœ¨çš„åŒ¹é…å‘ç°æ—¶ï¼ŒacceptMatchè¢«è§¦å‘ï¼ŒåŒ¹é…çš„å¼€å§‹ç‚¹å’Œç»“æŸç‚¹ï¼ˆåŒ…æ‹¬è¢«æŸ¥æ‰¾çš„æ•´ä¸ªæ–‡æœ¬ï¼‰ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥ã€‚ Transform Filterï¼šä¸ºæ ¼å¼åŒ–æ–‡æœ¬å­—ç¬¦ä¸²æä¾›æ›´å¤§çš„è‡ªç”±åº¦ï¼Œå…è®¸ä½ ä¿®æ”¹ç”±é“¾æ¥æ–‡æœ¬è‡ªåŠ¨ç”Ÿæˆçš„éšå¼URIã€‚ æœ‰å…´è¶£è‡ªå·±å»äº†è§£ã€‚ æ€»ç»“ï¼šè¦ç‚¹ï¼š æ­£åˆ™è¯†åˆ«é“¾æ¥ æ˜¾ç¤ºæ ·å¼è‡ªå®šä¹‰ï¼Œå»æ‰ä¸‹åˆ’çº¿ã€‚ ç‚¹å‡»é€»è¾‘è‡ªå®šä¹‰ï¼Œè·³è½¬åˆ°è‡ªå·±çš„WebViewã€‚ è§£å†³é•¿æŒ‰å†²çªé—®é¢˜ã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"ClickableSpançš„ä¸€ç‚¹ç‚¹æ‘¸ç´¢","date":"2020-05-12T01:04:30.000Z","path":"2020/05/12/android_5/","text":"ClickableSpanClickableSpan ç”¨æ¥å®ç° TextViewé‡Œçš„æ–‡å­—å±€éƒ¨çš„é«˜äº®å’Œç‚¹å‡»äº‹ä»¶ã€‚ ä»‹ç»ï¼š If an object of this type is attached to the text of a TextView with a movement method of LinkMovementMethod, the affected spans of text can be selected. If selected and clicked, the {@link #onClick} method will* be called. æ„æ€æ˜¯è¿™ä¸œè¥¿åŠ åˆ°TextViewä¸Šï¼Œå¹¶è®¾ç½®LinkMovementMethodï¼Œå°±å¯ä»¥é€‰æ‹©æˆ–ç‚¹å‡»å¹¶å›è°ƒonClickæ–¹æ³•ã€‚æºç ï¼š12345678910111213141516171819202122232425public abstract class ClickableSpan extends CharacterStyle implements UpdateAppearance &#123; private static int sIdCounter = 0; private int mId = sIdCounter++; /** * Performs the click action associated with this span. */ public abstract void onClick(@NonNull View widget); /** * Makes the text underlined and in the link color. */ @Override public void updateDrawState(@NonNull TextPaint ds) &#123; ds.setColor(ds.linkColor); ds.setUnderlineText(true); &#125; /** * Get the unique ID for this span. * * @return The unique ID. * @hide */ public int getId() &#123; return mId; &#125;&#125; æºç æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯èƒ½æ”¹å˜æ–‡å­—æ ·å¼çš„åŒæ—¶æœ‰ä¸ªonClickæŠ½è±¡æ–¹æ³•ã€‚ é‡åˆ°é—®é¢˜é—®é¢˜ï¼šä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸åœ¨vmå±‚ï¼ˆvmé‡Œæˆ–è€… vmçš„è¾…åŠ©é€»è¾‘ç±»é‡Œï¼‰è®¾ç½®æ•°æ®ï¼ˆæ¯”å¦‚SpannableStringï¼‰ï¼Œå¦‚æœè®¾ç½®çš„æ˜¯ClickableSpanã€‚è®¾ç½®æ ·å¼å¤–ï¼Œè¿˜éœ€è¦å®ç°onClickæ–¹æ³•ï¼Œå³ç‚¹å‡»äº‹ä»¶ã€‚ç„¶è€Œç‚¹å‡»äº‹ä»¶å¾€å¾€æ˜¯UIå±‚çš„é€»è¾‘ã€‚ä¸€èˆ¬ä¸å…è®¸åœ¨vmå±‚å†™ç‚¹å‡»äº‹ä»¶é€»è¾‘ã€‚å‘ vmé‡Œä¼ ç‚¹å‡»äº‹ä»¶ï¼ˆå¾€å¾€æ˜¯å†…éƒ¨ç±»ä¼šæŒæœ‰fragmentï¼‰ï¼Œä¸æ˜¯å¾ˆå¯å–ã€‚ç›®æ ‡ï¼šæˆ‘å¸Œæœ›vmå±‚åªå¯¹æ•°æ®çš„è®¾ç½®ï¼ŒUIå±‚è®¾ç½®ç‚¹å‡»äº‹ä»¶ã€‚ æ–¹æ¡ˆï¼šå®šä¹‰ä¸€ä¸ªå¯ä»¥è®¾ç½®äº‹ä»¶ï¼Œå¹¶æºå¸¦æ•°æ®çš„ ClickableSpanã€‚1234567891011121314151617181920212223242526272829class DataClickSpan(@ColorInt val color: Int) : ClickableSpan() &#123; val map = HashMap&lt;String, Any?&gt;() var listener: OnClickListener? = null interface OnClickListener &#123; fun onSpanClick(widget: View, map: HashMap&lt;String, Any?&gt;) &#125; override fun onClick(widget: View) &#123; listener?.onSpanClick(widget, map) &#125; override fun updateDrawState(ds: TextPaint) &#123; //è®¾ç½®é¢œè‰² ds.color = color //å»æ‰ä¸‹åˆ’çº¿ ds.isUnderlineText = false &#125;&#125;/** * è®¾ç½®ç‚¹å‡»äº‹ä»¶ã€‚ */fun Spanned.setDataClickListener(listener: DataClickSpan.OnClickListener?) &#123; getSpans(0, this.length - 1, DataClickSpan::class.java) .forEach &#123; it.listener = listener &#125;&#125;å†æ•´ä¸€ä¸ªBindingAdapteræ–¹æ³•ï¼š@BindingAdapter(value = [\"binding_spanned_data\", \"binding_spanned_clickListener\"], requireAll = true)fun TextView.setSpannedClickListenerOfString(data: Spanned?, listener: DataClickSpan.OnClickListener?) &#123; data?.setDataClickListener(listener) movementMethod = ClickLinkMovementMethod// è¿™ä¸ªæ˜¯è‡ªå®šä¹‰LinkMovementMethod&#125; ä½¿ç”¨ï¼švm å±‚ä½¿ç”¨ï¼Œè®¾ç½®æºå¸¦æ•°æ®ï¼š123456// æºå¸¦ imAccountSpannableString(\"è¿™æ˜¯å¯ä»¥ç‚¹å‡»çš„æ–‡å­—\").apply &#123; setSpan(DataClickSpan(getColor(R.color.color_576B95)) .apply &#123; map[IM_ACCOUNT] = joinGroupMsg.inviteImAccount &#125;, 1, length - 1, Spanned.SPAN_INCLUSIVE_EXCLUSIVE) &#125; UI å±‚ä½¿ç”¨ï¼Œè®¾ç½®äº‹ä»¶ï¼Œæ¯”å¦‚è¿™ä¸ªSpannableStringæ˜¯è®¾ç½®å†æŸä¸ªitemçš„TextView ä¸Šã€‚ è®©è¿™ä¸ªItemçš„ VHModel çš„OnItemEventListenerç»§æ‰¿DataClickSpan.OnClickListener å†å¸ƒå±€é‡Œè®¾ç½®ï¼š 1234&lt;TextView binding_spanned_clickListener=\"@&#123;listener&#125;\" binding_spanned_data=\"@&#123;item.removeDesc&#125;\".../&gt; åœ¨Fragmenté‡Œå®ç°æ¥å£ï¼š 123456override fun onSpanClick(widget: View, map: HashMap&lt;String, Any?&gt;) &#123; val imAccount = map[ConvertUtil.IM_ACCOUNT] if (imAccount is String) &#123; RouterManager.goImUser(UserParams(imAccount), \"ChatFragment\") &#125;&#125; ç»“è®ºï¼šæ²¡å•¥å¥½çš„ï¼Œå°±æ˜¯æ›²æŠ˜å»å®ç°åˆ†ç¦»è€Œå·²ã€‚ vm è¿˜æœ‰é—´æ¥ä¾èµ–Viewã€‚vmæŒæœ‰SpannableStringï¼ŒSpannableStringæŒæœ‰ClickableSpanï¼ŒClickableSpanæŒæœ‰listenerï¼ŒlisteneræŒæœ‰fragmentã€‚emmmmâ€¦. ClickableSpanè®¾è®¡å°±æ˜¯è¿™æ ·ã€‚é‚£å°±æ¥äº†è§£äº†è§£å®ƒçš„å®ç°åŸç†å§ã€‚ LinkMovementMethodï¼šClickableSpanæºç ä¹Ÿçœ‹äº†ï¼Œæ˜¾ç„¶å®ƒä¸æ˜¯ä¸»è¦å…³é”®ã€‚é‚£æ˜¯è°å»è°ƒç”¨ClickableSpançš„onClickæ–¹æ³•ï¼Œæ€ä¹ˆå†³å®šè°ƒç”¨æ—¶æœºå‘¢ï¼Ÿ ClickableSpanæ–‡ä»¶å¤´ä»‹ç»ä¸­ï¼Œå·²ä¾›å‡ºä¸»è°‹æ˜¯LinkMovementMethodï¼ˆæ˜¯ä¸€ä¸ªå•ä¾‹ï¼‰ã€‚ ç‚¹å‡»äº‹ä»¶ï¼Œæ˜¾ç„¶ç¦»ä¸å¼€onTachçš„æ–¹æ³•ã€‚LinkMovementMethodé‡Œæ­£å¥½æœ‰ï¼Œé‚£å°±å†³å®šæ˜¯å®ƒäº†ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950@Override public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) &#123; int action = event.getAction(); if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_DOWN) &#123; int x = (int) event.getX(); int y = (int) event.getY(); x -= widget.getTotalPaddingLeft(); y -= widget.getTotalPaddingTop(); x += widget.getScrollX(); y += widget.getScrollY(); // æ‰¾è§¦ç¢°çš„ä½ç½®ã€‚ Layout layout = widget.getLayout(); // ç¬¬å‡ è¡Œã€‚ int line = layout.getLineForVertical(y); // ç¬¬å‡ ä¸ªå­—ç¬¦ã€‚ int off = layout.getOffsetForHorizontal(line, x); // æ‰¾å‡ºè§¦æ‘¸åˆ°çš„æ–‡æœ¬ä¸­çš„ ClickableSpanã€‚ ClickableSpan[] links = buffer.getSpans(off, off, ClickableSpan.class); if (links.length != 0) &#123; ClickableSpan link = links[0]; if (action == MotionEvent.ACTION_UP) &#123; // ä¸è®¤è¯†ï¼Œä¸ç®¡å®ƒã€‚ if (link instanceof TextLinkSpan) &#123; ((TextLinkSpan) link).onClick( widget, TextLinkSpan.INVOCATION_METHOD_TOUCH); &#125; else &#123; // æ‰‹æŒ‡æŠ¬èµ·æ—¶å›è°ƒonClickæ–¹æ³•ã€‚ link.onClick(widget); &#125; &#125; else if (action == MotionEvent.ACTION_DOWN) &#123; // æŒ‰ä¸‹è®¾ç½®ä¸€ä¸‹é€‰ä¸­æ ·å¼ã€‚ä¹Ÿå°±æ˜¯å…‰æ ‡ã€‚ if (widget.getContext().getApplicationInfo().targetSdkVersion &gt;= Build.VERSION_CODES.P) &#123; // Selection change will reposition the toolbar. Hide it for a few ms for a // smoother transition. widget.hideFloatingToolbar(HIDE_FLOATING_TOOLBAR_DELAY_MS); &#125; Selection.setSelection(buffer, buffer.getSpanStart(link), buffer.getSpanEnd(link)); &#125; return true; &#125; else &#123; // æ¸…é™¤é€‰ä¸­æ ·å¼ã€‚ä¹Ÿå°±æ˜¯å…‰æ ‡ã€‚ Selection.removeSelection(buffer); &#125; &#125; return super.onTouchEvent(widget, buffer, event); &#125; æ‰€ä»¥LinkMovementMethodä¹Ÿæ˜¯æ ¹æ®è§¦æ‘¸çš„ä½ç½®æ‰¾å‡ºClickableSpanï¼ˆåŒä¸€ä¸ªä½ç½®è®¾ç½®å¤šä¸ªçš„è¯ï¼Œä¹Ÿåªä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªï¼‰ï¼Œç„¶åå›è°ƒonClickã€‚LinkMovementMethodæ˜¯è¢«TextViewå›è°ƒã€‚çœ‹åˆ°è¿™é‡ŒClickableSpançš„å®ç°åŸç†åŸºæœ¬å°±æ¸…æ¥šäº†ã€‚ å…¶ä»–æ–¹æ¡ˆæœ‰ä¸ªå¤§èƒ†çš„æƒ³æ³•ğŸ’¡ï¼šæˆ‘å…ˆè‡ªå®šä¹‰åªå¸¦æ•°æ®å’Œæ ·å¼çš„spanã€‚å†å®šä¹‰ä¸€ä¸ª MySpanListener é‡Œé¢æœ‰ä¸ªæ–¹æ³•onClick(v:View,data:Data)ã€‚ç„¶åè‡ªå®šä¹‰LinkMovementMethodï¼ˆæ¯”å¦‚å«MyMovementMethodï¼‰ã€‚åŒä¸Šåœ¨onTouchEventé‡Œæ‰¾å‡ºè‡ªå·±å®šä¹‰spanã€‚ç„¶åæ ¹æ®textViewæ‹¿åˆ°listenerã€‚å›è°ƒonClick(v:View,data:Data)æ–¹æ³•ã€‚é‚£ä¹ˆé—®é¢˜æ˜¯çº¢å­—çš„æ€ä¹ˆå»å®ç°ï¼ˆä¸»è¦é—®é¢˜æ˜¯listenerï¼Œä»¥ä»€ä¹ˆç»´åº¦å‚¨å­˜ï¼Œæ€ä¹ˆå‚¨å­˜ï¼‰ã€‚æ¯”å¦‚åœ¨MyMovementMethodé‡Œè®¾ç½®ä¸€ä¸ªå¼±å¼•ç”¨çš„mapï¼šWeakHashMap&lt;TextView,MySpanListener&gt; ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ï¼Œä½†æ˜¯çœ‹èµ·æ¥æŒºåˆ«æ‰­ã€‚å“ˆã€‚ã€‚ã€‚ å¦ä¸€ä¸ªé—®é¢˜LinkMovementMethodæœ‰ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯é•¿æŒ‰æ—¶ã€‚ä¾æ—§ä¼šå›è°ƒonClickæ–¹æ³•ã€‚è¿™å°±ä¼šå‡ºç°äº¤äº’ä¼¤çš„bugã€‚è§£å†³æ–¹æ¡ˆï¼š123456789101112131415161718192021222324252627282930313233343536373839object ClickLinkMovementMethod : LinkMovementMethod() &#123; private const val CLICK_DELAY = 500L private var lastClickTime: Long = 0 override fun onTouchEvent(widget: TextView?, buffer: Spannable?, event: MotionEvent?): Boolean &#123; event ?: return false widget ?: return false val action = event.action if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_DOWN) &#123; var x = event.x.toInt() var y = event.y.toInt() x -= widget.totalPaddingLeft y -= widget.totalPaddingTop x += widget.scrollX y += widget.scrollY val layout: Layout = widget.layout val line: Int = layout.getLineForVertical(y) val off: Int = layout.getOffsetForHorizontal(line, x.toFloat()) val link: Array&lt;ClickableSpan&gt; = buffer?.getSpans(off, off, ClickableSpan::class.java) ?: return true if (link.isNotEmpty()) &#123; if (action == MotionEvent.ACTION_UP) &#123; if (System.currentTimeMillis() - lastClickTime &lt; CLICK_DELAY) &#123; link[0].onClick(widget) &#125; &#125; else if (action == MotionEvent.ACTION_DOWN) &#123; lastClickTime = System.currentTimeMillis() Selection.setSelection(buffer, buffer.getSpanStart(link[0]), buffer.getSpanEnd(link[0])) &#125; return true &#125; else &#123; Selection.removeSelection(buffer) &#125; &#125; return false &#125;&#125; æ€»ç»“ï¼š ClickableSpanå®ç°ç‚¹å‡»ç›‘å¬çš„åŸç†æ˜¯LinkMovementMethodã€‚ LinkMovementMethodå­˜åœ¨é•¿æŒ‰æ—¶äº¤äº’çš„bugã€‚ ClickableSpançš„æ•°æ®&amp;äº‹ä»¶åˆ†ç¦»ä¾æ—§æœŸæœ›æ›´ä¼˜è´¨çš„æ–¹æ¡ˆã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"Fragment ç›‘å¬è¿”å›æŒ‰é”®","date":"2020-05-11T05:00:30.000Z","path":"2020/05/11/android_4/","text":"ç›‘å¬è¿”å›é”®Androidå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç”¨fragmentæ‰¿æ‹…é¡µé¢UIä¸»è¦çš„é€»è¾‘ï¼Œç®€åŒ–activityé€»è¾‘ã€‚æœ‰ä¸ªåœºæ™¯ï¼Œfragmentéœ€è¦ç›‘å¬è¿”å›é”®ã€‚ä½†fragmentä¸åƒactivityèƒ½æ„ŸçŸ¥ç‰©ç†æŒ‰é”®ã€‚ è¿‡å»æˆ‘ä»¬ä¼šå†™ä¸€ä¸ªç›‘å¬æ¥å£ï¼Œè®©fragmentå®ç°ã€‚ç„¶åactivityéå†ï¼ˆæˆ–æ ¹æ®tagï¼‰æ‰¾åˆ°éœ€è¦çš„fragmentï¼Œåœ¨æŒ‰è¿”å›é”®æ—¶ï¼Œä¸»åŠ¨å°†äº‹ä»¶ä¸‹å‘ç»™fragmentã€‚ è™½ç„¶å®ç°äº†fragmentç›‘å¬è¿”å›é”®çš„æ•ˆæœï¼Œä½†æ˜¯ä»£ç éœ€è¦ä¾µå…¥åˆ°activityï¼Œå¹¶ä¸åˆ©äºç»´æŠ¤ã€‚googleå®˜æ–¹ä¹Ÿè€ƒè™‘åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ ç°åœ¨åœ¨æ–°ç‰ˆçš„AndroidXä¸­ï¼šComponentActivityä¸­å¢åŠ äº†OnBackPressedDispatcherï¼ˆç”¨äºæ³¨å†Œè¿”å›é”®ç›‘å¬ï¼‰ã€‚ activityç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š æ–°çš„fragmentç›‘å¬æ–¹æ¡ˆï¼š å…³é”®ç±»ï¼šOnBackPressedCallbackï¼ŒOnBackPressedDispatcherï¼ŒComponentActivityã€‚ 1234567// å®šä¹‰è¿”å›é”®ç›‘å¬äº‹ä»¶ã€‚val callback = object : OnBackPressedCallback(false) &#123; override fun handleOnBackPressed() &#123; //do some thing &#125; &#125; 1234// æ³¨å†Œç›‘å¬äº‹ä»¶ã€‚activityä¸ºComponentActivityçš„å­ç±»å¯¹è±¡å³å¯ã€‚å¹¶ç»‘å®šç”Ÿå‘½å‘¨æœŸã€‚activity.onBackPressedDispatcher.addCallback(lifecycleOwner, callback)// ä¹Ÿå¯ä»¥ä¸ç»‘å®šç”Ÿå‘½å‘¨æœŸã€‚activity.onBackPressedDispatcher.addCallback(callback) OnBackPressedCallbackå¯ä»¥è®¾ç½®enabledï¼Œå¯ä»¥çµæ´»æ§åˆ¶è¦ä¸è¦æ¶ˆè´¹è¿”å›é”®ç‚¹å‡»äº‹ä»¶ã€‚ ä¼˜åŠ¿æ‰€æœ‰ä»£ç éƒ½åœ¨fragmenté‡Œã€‚ä¸éœ€è¦è¦æ±‚activityå†™å¤šä½™çš„é€»è¾‘ã€‚åªè¦èƒ½æ‹¿åˆ°activityå¯¹è±¡å’Œæ‰€åœ¨çš„lifecycleOwnerå³å¯å®Œæˆç›‘å¬ä»»åŠ¡ã€‚ç”šè‡³æ˜¯åœ¨è‡ªå®šä¹‰viewä¸­ã€‚ æ·±å…¥æºç OnBackPressedCallbackï¼šç”¨äºå¤„ç†OnBackPressedDispatcher.onBackPressed()å›è°ƒè€Œæ— éœ€å°†è¯¥å®ç°ä¸çš„å­ç±»å¼ºè€¦åˆçš„ç±»ComponentActivityã€‚æºç æ¯”è¾ƒç®€å• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public abstract class OnBackPressedCallback &#123; private boolean mEnabled; private CopyOnWriteArrayList&lt;Cancellable&gt; mCancellables = new CopyOnWriteArrayList&lt;&gt;(); /** * Create a &#123;@link OnBackPressedCallback&#125;. * * @param enabled The default enabled state for this callback. * @see #setEnabled(boolean) */ public OnBackPressedCallback(boolean enabled) &#123; mEnabled = enabled; &#125; /** * Set the enabled state of the callback. Only when this callback * is enabled will it receive callbacks to &#123;@link #handleOnBackPressed()&#125;. * &lt;p&gt; * Note that the enabled state is an additional layer on top of the * &#123;@link androidx.lifecycle.LifecycleOwner&#125; passed to * &#123;@link OnBackPressedDispatcher#addCallback(LifecycleOwner, OnBackPressedCallback)&#125; * which controls when the callback is added and removed to the dispatcher. * * @param enabled whether the callback should be considered enabled */ @MainThread public final void setEnabled(boolean enabled) &#123; mEnabled = enabled; &#125; /** * Checks whether this callback should be considered enabled. Only when this callback * is enabled will it receive callbacks to &#123;@link #handleOnBackPressed()&#125;. * * @return Whether this callback should be considered enabled. */ @MainThread public final boolean isEnabled() &#123; return mEnabled; &#125; /** * Removes this callback from any &#123;@link OnBackPressedDispatcher&#125; it is currently * added to. */ @MainThread public final void remove() &#123; for (Cancellable cancellable: mCancellables) &#123; cancellable.cancel(); &#125; &#125; /** * Callback for handling the &#123;@link OnBackPressedDispatcher#onBackPressed()&#125; event. */ @MainThread public abstract void handleOnBackPressed(); void addCancellable(@NonNull Cancellable cancellable) &#123; mCancellables.add(cancellable); &#125; void removeCancellable(@NonNull Cancellable cancellable) &#123; mCancellables.remove(cancellable); &#125;&#125; OnBackPressedDispatcherï¼šå­˜æ”¾ç›‘å¬çš„å®¹å™¨ï¼Œé€šè¿‡å®ƒç»Ÿä¸€æ‰§è¡Œã€‚ å‚¨å­˜ç»“æ„ï¼š 123// åˆ©ç”¨ä¸€ä¸ªé˜Ÿåˆ—å­˜å‚¨å›è°ƒã€‚ @SuppressWarnings(\"WeakerAccess\") /* synthetic access */final ArrayDeque&lt;OnBackPressedCallback&gt; mOnBackPressedCallbacks = new ArrayDeque&lt;&gt;(); æ˜¯å¦æœ‰æœ‰æ•ˆå›è°ƒï¼š1234567891011@MainThread public boolean hasEnabledCallbacks() &#123; Iterator&lt;OnBackPressedCallback&gt; iterator = mOnBackPressedCallbacks.descendingIterator(); while (iterator.hasNext()) &#123; if (iterator.next().isEnabled()) &#123; return true; &#125; &#125; return false; &#125; æ‰§è¡Œé¡ºåºï¼š12345678910111213141516// æŒ‰å…ˆæ³¨å†Œé¡ºåºéå†ï¼Œåªæ‰§è¡Œenabledä¸ºtrueçš„å›è°ƒã€‚@MainThread public void onBackPressed() &#123; Iterator&lt;OnBackPressedCallback&gt; iterator = mOnBackPressedCallbacks.descendingIterator(); while (iterator.hasNext()) &#123; OnBackPressedCallback callback = iterator.next(); if (callback.isEnabled()) &#123; callback.handleOnBackPressed(); return; &#125; &#125; if (mFallbackOnBackPressed != null) &#123; mFallbackOnBackPressed.run(); &#125; &#125; ç»‘å®šç”Ÿå‘½å‘¨æœŸåŸç†ï¼š12345678910@MainThread public void addCallback(@NonNull LifecycleOwner owner, @NonNull OnBackPressedCallback onBackPressedCallback) &#123; Lifecycle lifecycle = owner.getLifecycle(); if (lifecycle.getCurrentState() == Lifecycle.State.DESTROYED) &#123; return; // æ— è§†å·²ç»æ­»äº¡çš„ã€‚ &#125; onBackPressedCallback.addCancellable( new LifecycleOnBackPressedCancellable(lifecycle, onBackPressedCallback)); &#125; LifecycleOnBackPressedCancellable ç›‘å¬ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Œå†³å®šæ˜¯å¦cancelæ‰ç›‘å¬ã€‚12345678910111213141516171819202122232425262728293031323334353637private class LifecycleOnBackPressedCancellable implements LifecycleEventObserver, Cancellable &#123; private final Lifecycle mLifecycle; private final OnBackPressedCallback mOnBackPressedCallback; @Nullable private Cancellable mCurrentCancellable; LifecycleOnBackPressedCancellable(@NonNull Lifecycle lifecycle, @NonNull OnBackPressedCallback onBackPressedCallback) &#123; mLifecycle = lifecycle; mOnBackPressedCallback = onBackPressedCallback; lifecycle.addObserver(this); &#125; @Override public void onStateChanged(@NonNull LifecycleOwner source, @NonNull Lifecycle.Event event) &#123; if (event == Lifecycle.Event.ON_START) &#123; // æ­¤æ—¶ä¸ºæœ‰æ•ˆã€‚ mCurrentCancellable = addCancellableCallback(mOnBackPressedCallback); &#125; else if (event == Lifecycle.Event.ON_STOP) &#123; // Should always be non-null if (mCurrentCancellable != null) &#123; mCurrentCancellable.cancel(); &#125; &#125; else if (event == Lifecycle.Event.ON_DESTROY) &#123; cancel(); &#125; &#125; @Override public void cancel() &#123; mLifecycle.removeObserver(this); mOnBackPressedCallback.removeCancellable(this); if (mCurrentCancellable != null) &#123; mCurrentCancellable.cancel(); mCurrentCancellable = null; &#125; &#125; &#125; ComponentActivityï¼š å…³é”®ä»£ç ï¼š1234567891011121314// çˆ¶ç±»çš„ onBackPressed äº‹ä»¶å§”æ‰˜ç»™ OnBackPressedDispatcher ã€‚private final OnBackPressedDispatcher mOnBackPressedDispatcher = new OnBackPressedDispatcher(new Runnable() &#123; @Override public void run() &#123; ComponentActivity.super.onBackPressed(); &#125; &#125;);// è‡ªå·±çš„ onBackPressed å…¨äº¤ç»™ OnBackPressedDispatcher å¤„ç†ã€‚@Override @MainThread public void onBackPressed() &#123; mOnBackPressedDispatcher.onBackPressed(); &#125; æ€»ç»“åˆ©ç”¨æ³¨å†Œç›‘å¬çš„æ–¹å¼ï¼Œå¯ä»¥å¾ˆå¥½çš„ç»“å¶ä»£ç ï¼Œå¯ä»¥activityçš„åŠŸèƒ½åˆ†å‘åˆ°å„ä¸ªèƒ½å¤Ÿè®¿é—®activityå¯¹è±¡çš„ç»„ä»¶ä¸Šã€‚","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"LiveDataå®ç°æ¶ˆæ¯æ€»çº¿","date":"2020-05-10T07:04:30.000Z","path":"2020/05/10/android_3/","text":"æ¶ˆæ¯æ€»çº¿Androidå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸é‡è§ä¸åŒé¡µé¢ä¹‹é—´è¦ä¿æŒæ•°æ®åŒæ­¥ã€‚é€æœ€åˆçš„onActivityResultï¼Œåˆ°åé¢çš„ç¬¬ä¸‰æ–¹åº“EventBusï¼ŒRxBus,LiveEventBusã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ©ç”¨livedataè‡ªå·±å†™ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯æ€»çº¿ã€‚ å¯¹æ¯”è¿‡å»ï¼šonActivityResultï¼šä½¿ç”¨è¾ƒä¸ºç¹çï¼Œå¹¶ä¸”åœ¨å¤šé¡µé¢ä¸‹ï¼ˆæ¯”å¦‚æ ˆï¼šA,B,Cã€‚Cçš„äº‹ä»¶è¦ä¼ é€’ç»™Aå°±ä½¿ç”¨ä¸æ–¹ä¾¿äº†)ã€‚EventBusï¼šæ—¶ä»£çš„çœ¼æ³ªï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œä½†æ€§èƒ½å†…å­˜ä½“ç§¯éƒ½æ˜¯ç¼ºé™·ã€‚RxBusï¼šä¸æ˜¯åº“ï¼Œæ˜¯ä¸ªæ–‡ä»¶ï¼Œå®ç°åªæœ‰çŸ­çŸ­30è¡Œä»£ç ã€‚ç»“åˆRxjavaå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ã€‚LiveEventBusï¼šåˆ©ç”¨ç³»ç»Ÿçš„livedataã€‚ä½“ç§¯å°ã€‚ä¸”å¯ä»¥æ„ŸçŸ¥ç”Ÿå‘½å‘¨æœŸã€‚æ¶ˆæ¯æ€»çº¿ | å»¶è¿Ÿå‘é€ | æœ‰åºæ¥æ”¶æ¶ˆæ¯ | Sticky | ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ | è·¨è¿›ç¨‹/APP | çº¿ç¨‹åˆ†å‘-|-|-|-|-|-|-EventBus | âŒ | âœ… | âœ… | âŒ | âŒ | âœ…RxBus | âŒ | âŒ | âœ… | âŒ | âŒ | âœ…LiveEventBus | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ å®ƒä»¬éƒ½å¾ˆä¼˜ç§€ã€‚ä½†æˆ‘ä»¬ä¸ç”¨å®ƒä»¬ã€‚è‡ªå·±å†™ä¸ªç®€å•çš„å®ç°æ–¹æ¡ˆã€‚ä¸»è¦å‚è€ƒLiveEventBusçš„æ ¸å¿ƒé€»è¾‘ã€‚ ä»£ç ï¼šçŸ­çŸ­50å¤šè¡Œä»£ç ï¼ˆå»æ‰æ³¨é‡Šå’Œç©ºè¡Œä¹Ÿå°±30è¡Œå·¦å³ï¼‰ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849object EventHelper &#123; private val map = HashMap&lt;String, EventLiveData&lt;*&gt;&gt;() @Suppress(\"UNCHECKED_CAST\") fun &lt;T&gt; with(key: String, type: Class&lt;T&gt;? = null): EventLiveData&lt;T&gt; &#123; if (!map.containsKey(key)) &#123; map[key] = EventLiveData&lt;T&gt;() &#125; return map[key] as? EventLiveData&lt;T&gt; ?: throw RuntimeException(\"cannot cast EventLiveData of \" + type.toString()) &#125; /** * è®°å½•ç‰ˆæœ¬çš„ MutableLiveDataã€‚ */ class EventLiveData&lt;T&gt; : MutableLiveData&lt;T&gt;() &#123; var version: Int = 0 private set /** * postValue æœ€ç»ˆä¹Ÿä¼šè°ƒ setValue ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨è¿™é‡Œç»Ÿè®¡ versionã€‚ */ override fun setValue(value: T) &#123; version++ super.setValue(value) &#125; /** * è®¢é˜…äº‹ä»¶ã€‚ç»‘å®šç”Ÿå‘½å‘¨æœŸã€‚è¿”å› Observer æ–¹ä¾¿ä¸»åŠ¨ç§»é™¤è§‚å¯Ÿã€‚ */ fun observeEvent(owner: LifecycleOwner, onEvent: (T) -&gt; Unit): Observer&lt;T&gt; &#123; return EventObserver(onEvent).apply &#123; super.observe(owner, this) &#125; &#125; /** * è®¢é˜…äº‹ä»¶ã€‚æ°¸ä¹…æœ‰æ•ˆã€‚è¿”å› Observer æ–¹ä¾¿ä¸»åŠ¨ç§»é™¤è§‚å¯Ÿã€‚ */ fun observeForeverEvent(onEvent: (T) -&gt; Unit): Observer&lt;T&gt; &#123; return EventObserver(onEvent).apply &#123; super.observeForever(this) &#125; &#125; /** * ä¸æ¥æ”¶åˆ›å»ºä¹‹å‰çš„æ¶ˆæ¯ã€‚ */ inner class EventObserver&lt;T&gt;(val onEvent: (T) -&gt; Unit) : Observer&lt;T&gt; &#123; private var observerVersion = this@EventLiveData.version override fun onChanged(t: T) &#123; if (observerVersion &lt; this@EventLiveData.version) &#123; observerVersion = this@EventLiveData.version onEvent(t) &#125; &#125; &#125; &#125;&#125; ä½¿ç”¨å§¿åŠ¿ï¼š1234567891011// è·å–ï¼š(ä¸€èˆ¬ä¼šæŠŠè¿™æ­¥å°è£…èµ·æ¥ï¼‰EventHelper.with&lt;Event&gt;(Key) //or EventHelper.with(Key,Event::class.java)// è®¢é˜…ï¼šobserveEvent(owner)&#123; event -&gt; do something &#125; // ç»‘å®šç”Ÿå‘½å‘¨æœŸã€‚observeForeverEvent&#123; event -&gt; do something &#125; // æ°¸ä¹…æœ‰æ•ˆã€‚// å‘å¸ƒï¼šsetValue(event) // ä¸»çº¿ç¨‹ã€‚postValue(event) // å­çº¿ç¨‹ã€‚// ç§»é™¤ï¼šåŒliveDataã€‚ å®æˆ˜ï¼š å°è£…ï¼šåŒä¸€æ¨¡å—çš„äº‹ä»¶æ”¾åœ¨ä¸€èµ·ã€‚key ä¸ event å¯¹åº”ã€‚ key å‘½åè§„èŒƒï¼šæ¨¡å—å+å­æ¨¡å—å+å…·ä½“äº‹ä»¶ã€‚ eventç±»ä¸ŠåŠ ä¸ŠIDï¼šä¾‹å¦‚ï¼šChangeGroupNameEventåŠ ä¸ŠgroupCodeæ˜ç¡®æ˜¯é‚£ä¸ªç¾¤åç§°å˜äº†ã€‚123456789101112131415161718192021222324252627282930313233// ç¤ºä¾‹object IMEventHelper &#123; private const val CHANGE_GROUP_NAME = \"im/group/changeGroupName\" private const val CHANGE_NOTIFICATION = \"im/group/changeNotification\" private const val CHANGE_MEMBER_LIST = \"im/group/changeMemberList\" private const val CHANGE_GROUP_LIST = \"im/group/changeGroupList\" private const val QUIT_GROUP = \"im/group/quitGroup\" private const val CHOOSE_AT = \"im/group/chooseAt\" /** * ç¾¤åç§°ä¿®æ”¹ã€‚ */ fun changeGroupName() = EventHelper.with&lt;ChangeGroupNameEvent&gt;(CHANGE_GROUP_NAME) /** * å…¬å‘Šä¿®æ”¹ã€‚ */ fun changeNotification() = EventHelper.with&lt;ChangeNotificationEvent&gt;(CHANGE_NOTIFICATION) /** * æˆå‘˜åˆ—è¡¨å˜æ¢ã€‚ */ fun changeMemberList() = EventHelper.with&lt;ChangeMemberListEvent&gt;(CHANGE_MEMBER_LIST) /** * ç¾¤èŠåˆ—è¡¨å˜æ¢ã€‚ */ fun changeGroupList() = EventHelper.with&lt;ChangeGroupListEvent&gt;(CHANGE_GROUP_LIST) /** * é€€å‡ºç¾¤èŠã€‚ */ fun quitGroup() = EventHelper.with&lt;QuitGroupEvent&gt;(QUIT_GROUP) /** * é€‰æ‹©AT æˆå‘˜ã€‚ */ fun chooseAt() = EventHelper.with&lt;AtMemberEvent&gt;(CHOOSE_AT)&#125; eventç±»ï¼š1class ChangeGroupNameEvent(val groupCode: String, val newName: String) ä½¿ç”¨ï¼š12345678// åœ¨ fragment åˆå§‹åŒ–é‡Œè®¢é˜…äº‹ä»¶ã€‚IMEventHelper .changeGroupName() .observeEvent(this) &#123; vm.changeName(it) &#125;// åœ¨ å…¶å®ƒåœ°æ–¹å‘å¸ƒäº‹ä»¶ã€‚IMEventHelper .changeGroupName() .postValue(ChangeGroupNameEvent(groupCode, newName)) æ€»ç»“ï¼šè¦ç‚¹ï¼š åˆ©ç”¨LiveDataï¼Œæ„ŸçŸ¥ç”Ÿå‘½å‘¨æœŸçš„ç‰¹æ€§ã€‚ ä¸æ¥æ”¶æ³¨å†Œè§‚å¯Ÿä¹‹å‰çš„æ¶ˆæ¯ã€‚ ç¼ºç‚¹ï¼š Livedataåªèƒ½ä¿è¯æ¥æ”¶åˆ°æœ€æ–°çš„æ•°æ®ã€‚ä¸­é—´çš„æ•°æ®å¯ä¸ç®¡å“¦ã€‚ğŸ˜¯","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"kotlinä½¿ç”¨letæŠ¥java.lang.NoClassDefFoundError","date":"2019-11-13T08:27:00.000Z","path":"2019/11/13/kotlin_1/","text":"é—®é¢˜é˜è¿°kotlin è¿è¡Œè¿™æ®µä»£ç æŠ¥java.lang.NoClassDefFoundErroré”™è¯¯ï¼ˆè¡¨ç¤ºè¿è¡Œä¸­æ‰¾ä¸åˆ°ç±»çš„å®šä¹‰ï¼‰ã€‚å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617private fun shareUrlToFriend(logoUrl: String) &#123; activity?.let &#123; Glide.with(this) .asBitmap() .load(logoUrl) .into(object : CustomTarget&lt;Bitmap&gt;() &#123; override fun onLoadCleared(placeholder: Drawable?) &#123; &#125; override fun onResourceReady(resource: Bitmap, transition: Transition&lt;in Bitmap&gt;?) &#123; print(logoUrl)//å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨äº†logoUrl &#125; &#125;) &#125; &#125; ç»è¿‡æ›¿æ¢å°è¯•ï¼ŒæŠ¥é”™ä¸æ˜¯Glideçš„é”…ã€‚æ ¹æ®kotliné»˜è®¤æœ€åä¸€è¡Œæ˜¯è¿”å›å€¼çš„è§„åˆ™ï¼Œè¿™ä»£ç æœ€åletä¸‹é¢æœ€åä¸€ä¸ªè¿”å›å¯¹è±¡æ˜¯CustomTargetçš„åŒ¿åå†…éƒ¨ç±»å¯¹è±¡ã€‚å› ä¸ºï¼š12345// Glide into()æ–¹æ³•@NonNull public &lt;Y extends Target&lt;TranscodeType&gt;&gt; Y into(@NonNull Y target) &#123; return into(target, /*targetListener=*/ null, Executors.mainThreadExecutor()); &#125; æ‰€ä»¥ï¼Œå¯ä»¥æŠŠä¸Šé¢ä»£ç æ›¿æ¢æˆå¦‚ä¸‹ç®€å•ä»£ç ï¼š1234567891011121314151617181920212223class T &#123; var a: Any? = null fun f(u: String) &#123; a?.let &#123; object : Inter &#123; override fun e() &#123; print(u) &#125; &#125; &#125; &#125;&#125;fun main() &#123; val t = T() t.a = Any() t.f(\"u\")&#125;interface Inter &#123; fun e()&#125; è¿™æ®µæ‰§è¡Œf()å‡½æ•°ä»£ç ä¼šæŠ¥ä¸€æ ·çš„é”™è¯¯ã€‚123456789101112Exception in thread \"main\" java.lang.NoClassDefFoundError: com/a/wzm/shere/ui/T$f$1$1 at com.a.wzm.shere.ui.T.f(Test.kt:14) at com.a.wzm.shere.ui.TestKt.main(Test.kt:28) at com.a.wzm.shere.ui.TestKt.main(Test.kt)Caused by: java.lang.ClassNotFoundException: com.a.wzm.shere.ui.T$f$1$1 at java.net.URLClassLoader.findClass(URLClassLoader.java:382) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 3 moreProcess finished with exit code 1 T$f$1$1æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ é—®é¢˜è¿½æº¯æŸ¥çœ‹ç¿»è¯‘åçš„Javaä»£ç ï¼š1234567891011//NO.0 ä¸»è¦çœ‹f()å‡½æ•°ã€‚public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); if (this.a != null) &#123; boolean var3 = false; boolean var4 = false; int var6 = false; 1 var10000 = (1)(new T$f$$inlined$let$lambda$1(u));// 1æ˜¯å•¥ï¼Ÿ &#125; &#125; é‡Œé¢è¿™ä¸ª1å°±æ˜¯ä¸æ²¡å®šä¹‰çš„ç±»å‹ï¼ˆä¹Ÿå°±æ˜¯æŠ¥é”™é‡Œé¢éœ€è¦å®šä¹‰çš„T$f$1$1ï¼‰ã€‚ä¸ºä»€ä¹ˆæœ‰ä¸ª1å‡ºæ¥æ£ä¹±?12345678910111213141516171819202122//ç”Ÿæˆçš„ç±»ã€‚@Metadata( mv = &#123;1, 1, 15&#125;, bv = &#123;1, 0, 3&#125;, k = 1, d1 = &#123;\"\\u0000\\u0011\\n\\u0000\\n\\u0002\\u0018\\u0002\\n\\u0000\\n\\u0002\\u0010\\u0002\\n\\u0000*\\u0001\\u0000\\b\\n\\u0018\\u00002\\u00020\\u0001J\\b\\u0010\\u0002\\u001a\\u00020\\u0003H\\u0016Â¨\\u0006\\u0004Â¸\\u0006\\u0000\"&#125;, d2 = &#123;\"com/a/wzm/shere/ui/Te$f$1$1\", \"Lcom/a/wzm/share/ui/Inter;\", \"a\", \"\", \"app\"&#125;)public final class Te$f$$inlined$let$lambda$1 implements Inter &#123; // $FF: synthetic field final String $u$inlined; Te$f$$inlined$let$lambda$1(String var1) &#123; this.$u$inlined = var1; &#125; public void a() &#123; String var1 = this.$u$inlined; boolean var2 = false; System.out.print(var1); &#125;&#125; ç±»åè·Ÿæ³¨è§£é‡Œçš„ï¼ˆ&quot;com/a/wzm/share/ui/Te$f$1$1&quot;ï¼‰ä¸ä¸€è‡´ã€‚ å®éªŒå¯¹ä¸Šè¯‰ä»£ç ç®€å•ä¿®æ”¹æµ‹è¯•ã€‚å‘ç°åªéœ€è¦ç®€å•ä¿®æ”¹å°±ä¸æŠ¥é”™ã€‚æ¯”å¦‚ï¼š ä¸ç”¨ letç¬¬ä¸€è¡Œç”¨if(a==null)returnã€‚ï¼ˆè§„é¿äº†letçš„é—®é¢˜ï¼Œä¸è®¨è®ºï¼‰ã€‚ aåé¢çš„?å»æ‰ã€‚ æ–¹æ³•e()é‡Œä¸ä½¿ç”¨u object: Interå‰é¢åŠ ä¸Šval x=è¿›è¡Œèµ‹å€¼æ‰ã€‚ åœ¨letæœ€åä¸€è¡Œå†™ä¸ª1ï¼Œtrueæˆ–å…¶ä»–æ˜ç¡®ç±»å‹çš„ä¸œè¥¿ã€‚ è€Œè¿™æ ·åšï¼ŒæŠ¥ä¸€æ ·é”™è¯¯ã€‚ a?.letå‰é¢åŠ val c=è¿›è¡Œèµ‹å€¼æ“ä½œã€‚æ­¤æ—¶å°±ç®—?ï¼ˆå¦‚2æ‰€è¯‰ï¼‰ å»æ‰ä¹ŸæŠ¥é”™ã€‚ç»“åˆ3ï¼Œ4ï¼Œ5ä¸æŠ¥é”™ã€‚ æŠŠä¸Šè¯‰å®éªŒé€šè¿‡è½¬æ¢ï¼ŒæŸ¥çœ‹ç¿»è¯‘åçš„Javaä»£ç ï¼š123456789// NO.2 public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); Object var2 = this.a; boolean var3 = false; boolean var4 = false; int var6 = false; new T$f$$inlined$let$lambda$1(u); &#125; 123456789101112//NO.3public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); if (this.a != null) &#123; boolean var3 = false; boolean var4 = false; int var6 = false; new T$f$1$1(); &#125; else &#123; Object var10000 = null; &#125; &#125; 1234567891011//NO.4public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); if (this.a != null) &#123; boolean var3 = false; boolean var4 = false; int var6 = false; new T$f$$inlined$let$lambda$1(u); &#125; &#125; 123456789101112//NO.5ï¼Œæœ€åä¸€è¡ŒåŠ äº†ä¸ªtruepublic final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); if (this.a != null) &#123; boolean var3 = false; boolean var4 = false; int var6 = false; new T$f$$inlined$let$lambda$1(u); boolean var10000 = true; &#125; &#125; 123456789//NO.6 åˆå‡ºç°æœªçŸ¥ç±»å‹ï¼š1public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); Object var3 = this.a; boolean var4 = false; boolean var5 = false; int var7 = false; 1 x = (1)(new T$f$$inlined$let$lambda$1(u)); &#125; åŒºåˆ« åŒ¿åç±» æ˜¯å¦å‡ºç°ç±»å‹ï¼ˆ1ï¼‰ NO.0ï¼ˆåŸå§‹ï¼‰ T$f$$inlined$let$lambda$1 æ˜¯ NO.2 T$f$$inlined$let$lambda$1 å¦ NO.3 T$f$1$1 å¦ NO.4 T$f$$inlined$let$lambda$1 å¦ NO.5 T$f$$inlined$let$lambda$1 å¦ NO.6 T$f$$inlined$let$lambda$1 æ˜¯ é¦–å…ˆåˆ†æç¬¬4ç‚¹å’Œç¬¬5ç‚¹ã€‚ç¬¬4ç‚¹æŠŠåŒ¿åç±»å¯¹è±¡èµ‹å€¼ç»™äº†xï¼Œè¿™æ„å‘³è¿™letåªèƒ½å–ä¸‹ä¸€è¡Œåšè¿”å›å€¼ï¼ˆæ²¡æœ‰ä¸‹è¡Œï¼Œå°±æ˜¯Unitï¼‰ã€‚æ‰€ä»¥ä¹Ÿå°±æ˜¯è¯´letæœ‰æ˜ç¡®è¿”å›å€¼å°±ä¸æŠ¥é”™ã€‚æ²¡æœ‰æ˜ç¡®è¿”å›å€¼ç±»å‹ä¸”â€œä¸å…³å¿ƒâ€è¿”å›å€¼ï¼ˆå¦‚NO.2)ï¼Œä¹Ÿä¸ä¼šé”™ã€‚NO.0ä¹Ÿä¸â€œå…³å¿ƒâ€è¿”å›å€¼å•Šï¼Ÿå¯æ˜¯NO.0åˆå¯¹açš„ç©ºåˆ¤æ–­ï¼Œå¯¹letè¿”å›åˆä¸¤ç§ç»“æœï¼Œè¦ä¹ˆæœ‰è¿”å›ï¼Œè¦ä¹ˆæ²¡è¿”å›ï¼Œå°†ä¹Ÿå®ƒå½’çº³ä¸ºâ€œå…³å¿ƒâ€ç»“æœã€‚è‡³äºNO.3çš„æƒ…å†µï¼ˆå°±ç®—ç»“åˆNO.6ä¹Ÿä¸æŠ¥é”™ï¼‰ï¼Œç”Ÿæˆçš„ç±»å°±æ˜¯NO.0ä¸­æŠ¥é”™ä¸­æ²¡å®šä¹‰çš„ç±»ï¼ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œç¨åè®¨è®ºï¼‰ã€‚æ‰€ä»¥ä¹Ÿå°±æ²¡é—®é¢˜äº†ã€‚ é—®é¢˜1ä¸ºä»€ä¹ˆletâ€œå…³å¿ƒâ€è¿”å›å€¼ä¼šæœ‰åŒºåˆ«ï¼Ÿletçš„è¿”å›å€¼ç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿ åˆ†æé¦–å…ˆï¼ŒæŸ¥çœ‹letæ–¹æ³•çš„å®šä¹‰ã€‚1234567@kotlin.internal.InlineOnlypublic inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R &#123; contract &#123; callsInPlace(block, InvocationKind.EXACTLY_ONCE) &#125; return block(this)&#125; let æ˜¯æ³›å‹çš„æ‰©å±•æ–¹æ³•ï¼Œå‚æ•°æ˜¯ä¸ªé«˜é˜¶å‡½æ•°ã€‚ä½œç”¨æ˜¯å°†ä¸€ç§ç±»å‹Tï¼Œé€šè¿‡blockæ–¹æ³•å˜æ¢å˜æˆç±»å‹Rã€‚ æ‰€ä»¥letè¿”å›å€¼æ˜¯ä¸ªRã€‚é‚£Ræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å½“ç„¶æ˜¯è‡ªå·±å®šå–½ã€‚æˆ‘ä»¬ä¸€ç›´éƒ½æ˜¯ç›´æ¥ç”¨letï¼Œå®é™…ä¸Šä¸¥æ ¼ç”¨æ³•åº”è¯¥è¿™æ ·ï¼š1234val a = 1val s = a.let&lt;Int, String&gt; &#123; return@let it.toString()&#125; åªä¸è¿‡ï¼Œkotlinçš„è‡ªåŠ¨ç±»å‹è¯†åˆ«å¸®æˆ‘ä»¬åšäº†ç±»å‹åŒºåˆ†ã€‚ é—®é¢˜ä¸­çš„ç±»å‹1ä¼°è®¡å°±æ˜¯ä¸æ˜ç¡®çš„Rã€‚æ‰€ä»¥æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šç´¯è¡Œè¯•è¯•ã€‚123456789fun f(u: String) &#123; a?.let&lt;Any, Inter&gt; &#123; object : Inter &#123; override fun a() &#123; print(u) &#125; &#125; &#125; &#125; å¯¹åº”çš„Javaä»£ç ã€‚ 123456789public final void f(@NotNull String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); if (this.a != null) &#123; boolean var3 = false; boolean var4 = false; int var6 = false; Inter var10000 = (Inter)(new T$f$$inlined$let$lambda$1(u)); &#125; &#125; åŸæœ¬æ˜¯1çš„åœ°æ–¹å˜æˆäº†æˆ‘ä»¬æŒ‡å®šçš„ç±»å‹Interã€‚ä»£ç è·‘èµ·æ¥ä¹Ÿä¸åœ¨è·Œè·Ÿæ–—ã€‚ é‚£ä¸ºä»€ä¹ˆâ€œä¸å…³å¿ƒâ€ç»“æœçš„æ—¶å€™ç¿»è¯‘è¿‡æ¥å°±ä¸éœ€è¦è½¬ R çš„ç±»å‹å‘¢ï¼Ÿï¼ˆç›®å‰æ‰¾åˆ°çš„è§£é‡Šæ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æ‰æ˜ç¡®ä¸éœ€è¦çš„è¿‡ç¨‹ï¼‰ é—®é¢˜2çœ‹è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å‘ç°äº†ï¼Œleté‡Œçš„ä»£ç ç›´æ¥è¢«æ‹·åˆ°f()å‡½æ•°é‡Œé¢ï¼Œè€Œä¸æ˜¯ç”Ÿæˆé«˜é˜¶å‡½æ•°block: (T) -&gt; Rè¡¨ç¤ºçš„æ¥å£çš„å®ç°ç±»ã€‚è€Œä¸”Interæœ¬è¯¥å†…éƒ¨ç±»çš„å®ç°ï¼Œä¹Ÿå˜æˆäº†å®šä¹‰äº†å¤–éƒ¨ç‹¬ç«‹çš„ç±»ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ è§£é‡Šè¿™æ˜¯å› ä¸ºinlineå…³é”®å­—çš„ä½œç”¨ï¼šinline çš„å·¥ä½œåŸç†å°±æ˜¯å°†å†…è”å‡½æ•°çš„å‡½æ•°ä½“å¤åˆ¶åˆ°è°ƒç”¨å¤„å®ç°å†…è”ã€‚è¯¦æƒ…è§å‚è€ƒèµ„æ–™ã€‚ å®éªŒå†™ä¸€ä¸ªæ²¡æœ‰inlineçš„ä»¿letæ–¹æ³•ï¼Œå†æ›¿æ¢åŸletã€‚123fun &lt;T, R&gt; T.mylet(block: (T) -&gt; R): R &#123; return block(this)&#125; 12345678910//No.7fun f(u: String) &#123; a?.mylet &#123; object : Inter &#123; override fun a() &#123; print(u) &#125; &#125; &#125; &#125; è¿è¡Œä¸æŠ¥é”™ï¼Œçœ‹æ³•Javaä»£ç ã€‚123456789101112131415161718192021222324252627//NO.7public final void f(@NotNull final String u) &#123; Intrinsics.checkParameterIsNotNull(u, \"u\"); Object var10000 = this.a; if (var10000 != null) &#123; &lt;undefinedtype&gt; var2 = (&lt;undefinedtype&gt;)TestKt.mylet(var10000, (Function1)(new Function1() &#123; // $FF: synthetic method // $FF: bridge method public Object invoke(Object var1) &#123; return this.invoke(var1); &#125; @NotNull public final &lt;undefinedtype&gt; invoke(@NotNull Object it) &#123; Intrinsics.checkParameterIsNotNull(it, \"it\"); return new Inter() &#123; public void a() &#123; String var1 = u; boolean var2 = false; System.out.print(var1); &#125; &#125;; &#125; &#125;)); &#125; &#125; å†…éƒ¨ç”¨Function1 ä»£è¡¨block: (T) -&gt; Rè¡¨ç¤ºçš„æ¥å£çš„å®ç°ç±»ã€‚Interä¾æ—§æ˜¯å†…éƒ¨ç±»çš„æ–¹å¼å®ç°ã€‚ å¯è§ï¼Œinlineå…³é”®å­—åœ¨å¤„ç†æ–¹æ³•ä½“ä¸­çš„å†…éƒ¨ç±»ï¼Œåšäº†æ˜æ˜¾çš„ä¼˜åŒ–å¤„ç†ï¼ˆå³ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å¤–éƒ¨ç±»ï¼‰ã€‚ é—®é¢˜3ç»“åˆé—®é¢˜1ä¸­çš„NO.3å’Œé—®é¢˜2ä»¥åŠå®éªŒï¼Œå‘ç°Interä¸­ç”¨åˆ°letå¤–éƒ¨ä¿¡æ¯æ—¶ï¼Œç”Ÿæˆçš„ç±»æ˜¯T$f$$inlined$let$lambda$1ï¼ˆä½†åé¢è¿˜ä¼šå¼ºè½¬ä¸ºT$f$1$1ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ª1ï¼Œç„¶åæŠ¥æ‰¾ä¸åˆ°ç±»çš„å®šä¹‰çš„é”™è¯¯ï¼‰ï¼Œè€Œä¸ä½¿ç”¨å¤–éƒ¨çš„ä¿¡æ¯æ—¶ï¼Œç”Ÿæˆçš„ç±»æ˜¯T$f$1$1ã€‚åŒºåˆ†åº¦æ˜¯ä»€ä¹ˆï¼Ÿ çŒœæƒ³é€šè¿‡inlineå†…è”å‡½æ•°ä¼ å…¥çš„lambdaè¡¨è¾¾å¼ç”Ÿæˆçš„åŒ¿åç±»ï¼Œå¦‚æœæœ‰æŒ‡å‘å¤–éƒ¨çš„å˜é‡ï¼Œé‚£ä¹ˆå‘½åä¸ºï¼šclass + method + inlined + method + lambda + numberã€‚å¦‚æœæ²¡æœ‰ï¼Œå‘½åä¸ºï¼š class + method + number + numberï¼ˆç¬¬ä¸€ä¸ªnumberè¡¨ç¤ºletåŒå±‚çº§ç¼–å·ï¼Œç¬¬äºŒä¸ªnumberè¡¨ç¤ºå†…éƒ¨ç±»çš„ç¼–å·ã€‚è€Œç„¶è¿è¡Œä¸­å¤–éƒ¨ç±»åœ¨æ‰§è¡Œcheckcastçš„æ—¶å€™ï¼Œè¿˜æ˜¯æŒ‰ç…§æ—§çš„è§„åˆ™å»ç»„è£…å‘½åã€‚ï¼ˆä»…ä¸ºçŒœæƒ³ï¼Œæœªå¾—åŸå› ï¼‰ ##ç»“è®ºå…¶å®è¿˜æ²¡æœ‰å…·ä½“ç»“è®ºï¼é‡åˆ°æ­¤ç±»é—®é¢˜ï¼Œå¤§èƒ†çŒœæƒ³ï¼ŒåŠ¨æ‰‹å®è·µï¼Œæ€»ç»“è§„å¾‹ã€‚","tags":[{"name":"kotlin","slug":"kotlin","permalink":"https://wzmyyj.top/tags/kotlin/"}]},{"title":"ä»¿çŸ¥éŸ³æ¼«å®¢æ¼«ç”»APP--MVPæ¨¡å¼","date":"2018-08-22T05:11:12.000Z","path":"2018/08/22/android_2/","text":"ZYMKï¼ˆæ¼«ç”»appï¼‰ä¸€æ¬¾é‡‡ç”¨MVPçš„ä»¿ã€ŠçŸ¥éŸ³æ¼«å®¢ã€‹æ¼«ç”»APPã€‚ mvp + rxjava + retrofit + okhttp + greendao + glide + gson + jsoup + eventbus + butterknife é¡¹ç›®åœ°å€ï¼šhttps://github.com/wzmyyj/ZYMK æœ€æ–°æ›´æ–°ï¼ˆ2018.06.19ï¼‰ ç”±å¸¸è§„MVPæ”¹ä¸ºGoogleæ¨èçš„MVP-Contractæ¨¡å¼ã€‚å°†åŸæœ¬çš„presenterå±‚æ¯ä¸ªç±»æŠ½è±¡å‡ºæ¥å£ï¼Œå¹¶å°†è¿™äº›æ¥å£å’Œå¯¹åº”çš„viewçš„æ¥å£ï¼Œæ”¾åœ¨åŒä¸€ä¸ªcontractæ¥å£é‡Œï¼ˆæ¥å£é‡Œæ”¾ä¸¤ä¸ªæ¥å£ï¼‰ã€‚ æŠ½è±¡å‡ºpå±‚æ¥å£ä½¿vå±‚ä¾èµ–äºpå±‚æ¥å£ï¼ˆçˆ¶ç±»ï¼‰ã€‚ä¾èµ–å€’è½¬åŸåˆ™ã€‚ ä½¿ç”¨contractå¥½å¤„æ˜¯på±‚ä¸vå±‚ç›¸äº’è°ƒç”¨å…³ç³»åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œä¸€ç›®äº†ç„¶ã€‚ä¸‹æ¬¡ä¼šè¯¦ç»†ä»‹ç»è¿™ç§æ¨¡å¼ã€‚ ä¿®æ”¹äº†ä¸€äº›å‘½åè§„èŒƒï¼Œç±»åï¼Œæ–¹æ³•åç­‰ã€‚ ä¿®æ”¹äº†ä¸€äº›ç±»å®ç°çš„æ–¹æ³•ï¼Œä¿®å¤ä¸€ä¸ªå°bugã€‚ Apkä¸‹è½½ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1Gp5vcoUx7NEr8n17nM8wwg å¯†ç ï¼šb6zq é¡¹ç›®åœ°å€ï¼šhttps://github.com/wzmyyj/ZYMK æ•ˆæœå›¾ï¼š å…è´£å£°æ˜ï¼šæœ¬ç¨‹åºæ‰€æœ‰èµ„æºå…¨éƒ¨æ¥æºäºç½‘ç»œçˆ¬è™«,ä¸”è§„é¿äº†ä»˜è´¹çš„æ¼«ç”»ï¼Œæ‰€æœ‰çš„æ¼«ç”»åœ¨ç½‘ç»œå¯ä»¥å…è´¹é˜…è¯»çš„ã€‚æœ¬ç¨‹åºä»…ä¾›å­¦ä¹ å‚è€ƒä½¿ç”¨ï¼Œä¸¥ç¦ä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å„ä½è¿›è¡ŒæŠ€æœ¯è®¨è®ºå’Œäº¤æµã€‚å¦‚æœä¾µçŠ¯åˆ°ä»»ä½•äººçš„åˆ©ç›Šï¼Œå¯ä»¥è”ç³»ä½œè€…QQï¼š2018987032ã€‚è¿›è¡Œåå•†ï¼Œè¿›è¡Œæ¼«ç”»çš„ä¸‹æ¶ã€‚ åšå®¢ï¼šåŒæ­¥äºç®€ä¹¦ï¼šhttps://www.jianshu.com/p/80c8541387de","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"ã€ç®—æ³•ã€‘è‘±çš„æˆ˜äº‰ä¸€é“ç®—æ³•é¢˜","date":"2018-07-08T08:21:29.000Z","path":"2018/07/08/java_3/","text":"å‰æ®µæ—¶é—´ï¼ŒåŒå­¦ç»™çœ‹äº†ä¸€é“ï¼ŒæŸä¸ªå†å¹´çš„è€ƒç ”æœºè¯•ç®—æ³•é¢˜ã€‚æˆ‘æƒ³ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•å»å®ç°ã€‚ é¢˜ç›® ä¸€ä¸ªm*nçš„æ£‹ç›˜ï¼Œä¸Šé¢æœ‰kæ ¹è‘±ï¼Œæ¯æ ¹è‘±é¢æœæ–¹å‘ä¸ºdï¼ˆ0123åˆ†åˆ«è¡¨ç¤ºä¸Šä¸‹å·¦å³ï¼‰ï¼Œæ¯æ ¹è‘±ä¸€ä¸ªæˆ˜æ–—åŠ›fã€‚æ¯éš”æ—¶é—´è‘±ä¼šå‘é¢æœæ–¹å‘èµ°ä¸€æ ¼ï¼Œ å¦‚æœé‡åˆ°æ£‹ç›˜è¾¹ç•Œï¼Œé‚£ä¹ˆä»–å°†æŠŠé¢æœæ–¹å‘è½¬180åº¦ï¼ˆæ­¤å›åˆè‘±ä¸ä¼šèµ°åŠ¨ï¼‰ï¼Œå¦‚æœæŸä¸ªæ—¶åˆ»æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„è‘±åœ¨åŒä¸€ä½ç½®ï¼Œé‚£ä¹ˆä»–ä»¬å°†å‘ç”Ÿ æˆ˜äº‰ï¼Œåªæœ‰æˆ˜æ–—åŠ›æœ€é«˜çš„è‘±å­˜æ´»ï¼Œå…¶ä»–çš„è‘±å…¨éƒ¨åŸåœ°æ¯èï¼Œä¸åœ¨èµ°åŠ¨ï¼Œæ±‚ç»è¿‡tæ—¶é—´åæ‰€æœ‰è‘±çš„ä½ç½®ã€‚ è¾“å…¥ï¼šç¬¬ä¸€è¡Œm n kï¼Œç„¶åæ¥ä¸‹æ¥kè¡Œæ¯æ ¹è‘±çš„ä¿¡æ¯x y d fï¼ˆåæ ‡ï¼Œæ–¹å‘ï¼Œæˆ˜æ–—åŠ›ï¼‰ï¼Œæœ€åä¸€è¡Œè¾“å…¥æ—¶é—´tã€‚ è¾“å‡ºï¼škè¡Œï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªè‘±çš„ä½ç½®ã€‚ æ•°æ®èŒƒå›´ï¼šmå’Œnåœ¨100å†…ï¼Œkåœ¨1000å†…ï¼Œtåœ¨1000å†…ï¼Œfåœ¨1000å†…ï¼Œä¿è¯åˆå§‹æ¯é¢—è‘±ä½ç½®ä¸åŒï¼Œæˆ˜æ–—åŠ›ä¸åŒã€‚ é¢å‘å¯¹è±¡ å»ºä¸€ä¸ªCongï¼ˆè‘±ï¼‰ç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273public class Cong &#123;// è‘± private int x; private int y; private int d; private int f; private boolean isLive = true; public Cong(int x, int y, int d, int f) &#123; super(); this.x = x; this.y = y; this.d = d; this.f = f; this.isLive = true;// é»˜è®¤å­˜æ´» &#125; // æ­¤å¤„çœç•¥ set å’Œget æ–¹æ³• public void go() &#123;// èµ° if (!isLive) return; switch (d) &#123; case 0: y++; break; case 1: y--; break; case 2: x--; break; case 3: x++; break; &#125; &#125; public void turn() &#123;// è½¬å‘ if (!this.isLive) return; switch (d) &#123; case 0: d = 1; break; case 1: d = 0; break; case 2: d = 3; break; case 3: d = 2; break; &#125; &#125; public void fight(Cong c) &#123;// æ‰“æ¶ if (!this.isLive || !c.isLive())// æ­»äº†æ²¡ï¼Ÿ return; if (this.x == c.getX() &amp;&amp; this.y == c.getY()) &#123;// é‡è§æ²¡ï¼Ÿ if (this.f &gt; c.getF()) &#123; c.setLive(false); &#125; else if (this.f &lt; c.getF()) &#123; this.setLive(false); &#125; else &#123; this.setLive(false); c.setLive(false); &#125; &#125; &#125;&#125; Panï¼ˆæ£‹ç›˜ï¼‰ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class Pan &#123;// æ£‹ç›˜ private int m; private int n; private List&lt;Cong&gt; g; public Pan(int m, int n, List&lt;Cong&gt; g) &#123; super(); this.m = m; this.n = n; this.g = g; &#125; public void run() &#123; for (Cong c : g) &#123; if (!c.isLive())// æ­»äº¡ continue; war(c);// æˆ˜äº‰ if (isTurn(c)) &#123;// è¡ŒåŠ¨ c.turn(); &#125; else &#123; c.go(); &#125; &#125; &#125; public boolean isTurn(Cong c) &#123;// æ˜¯å¦è½¬å‘ if (c.getX() == 0 &amp;&amp; c.getD() == 2) return true; if (c.getX() == m - 1 &amp;&amp; c.getD() == 4) return true; if (c.getY() == 0 &amp;&amp; c.getD() == 1) return true; if (c.getX() == n - 1 &amp;&amp; c.getD() == 0) return true; return false; &#125; public void war(Cong c) &#123; for (Cong c1 : g) &#123; if (c != c1)// ä¸è·Ÿè‡ªå·±æ‰“ c.fight(c1); &#125; &#125;&#125; å®¢æˆ·ç«¯ä»£ç  12345678910111213141516171819202122232425262728293031323334public class Client &#123;// å®¢æˆ·ç«¯ public static void main(String[] args) &#123; // è¾“å…¥ Scanner can = new Scanner(System.in); int m = can.nextInt(); int n = can.nextInt(); int k = can.nextInt(); List&lt;Cong&gt; g = new ArrayList&lt;Cong&gt;(); for (int i = 0; i &lt; k; i++) &#123; int x = can.nextInt(); int y = can.nextInt(); int d = can.nextInt(); int f = can.nextInt(); Cong c = new Cong(x, y, d, f); g.add(c); &#125; int t = can.nextInt(); can.close(); // é€»è¾‘æ“ä½œ Pan p = new Pan(m, n, g); for (int i = 0; i &lt; t; i++) &#123;// æ‰§è¡Œtæ¬¡ p.run(); &#125; // è¾“å‡º for (int i = 0; i &lt; k; i++) &#123; Cong c = g.get(i); System.out.print(c.getX() + \" \" + c.getY() + \"\\n\"); &#125; &#125;&#125; é™„é¡µæºç åœ°å€ï¼šhttps://github.com/wzmyyj/CongWar","tags":[{"name":"java","slug":"java","permalink":"https://wzmyyj.top/tags/java/"}]},{"title":"å°æ•…äº‹ï¼šèš‚èšçš„æŠ‰æ‹©","date":"2018-07-01T09:20:00.000Z","path":"2018/07/01/story_1/","text":"æ•…äº‹ä¸€å¤©ï¼Œä¸€åªå°èš‚èšï¼Œæ¥åˆ°ä¸€ä¸ªä¸‰å‰è·¯å£ã€‚ å·¦è¾¹çš„è·¯è¿‡å»ï¼Œä¼šæœ‰ä¸€å—é¦™ç”œçš„å¥¶é…ªã€‚ä½†æ˜¯ï¼Œè·¯çš„å¦ä¸€ç«¯ï¼Œæœ‰ä¸€åªæ›´å¤§çš„èš‚èšæ­£åœ¨æ…¢æ…¢é è¿‘ï¼Œè™½ç„¶å®ƒçš„è·ç¦»æ›´è¿œäº›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿‡å»åƒå¥¶é…ªï¼Œåªèƒ½åƒä¸Šå‡ å£ï¼Œç„¶åéœ€è¦ä¸å¤§èš‚èšæ‰“ä¸€æ¶ï¼Œå†³å®šæ˜¯å¦å¾—åˆ°å‰©ä½™çš„å¤§åŠå¥¶é…ªã€‚ å³è¾¹çš„è·¯è¿‡å»ï¼Œåœ¨æ›´è¿œçš„ä¸€å¤„ï¼Œä¹Ÿæœ‰ä¸€å—ç±»ä¼¼çš„å¥¶é…ªã€‚ä½†æ˜¯ï¼Œæ²¡æ³•ç¡®å®šé‚£è¾¹æ˜¯å¦æœ‰å…¶ä»–èš‚èšã€‚å¦‚æœæœ‰ï¼Œä¹Ÿä¸ç¡®å®šæ˜¯å¦æ¯”è‡ªå·±å¤§ï¼Œæ˜¯å¦æ‰“å¾—è¿‡å®ƒã€‚ é‚£æ—¶ï¼Œâ€¦ å°èš‚èšæ²¡æœ‰è¿‡å»ï¼Œè€Œæ˜¯å›å¤´å»äº†åˆ«çš„åœ°æ–¹ã€‚åˆ°äº†åˆ«çš„åœ°æ–¹ï¼Œå°èš‚èšå‘ç°äº†ä¸€å—èƒ½åƒäº†å¯ä»¥æ…¢æ…¢å˜å›æ¥çš„å¥¶é…ªã€‚å°èš‚èšé«˜å…´çš„å“å°ç€è¿™ä»½ç”œèœœï¼Œåƒå¾—å·®ä¸å¤šäº†ï¼Œå…ˆæŠŠå‰©ä¸‹çš„ç•™ç€ï¼Œå®ƒä¼šè‡ªå·±æ…¢æ…¢å˜å›æ¥ã€‚æ­¤åï¼Œå°èš‚èšå¾€å¾€åªè¿‡ä¸€æ®µæ—¶é—´åƒå‡ å£ã€‚ æœ€åï¼Œâ€¦ æœ‰é‚£ä¹ˆä¸€å¤©ï¼Œå¥¶é…ªè¢«å‘½è¿å¤ºèµ°äº†ã€‚","tags":[{"name":"æ•…äº‹","slug":"æ•…äº‹","permalink":"https://wzmyyj.top/tags/æ•…äº‹/"}]},{"title":"å…³äºHTTPåè®®ä½ éœ€è¦çŸ¥é“è¿™äº›","date":"2018-06-09T03:45:50.000Z","path":"2018/06/09/it_5/","text":"HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆè‹±æ–‡ï¼šHyperText Transfer Protocolï¼Œç¼©å†™ï¼šHTTPï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ†å¸ƒå¼ã€åä½œå¼å’Œè¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿçš„åº”ç”¨å±‚åè®®[1]ã€‚HTTPæ˜¯ä¸‡ç»´ç½‘çš„æ•°æ®é€šä¿¡çš„åŸºç¡€ã€‚ HTTPæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»ˆç«¯ï¼ˆç”¨æˆ·ï¼‰å’ŒæœåŠ¡å™¨ç«¯ï¼ˆç½‘ç«™ï¼‰è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ã€‚é€šè¿‡ä½¿ç”¨ç½‘é¡µæµè§ˆå™¨ã€ç½‘ç»œçˆ¬è™«æˆ–è€…å…¶å®ƒçš„å·¥å…·ï¼Œå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªHTTPè¯·æ±‚åˆ°æœåŠ¡å™¨ä¸ŠæŒ‡å®šç«¯å£ï¼ˆé»˜è®¤ç«¯å£ä¸º80ï¼‰ã€‚ è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚é€šè¿‡HTTPæˆ–è€…HTTPSåè®®è¯·æ±‚çš„èµ„æºç”±ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆUniform Resource Identifiersï¼ŒURIï¼‰æ¥æ ‡è¯†ã€‚ ä¸»è¦ç‰¹å¾ æ”¯æŒB/SåŠC/Sæ¨¡å¼ã€‚ ç®€å•å¿«é€Ÿï¼š2.1 å®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚2.2 è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰GETã€HEADã€POSTç­‰ï¼Œåˆ†åˆ«è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨ä¸åŒçš„è”ç³»ç±»å‹ã€‚2.3 HTTPåè®®ç®€å•ï¼Œä½¿å¾—HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œé€šä¿¡é€Ÿåº¦å¿«ã€‚ çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚ æ— è¿æ¥ï¼šæ— è¿æ¥çš„å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚ æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚ è¯·æ±‚æ–¹æ³•ä¸€å…±æœ‰å…«ç§è¯·æ±‚æ–¹å¼ï¼š GETå‘æŒ‡å®šçš„èµ„æºå‘å‡ºâ€œæ˜¾ç¤ºâ€è¯·æ±‚ã€‚ä½¿ç”¨GETæ–¹æ³•åº”è¯¥åªç”¨åœ¨è¯»å–æ•°æ®ï¼Œè€Œä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­ï¼Œä¾‹å¦‚åœ¨Web Applicationä¸­ã€‚å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯GETå¯èƒ½ä¼šè¢«ç½‘ç»œèœ˜è››ç­‰éšæ„è®¿é—®ã€‚ HEADä¸GETæ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯å‘æœåŠ¡å™¨å‘å‡ºæŒ‡å®šèµ„æºçš„è¯·æ±‚ã€‚åªä¸è¿‡æœåŠ¡å™¨å°†ä¸ä¼ å›èµ„æºçš„æœ¬æ–‡éƒ¨åˆ†ã€‚å®ƒçš„å¥½å¤„åœ¨äºï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“å…¨éƒ¨å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–å…¶ä¸­â€œå…³äºè¯¥èµ„æºçš„ä¿¡æ¯â€ï¼ˆå…ƒä¿¡æ¯æˆ–ç§°å…ƒæ•°æ®ï¼‰ã€‚ POSTå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚æœ¬æ–‡ä¸­ã€‚è¿™ä¸ªè¯·æ±‚å¯èƒ½ä¼šåˆ›å»ºæ–°çš„èµ„æºæˆ–ä¿®æ”¹ç°æœ‰èµ„æºï¼Œæˆ–äºŒè€…çš†æœ‰ã€‚ PUTå‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚ DELETEè¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æºã€‚ TRACEå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚ OPTIONSè¿™ä¸ªæ–¹æ³•å¯ä½¿æœåŠ¡å™¨ä¼ å›è¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰HTTPè¯·æ±‚æ–¹æ³•ã€‚ç”¨â€™*â€™æ¥ä»£æ›¿èµ„æºåç§°ï¼Œå‘WebæœåŠ¡å™¨å‘é€OPTIONSè¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸è¿ä½œã€‚ CONNECTHTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºSSLåŠ å¯†æœåŠ¡å™¨çš„é“¾æ¥ï¼ˆç»ç”±éåŠ å¯†çš„HTTPä»£ç†æœåŠ¡å™¨ï¼‰ã€‚ å“åº”HTTPå“åº”ä¹Ÿæ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šçŠ¶æ€è¡Œã€æ¶ˆæ¯æŠ¥å¤´ã€å“åº”æ­£æ–‡ çŠ¶æ€è¡ŒHTTP-Version Status-Code Reason-Phrase CRLF1.1 HTTP-Versionè¡¨ç¤ºæœåŠ¡å™¨HTTPåè®®çš„ç‰ˆæœ¬ï¼›1.2 Status-Codeè¡¨ç¤ºæœåŠ¡å™¨å‘å›çš„å“åº”çŠ¶æ€ä»£ç ï¼›1.3 Reason-Phraseè¡¨ç¤ºçŠ¶æ€ä»£ç çš„æ–‡æœ¬æè¿°ã€‚ çŠ¶æ€ä»£ç æœ‰ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œä¸”æœ‰äº”ç§å¯èƒ½å–å€¼ï¼š1xxï¼šæŒ‡ç¤ºä¿¡æ¯â€“è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†2xxï¼šæˆåŠŸâ€“è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—3xxï¼šé‡å®šå‘â€“è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œ4xxï¼šå®¢æˆ·ç«¯é”™è¯¯â€“è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯â€“æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ å¸¸è§çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°ã€è¯´æ˜ï¼š200 OK //å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ400 Bad Request //å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£401 Unauthorized //è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨403 Forbidden //æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡404 Not Found //è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œegï¼šè¾“å…¥äº†é”™è¯¯çš„URL500 Internal Server Error //æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯503 Server Unavailable //æœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸å…¶ä»–ä»£ç è¯·å‚è€ƒè¿™ç¯‡ 1ä¾‹å¦‚ï¼šHTTP/1.1 200 OK ï¼ˆCRLFï¼‰ æ¶ˆæ¯æŠ¥å¤´å†…å®¹è¾ƒé•¿ï¼Œè¯·å‚è€ƒHTTPåè®®è¯¦è§£ï¼ˆçœŸçš„å¾ˆç»å…¸ï¼‰ å“åº”æ­£æ–‡å°±æ˜¯æœåŠ¡å™¨è¿”å›çš„èµ„æºçš„å†…å®¹ã€‚ åè®®ä¾‹å­ä¸‹é¢æ˜¯ä¸€ä¸ªHTTPå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¼šè¯çš„ä¾‹å­ï¼Œè¿è¡Œäºwww.google.comï¼Œç«¯å£80ã€‚ è¯·æ±‚ä¿¡æ¯å‘å‡ºçš„è¯·æ±‚ä¿¡æ¯ï¼ˆmessage requestï¼‰åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª: è¯·æ±‚è¡Œï¼ˆä¾‹å¦‚GET /images/logo.gif HTTP/1.1ï¼Œè¡¨ç¤ºä»/imagesç›®å½•ä¸‹è¯·æ±‚logo.gifè¿™ä¸ªæ–‡ä»¶ï¼‰ã€‚ è¯·æ±‚å¤´ï¼ˆä¾‹å¦‚Accept-Language: enï¼‰ã€‚ ç©ºè¡Œã€‚ å…¶ä»–æ¶ˆæ¯ä½“ã€‚ è¯·æ±‚è¡Œå’Œæ ‡é¢˜å¿…é¡»ä»¥ä½œä¸ºç»“å°¾ã€‚ç©ºè¡Œå†…å¿…é¡»åªæœ‰è€Œæ— å…¶ä»–ç©ºæ ¼ã€‚åœ¨HTTP/1.1åè®®ä¸­ï¼Œæ‰€æœ‰çš„è¯·æ±‚å¤´ï¼Œé™¤Hostå¤–ï¼Œéƒ½æ˜¯å¯é€‰çš„ã€‚ å®¢æˆ·ç«¯è¯·æ±‚12GET / HTTP/1.1Host: www.google.com ï¼ˆæœ«å°¾æœ‰ä¸€ä¸ªç©ºè¡Œã€‚ç¬¬ä¸€è¡ŒæŒ‡å®šæ–¹æ³•ã€èµ„æºè·¯å¾„ã€åè®®ç‰ˆæœ¬ï¼›ç¬¬äºŒè¡Œæ˜¯åœ¨1.1ç‰ˆé‡Œå¿…å¸¦çš„ä¸€ä¸ªheaderä½œç”¨æŒ‡å®šä¸»æœºï¼‰ æœåŠ¡å™¨åº”ç­”123456789HTTP/1.1 200 OKContent-Length: 3059Server: GWS/2.0Date: Sat, 11 Jan 2003 02:44:04 GMTContent-Type: text/htmlCache-control: privateSet-Cookie: PREF=ID=73d4aef52e57bae9:TM=1042253044:LM=1042253044:S=SMCc_HRPCQiqyX9j; expires=Sun, 17-Jan-2038 19:14:07 GMT; path=/; domain=.google.comConnection: keep-alive ï¼ˆç´§è·Ÿç€ä¸€ä¸ªç©ºè¡Œï¼Œå¹¶ä¸”ç”±HTMLæ ¼å¼çš„æ–‡æœ¬ç»„æˆäº†Googleçš„ä¸»é¡µï¼‰ ç‰ˆæœ¬è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰å·²ç»æ¼”åŒ–å‡ºäº†å¾ˆå¤šç‰ˆæœ¬ï¼Œå®ƒä»¬ä¸­çš„å¤§éƒ¨åˆ†éƒ½æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚åœ¨ RFC 2145 ä¸­æè¿°äº†HTTPç‰ˆæœ¬å·çš„ç”¨æ³•ã€‚å®¢æˆ·ç«¯åœ¨è¯·æ±‚çš„å¼€å§‹å‘Šè¯‰æœåŠ¡å™¨å®ƒé‡‡ç”¨çš„åè®®ç‰ˆæœ¬å·ï¼Œè€Œåè€…åˆ™åœ¨å“åº”ä¸­é‡‡ç”¨ç›¸åŒæˆ–è€…æ›´æ—©çš„åè®®ç‰ˆæœ¬ã€‚ HTTP/0.9å·²è¿‡æ—¶ã€‚åªæ¥å—GETä¸€ç§è¯·æ±‚æ–¹æ³•ï¼Œæ²¡æœ‰åœ¨é€šè®¯ä¸­æŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸”ä¸æ”¯æŒè¯·æ±‚å¤´ã€‚ç”±äºè¯¥ç‰ˆæœ¬ä¸æ”¯æŒPOSTæ–¹æ³•ï¼Œå› æ­¤å®¢æˆ·ç«¯æ— æ³•å‘æœåŠ¡å™¨ä¼ é€’å¤ªå¤šä¿¡æ¯ã€‚ HTTP/1.0è¿™æ˜¯ç¬¬ä¸€ä¸ªåœ¨é€šè®¯ä¸­æŒ‡å®šç‰ˆæœ¬å·çš„HTTPåè®®ç‰ˆæœ¬ï¼Œè‡³ä»Šä»è¢«å¹¿æ³›é‡‡ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ã€‚ HTTP/1.1æŒä¹…è¿æ¥è¢«é»˜è®¤é‡‡ç”¨ï¼Œå¹¶èƒ½å¾ˆå¥½åœ°é…åˆä»£ç†æœåŠ¡å™¨å·¥ä½œã€‚è¿˜æ”¯æŒä»¥ç®¡é“æ–¹å¼åœ¨åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä»¥ä¾¿é™ä½çº¿è·¯è´Ÿè½½ï¼Œæé«˜ä¼ è¾“é€Ÿåº¦ã€‚HTTP/1.1ç›¸è¾ƒäºHTTP/1.0åè®®çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨ï¼š ç¼“å­˜å¤„ç† å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨ é”™è¯¯é€šçŸ¥çš„ç®¡ç† æ¶ˆæ¯åœ¨ç½‘ç»œä¸­çš„å‘é€ äº’è”ç½‘åœ°å€çš„ç»´æŠ¤ å®‰å…¨æ€§åŠå®Œæ•´æ€§ åœ¨HTTP 0.9å’Œ1.0ä¸­ï¼ŒTCPè¿æ¥åœ¨æ¯ä¸€æ¬¡è¯·æ±‚/å›åº”å¯¹ä¹‹åå…³é—­ã€‚åœ¨HTTP 1.1ä¸­ï¼Œå¼•å…¥äº†ä¿æŒè¿æ¥çš„æœºåˆ¶ï¼Œä¸€ä¸ªè¿æ¥å¯ä»¥é‡å¤åœ¨å¤šä¸ªè¯·æ±‚/å›åº”ä½¿ç”¨ã€‚æŒç»­è¿æ¥çš„æ–¹å¼å¯ä»¥å¤§å¤§å‡å°‘ç­‰å¾…æ—¶é—´ï¼Œå› ä¸ºåœ¨å‘å‡ºç¬¬ä¸€ä¸ªè¯·æ±‚åï¼ŒåŒæ–¹ä¸éœ€è¦é‡æ–°è¿è¡ŒTCPäº¤æ¡ç¨‹åºã€‚ HTTP/2å½“å‰ç‰ˆæœ¬ï¼Œäº2015å¹´5æœˆä½œä¸ºäº’è”ç½‘æ ‡å‡†æ­£å¼å‘å¸ƒã€‚ TCP/IPå°½ç®¡TCP/IPåè®®æ˜¯äº’è”ç½‘ä¸Šæœ€æµè¡Œçš„åº”ç”¨ï¼ŒHTTPåè®®ä¸­ï¼Œå¹¶æ²¡æœ‰è§„å®šå¿…é¡»ä½¿ç”¨å®ƒæˆ–å®ƒæ”¯æŒçš„å±‚ã€‚äº‹å®ä¸Šï¼ŒHTTPå¯ä»¥åœ¨ä»»ä½•äº’è”ç½‘åè®®ä¸Šï¼Œæˆ–å…¶ä»–ç½‘ç»œä¸Šå®ç°ã€‚HTTPå‡å®šå…¶ä¸‹å±‚åè®®æä¾›å¯é çš„ä¼ è¾“ã€‚å› æ­¤ï¼Œä»»ä½•èƒ½å¤Ÿæä¾›è¿™ç§ä¿è¯çš„åè®®éƒ½å¯ä»¥è¢«å…¶ä½¿ç”¨ã€‚å› æ­¤ä¹Ÿå°±æ˜¯å…¶åœ¨TCP/IPåè®®æ—ä½¿ç”¨TCPä½œä¸ºå…¶ä¼ è¾“å±‚ã€‚","tags":[{"name":"IT","slug":"IT","permalink":"https://wzmyyj.top/tags/IT/"}]},{"title":"Javaè·å–ä¸­æ–‡é¦–å­—æ¯","date":"2018-06-08T08:21:29.000Z","path":"2018/06/08/java_2/","text":"ä¸­æ–‡é¦–å­—æ¯æœ‰æ—¶å€™ï¼Œæ¯”å¦‚å¾®ä¿¡ä¸Šæ ¹æ®åå­—æ‹¼éŸ³é¦–å­—æ¯æ’åºå¹¶æ£€ç´¢ã€‚é‚£ä¹ˆç”¨Javaè·å–ä¸­æ–‡é¦–å­—æ¯æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ ä»£ç ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼šï¼ˆå†™ä¸ªå·¥å…·ç±»ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100public class FirstCharUtil &#123; // ç®€ä½“ä¸­æ–‡çš„ç¼–ç èŒƒå›´ä»B0A1ï¼ˆ45217ï¼‰ä¸€ç›´åˆ°F7FEï¼ˆ63486ï¼‰ private static int BEGIN = 45217; private static int END = 63486; // æŒ‰ç…§å£° æ¯è¡¨ç¤ºï¼Œè¿™ä¸ªè¡¨æ˜¯åœ¨GB2312ä¸­çš„å‡ºç°çš„ç¬¬ä¸€ä¸ªæ±‰å­—ï¼Œ //ä¹Ÿå°±æ˜¯è¯´â€œå•Šâ€æ˜¯ä»£è¡¨é¦–å­—æ¯açš„ç¬¬ä¸€ä¸ªæ±‰å­—ã€‚ // i, u, véƒ½ä¸åšå£°æ¯, è‡ªå®šè§„åˆ™è·Ÿéšå‰é¢çš„å­—æ¯ private static char[] charTable = &#123; 'å•Š', 'èŠ­', 'æ“¦', 'æ­', 'è›¾', 'å‘', 'å™¶', 'å“ˆ', 'å“ˆ', 'å‡»', 'å–€', 'åƒ', 'å¦ˆ', 'æ‹¿', 'å“¦', 'å•ª', 'æœŸ', 'ç„¶', 'æ’’', 'å¡Œ', 'å¡Œ', 'å¡Œ', 'æŒ–', 'æ˜”', 'å‹', 'åŒ', &#125;; // äºŒåå…­ä¸ªå­—æ¯åŒºé—´å¯¹åº”äºŒåä¸ƒä¸ªç«¯ç‚¹ // GB2312ç æ±‰å­—åŒºé—´åè¿›åˆ¶è¡¨ç¤º private static int[] table = new int[27]; // å¯¹åº”é¦–å­—æ¯åŒºé—´è¡¨ private static char[] initialTable = &#123; 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'H', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'T', 'T', 'W', 'X', 'Y', 'Z', &#125;; // åˆå§‹åŒ– static &#123; for (int i = 0; i &lt; 26; i++) &#123; // å¾—åˆ°GB2312ç çš„é¦–å­—æ¯åŒºé—´ç«¯ç‚¹è¡¨ï¼Œåè¿›åˆ¶ã€‚ table[i] = gbValue(charTable[i]); &#125; table[26] = END;// åŒºé—´è¡¨ç»“å°¾ &#125; // ------------------------publicæ–¹æ³•åŒº------------------------ // æ ¹æ®ä¸€ä¸ªåŒ…å«æ±‰å­—çš„å­—ç¬¦ä¸²è¿”å›ä¸€ä¸ªæ±‰å­—æ‹¼éŸ³é¦–å­—æ¯çš„å­—ç¬¦ä¸²ã€‚ public static String first(String S) &#123; String Result = \"\"; if (S == null || S.equals(\"\")) &#123; return \"#\"; &#125; char cs = S.charAt(0); try &#123; Result += Char2Initial(cs); &#125; catch (Exception e) &#123; Result = \"%\"; e.printStackTrace(); &#125; return Result; &#125; // ------------------------privateæ–¹æ³•åŒº------------------------ /** * è¾“å…¥å­—ç¬¦,å¾—åˆ°ä»–çš„å£°æ¯,è‹±æ–‡å­—æ¯è¿”å›å¯¹åº”çš„å¤§å†™å­—æ¯,å…¶ä»–éç®€ä½“æ±‰å­—è¿”å› '#' */ private static char Char2Initial(char ch) &#123; // å¯¹è‹±æ–‡å­—æ¯çš„å¤„ç†ï¼šå°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™ï¼Œå¤§å†™çš„ç›´æ¥è¿”å› if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') &#123; return (char) (ch - 'a' + 'A'); &#125; if (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z') &#123; return ch; &#125; // å¯¹éè‹±æ–‡å­—æ¯çš„å¤„ç†ï¼šè½¬åŒ–ä¸ºé¦–å­—æ¯ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦åœ¨ç è¡¨èŒƒå›´å†…ï¼Œ // è‹¥ä¸æ˜¯ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚ // è‹¥æ˜¯ï¼Œåˆ™åœ¨ç è¡¨å†…çš„è¿›è¡Œåˆ¤æ–­ã€‚ int gb = gbValue(ch);// æ±‰å­—è½¬æ¢é¦–å­—æ¯ if ((gb &lt; BEGIN) || (gb &gt; END))// åœ¨ç è¡¨åŒºé—´ä¹‹å‰ï¼Œç›´æ¥è¿”å› &#123; return '#'; &#125; int i; for (i = 0; i &lt; 26; i++) &#123; // åˆ¤æ–­åŒ¹é…ç è¡¨åŒºé—´ï¼ŒåŒ¹é…åˆ°å°±break,åˆ¤æ–­åŒºé—´å½¢å¦‚â€œ[,)â€ if ((gb &gt;= table[i]) &amp;&amp; (gb &lt; table[i + 1])) &#123; break; &#125; &#125; if (gb == END) &#123;// è¡¥ä¸ŠGB2312åŒºé—´æœ€å³ç«¯ i = 25; &#125; return initialTable[i]; // åœ¨ç è¡¨åŒºé—´ä¸­ï¼Œè¿”å›é¦–å­—æ¯ &#125; /** * å–å‡ºæ±‰å­—çš„ç¼–ç  cn æ±‰å­— */ private static int gbValue(char ch) &#123;// å°†ä¸€ä¸ªæ±‰å­—ï¼ˆGB2312ï¼‰è½¬æ¢ä¸ºåè¿›åˆ¶è¡¨ç¤ºã€‚ String str = new String(); str += ch; try &#123; byte[] bytes = str.getBytes(\"GB2312\"); if (bytes.length &lt; 2) &#123; return 0; &#125; return (bytes[0] &lt;&lt; 8 &amp; 0xff00) + (bytes[1] &amp; 0xff); &#125; catch (Exception e) &#123; return 0; &#125; &#125;&#125; ä½¿ç”¨æ–¹å¼ï¼š1String first = FirstCharUtil.first(\"åŠ å“‡\"); è¯´æ˜ åŸç†ï¼š GB2312ç¼–ç ä¸­çš„ä¸­æ–‡æ˜¯æŒ‰ç…§æ‹¼éŸ³æ’åºçš„ã€‚ æ³¨æ„ï¼šä¸€äº›ç”Ÿåƒ»çš„å­—æ— æ³•è·å¾—æ­£ç¡®çš„é¦–å­—æ¯ï¼ŒåŸå› æ˜¯è¿™äº›å­—éƒ½æ˜¯ååŠ å…¥çš„ã€‚ï¼ˆæ‰€ä»¥æœ‰äº›åå­—åœ¨é€šè®¯å½•çš„æ’åºä¸å¤ªä¸€æ ·ã€‚ï¼‰ å…¶ä»–æ¯”è¾ƒå¥½ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼šæ±‰è¯­æ‹¼éŸ³åº“ã€‚1implementation 'com.belerweb:pinyin4j:2.5.1' ä½¿ç”¨ï¼š1234567891011121314151617181920212223242526272829@NonNullpublic static String first(@Nullable String str) &#123; if (str == null || str.equals(\"\")) &#123; return \"#\"; &#125; char ch = str.charAt(0); if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') &#123; return (char) (ch - 'a' + 'A') + \"\"; &#125; if (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z') &#123; return ch + \"\"; &#125; try &#123; HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat(); // è®¾ç½®å¤§å°å†™æ ¼å¼ defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE); // è®¾ç½®å£°è°ƒæ ¼å¼ï¼š defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE); if (Character.toString(ch).matches(\"[\\\\u4E00-\\\\u9FA5]+\")) &#123; String[] array = PinyinHelper.toHanyuPinyinStringArray(ch, defaultFormat); if (array != null) &#123; return array[0].charAt(0) + \"\"; &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return \"#\";&#125; HanyuPinyinï¼ˆæ±‰è¯­æ‹¼éŸ³ï¼‰ï¼Œå¤ªçœŸå®äº†ğŸ˜‚ğŸ¤£ã€‚","tags":[{"name":"java","slug":"java","permalink":"https://wzmyyj.top/tags/java/"}]},{"title":"Hexo+GitHubæ­å»ºä¸ªäººåšå®¢ç½‘ç«™","date":"2018-06-06T08:44:28.000Z","path":"2018/06/06/it_4/","text":"å‰è¨€ä»Šå¤©ï¼Œå¸¦å¤§å®¶åˆ©ç”¨Hexoå’ŒGitHubæ­å»ºå±äºè‡ªå·±çš„ä¸ªäººåšå®¢ã€‚ HexoHexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ä¼ é€é—¨ï¼šHexoå®˜ç½‘ä¸­æ–‡æ–‡æ¡£ ç¯å¢ƒé…ç½®1. å®‰è£…&amp;é…ç½®git è®¿é—®gitå®˜ç½‘ï¼Œä¸‹è½½gitã€‚ åŒå‡»exeæ–‡ä»¶å®‰è£…ï¼Œä¸€è·¯nextå³å¯ã€‚ å®‰è£…å¥½gitä¹‹åï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±ã€‚æ‰“å¼€git-bashï¼š 1234# é…ç½®å…¨å±€ç”¨æˆ·ågit config --global user.name \"yourname\"# é…ç½®å…¨å±€é‚®ç®±git config --global user.email \"youremail@qq.com\" ç”¨æˆ·åå’Œé‚®ç®±åŒä½ çš„GitHubï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå»GitHubå®˜ç½‘æ³¨å†Œä¸€ä¸ªï¼Œæ³¨å†Œå¥½åè®°å¾—é‚®ç®±éªŒè¯æ‰èƒ½ä½¿ç”¨ã€‚ï¼‰ é…ç½®sshã€‚æ‰“å¼€git-bashï¼š12#è¾“å…¥ï¼Œå›è½¦ssh-keygen å¤åˆ¶ï¼ˆå³é”®+å¤åˆ¶ï¼Œä¸èƒ½ctrl+cï¼Œè¿™é‡Œctrl+cæ˜¯ç»“æŸå‘½ä»¤çš„æ„æ€ï¼‰å›¾ä¸­çš„/c/Users/Administrator/.ssh/id_rsaï¼Œç„¶åæŠŠå®ƒç²˜è´´ï¼ˆå³é”®+ç²˜è´´ï¼‰åˆ°å†’å·åé¢ï¼Œç„¶åå›è½¦ï¼Œå›è½¦ï¼Œå›è½¦ã€‚ã€‚ã€‚ç›´åˆ°ç»“æŸï¼ˆä¸­é—´çš„å†’å·ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªä¸ç”¨ç®¡åªç®¡å›è½¦ï¼‰ã€‚ githubä¸Šç”Ÿæˆssh keyï¼Œæ˜¯æœ¬åœ°Gitç»‘å®šGitHubã€‚ç½‘é¡µä¸Šæ‰“å¼€github -&gt; ç‚¹å‡»å¤´åƒ -&gt; Settings -&gt; å·¦è¾¹èœå•æ‰¾åˆ° SSH and GPG keys -&gt; New SSH keyï¼ˆç»¿è‰²æŒ‰é’®ï¼‰-&gt; titleéšä¾¿å¡«ï¼ˆç”¨è‹±æ–‡ï¼‰-&gt; keyå€¼ï¼ˆæ‰“å¼€/c/Users/Administrator/.ssh/id_rsaæ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°id_rsa.pubï¼Œæ³¨æ„æ˜¯pubåç¼€é‚£ä¸ªæ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹ï¼Œç²˜è´´åˆ°keyå€¼ã€‚ï¼‰ -&gt; ç‚¹å‡»ä¸‹é¢çš„Add SSH key -&gt; å®Œæˆã€‚ 2. ä¸‹è½½å®‰è£…Node.js node.jsä¸‹è½½åœ°å€ å®‰è£…æ­¥éª¤ï¼šä¸€è·¯é»˜è®¤å°±è¡Œï¼ˆå®‰è£…è·¯å¾„æ ¹æ®è‡ªå·±éœ€è¦æ›´æ”¹ï¼‰ å®‰è£…&amp;ä½¿ç”¨Hexo åœ¨Dç›˜ä¸‹ï¼ˆå…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥ï¼‰åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼ˆå‘½åä¸ºä½ ä¸»é¡µçš„åå­—æˆ–è€…HEXOï¼Œéšä¾¿å•¦ï¼Œè¿™é‡Œä»¥åä¸ºMyBlogä¸ºä¾‹ï¼‰ æ‰“å¼€cmdå‘½ä»¤çª—å£ï¼ˆæ¡Œé¢ä»»åŠ¡æ æœ€å·¦è¾¹é‚£ä¸ªwinså›¾æ ‡-&gt; æœç´¢ -&gt; è¾“å…¥cmd ï¼Œå›è½¦ï¼‰ã€‚åˆ‡æ¢åˆ°Dç›˜ï¼šï¼ˆè¾“å…¥ï¼Œå›è½¦ï¼‰D: -&gt; åˆ‡æ¢åˆ°åˆšæ‰å»ºçš„ç©ºæ–‡ä»¶å¤¹ï¼šï¼ˆè¾“å…¥ï¼Œå›è½¦ï¼‰cd MyBlogã€‚ å®‰è£…Hexo 1234# åˆ‡æ¢å›½å†…æºnpm config set registry=\"http://registry.cnpmjs.org\"# å®‰è£…hexonpm install -g hexo ç­‰å¾…å®‰è£…å®Œæˆã€‚ åˆå§‹åŒ–Hexoï¼š1234# åˆå§‹åŒ–Hexohexo init# å®‰è£…å¿…è¦æ¨¡å—npm install è¿™æ—¶ï¼ŒMyBlogæ–‡ä»¶å¤¹ä¸‹å°±ç”Ÿæˆäº†ä¸€äº›æ–‡ä»¶ã€‚æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š1234567â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes åˆ°æ­¤åšå®¢å·²ç»é…ç½®å¥½äº†ï¼ˆè™½ç„¶æ˜¯é»˜è®¤çš„æ ·å­ï¼‰ æµ‹è¯•ä¸€ä¸‹ï¼š1234# ç”Ÿæˆé™æ€æ–‡ä»¶hexo g // æˆ– hexo generate# æœ¬åœ°æµ‹è¯•hexo s // æˆ– hexo server ç„¶åæµè§ˆå™¨ä¸ŠæŸ¥çœ‹ http://localhost:4000 æ˜¯ä¸æ˜¯å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç®€å•çš„ç½‘é¡µï¼ˆå¦‚æœä¸èƒ½ï¼Œæœ‰å¯èƒ½æ˜¯4000ç«¯å£è¢«åˆ«çš„ç¨‹åºå ç”¨äº†ï¼Œè‡ªè¡Œç™¾åº¦è§£å†³æ–¹æ¡ˆï¼‰ã€‚ ä¸ªæ€§åŒ–1. _config.ymlæ–‡ä»¶æ‰“å¼€è¯¥ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚ï¼ˆç”¨ä»€ä¹ˆè½¯ä»¶æ‰“å¼€ï¼Ÿä½ å¯ä»¥ç”¨editplusæˆ–è€…vs ç­‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨è®°äº‹æœ¬ï¼Œå°±æ˜¯æ¯”è¾ƒéš¾çœ‹ï¼Œå»ºè®®ä¸‹ä¸ªeditpluså§ã€‚ï¼‰ ä¿®æ”¹æˆä½ æƒ³è¦çš„å†…å®¹ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990# Hexo Configuration## Docs: http://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: æ¢æˆä½ çš„ä¸»é¡µæ ‡é¢˜subtitle: ä¸»é¡µå‰¯æ ‡é¢˜description: ä¸»é¡µä»‹ç»çš„ä¸€å¥è¯author: ä½ çš„åå­—language: zh-CN #è¯­è¨€timezone: Asia/Shanghai #æ—¶åŒº# URL## If your site is put in a subdirectory, ##set url as 'http://yoursite.com/child' and root as '/child/'url: http://voidking.comroot: /permalink: :year/:month/:day/:title/permalink_defaults:# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight: enable: true line_number: true auto_detect: true tab_replace:# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# Pagination## Set per_page to 0 to disable paginationper_page: 5pagination_dir: pageindex_generator: per_page: 5archive_generator: per_page: 500 yearly: true monthly: true tag_generator: per_page: 100 category_generator: per_page: 100 # Extensions## Plugins: http://hexo.io/plugins/## Themes: http://hexo.io/themes/theme: ä½ ç”¨çš„ä¸»é¢˜æ–‡ä»¶å¤¹åå­— # themesä¸‹çš„æ–‡ä»¶# Deployment## Docs: http://hexo.io/docs/deployment.htmldeploy: type: git repository: GitHubä»“åº“åœ°å€ branch: master 2. ä¿®æ”¹ä¸»é¢˜åœ¨hexoå®˜ç½‘ä¸»é¢˜ä¸­æ‰¾ä¸€ä¸ªå–œæ¬¢çš„ä¸»é¢˜ã€‚ æ‰¾åˆ°åï¼Œä¸€èˆ¬éƒ½æœ‰ä»‹ç»æ€ä¹ˆä½¿ç”¨è¯¥ä¸»é¢˜çš„æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰ï¼ŒæŠŠç½‘é¡µæ‹‰åˆ°æœ€ä¸‹é¢ã€‚çœ‹åˆ°ï¼š2018 | Powered by Hexo Theme by Aathç‚¹å‡»Theme by åé¢çš„è¿æ¥ï¼Œä¸€èˆ¬ä¼šç®€ä»‹åˆ°æœ¬ä¸»é¢˜åœ¨GitHubä¸Šçš„ä»“åº“åœ°å€ã€‚ æ ¹æ®è¯´æ˜ï¼Œä¸‹è½½é…ç½®ä¸»é¢˜ã€‚ ä¸‹è½½ä¸»é¢˜ã€‚æ¯”å¦‚ï¼š12# åˆ‡æ¢åˆ°MyBlogæ–‡ä»¶ä¸‹ï¼Œcmdæ‰§è¡Œgit clone -b master https://github.com/lewis-geek/hexo-theme-Aath.git themes/aath ä¸€èˆ¬ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸‹è½½åˆ°themesæ–‡ä»¶å¤¹ä¸‹ã€‚ è·Ÿæ¢åšå®¢çš„ä¸»é¢˜ï¼šä¸‹è½½å¥½åï¼Œä½ åœ¨_config.ymlï¼ˆä¸»é¢˜æ˜¯MyBlogæ–‡ä»¶å¤¹ä¸‹çš„ï¼‰ä¸­çš„themeï¼šå¤„é…ç½®æˆä½ ä¸‹åœ¨çš„ä¸»é¢˜åå­—ï¼ˆå°±æ˜¯ä¸‹è½½çš„ä¸»é¢˜æ–‡ä»¶å¤¹åå­— ï¼‰ é…ç½®ä¸»é¢˜ï¼šæ ¹æ®GitHubä¸Šçš„è¯´æ˜é…ç½®themes/ä¸»é¢˜åç›®å½•ä¸‹çš„_config.ymlï¼ˆä¸è¦ä¸MyBlogçš„_config.ymlææ··ï¼‰ã€‚ä¸åŒä¸»é¢˜ï¼Œé…ç½®èµ·æ¥ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨æ­¤ä¸è¯¦è§£äº†ã€‚ å‘å¸ƒåˆ°GitHub Githubä¸Šæ–°å»ºä»“åº“ï¼šæ‰“å¼€GitHubç½‘é¡µï¼Œç‚¹å‡»å¤´åƒæ—è¾¹çš„â€œ+â€å· -&gt; New repository -&gt; å¡«å†™åå­—ï¼ˆå¿…é¡»æ˜¯ï¼šä½ GitHubçš„åå­—.github.ioï¼‰ æœ¬åœ°é…ç½®Gitï¼šåœ¨MyBlogæ–‡ä»¶å¤¹ä¸‹çš„_config.ymlé…ç½®ï¼ˆå¤§çº¦åœ¨åº•éƒ¨ä½ç½®ï¼‰ï¼š 123456# Deployment## Docs: http://hexo.io/docs/deployment.htmldeploy: type: git repository: https://github.com/wzmyyj/wzmyyj.github.io.git branch: master ä¸Šä¼ ï¼š 123456# å¦‚æœæƒ³æŠŠåŸæ¥çš„æ¸…é™¤hexo clean# é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶hexo g# ä¸Šä¼ åˆ°æäº¤æ–‡ä»¶hexo d ç¬¬ä¸€æ¬¡æäº¤éœ€è¦GitHubç™»å½•è´¦å·å’Œå¯†ç ã€‚ ä¸Šä¼ å®Œæˆåï¼Œæµè§ˆå™¨æ‰“å¼€ï¼šhttps://ä½ çš„GitHubåå­—.github.io å°±æ˜¯ä½ çš„åšå®¢ä¸»é¡µåœ°å€äº†ã€‚ï¼ˆGitHubå“åº”æ¯”è¾ƒæ…¢ï¼Œåˆšä¸Šä¼ éœ€è¦ç­‰ä¸€å°ä¼šæ‰èƒ½æ‰“å¼€æœ€æ–°çš„ã€‚ï¼‰ å†™æ–‡ç«  æ–°å»ºä¸€ç¯‡æ–‡ç« ï¼š12# æ–°å»ºhexo new post æ–‡ç« å åœ¨Myblog\\source\\_postsç›®å½•ä¸‹ä½ å°†çœ‹åˆ°ä¸€ä¸ªæ–°å»ºçš„æ–‡ç« å.mdæ–‡ä»¶ã€‚ ç¼–è¾‘æ–‡ç« ï¼šç”¨editplusæ‰“å¼€ç¼–è¾‘ï¼Œç”¨Markdownæ ¼å¼ä¹¦å†™ã€‚ ä¿å­˜æ—¶ï¼Œè®°å¾—æŠŠç¼–ç æ–¹å¼æ”¹æˆutf-8ã€‚Document -&gt; File Encoding -&gt; Convert Encodingâ€¦ å»ºè®®ç”¨ç®€ä¹¦å†™ï¼ˆç®€ä¹¦è®¾ç½®é‡ŒæŠŠç¼–è¾‘å™¨æ”¹æˆMarkdownï¼‰ï¼Œç„¶åå¤åˆ¶è¿‡å»ã€‚å¥½å¤„æ˜¯å›¾ç‰‡å­˜åœ¨ç®€ä¹¦ä¸Šï¼Œè®¿é—®èµ·æ¥å¿«äº›ã€‚ ä¸Šä¼ ï¼šï¼ˆå’Œå‰é¢ä¸€æ ·ï¼‰12345678# å¦‚æœæƒ³æŠŠåŸæ¥çš„æ¸…é™¤hexo clean# é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶hexo g# æœ¬åœ°æµ‹è¯•hexo s# ä¸Šä¼ åˆ°æäº¤æ–‡ä»¶hexo d åˆ°æ­¤ï¼Œä½ çš„åšå®¢ä¸»é¡µå·²ç»å®Œæˆã€‚ è·Ÿæ¢åŸŸå è´­ä¹°ä¸€ä¸ªåŸŸåã€‚ï¼ˆé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œä¸‡ç½‘å‡å¯æ³¨å†Œè´­ä¹°åŸŸåï¼‰ ä¿®æ”¹ä½ åŸŸåçš„DNSåœ°å€ä¸º dns22.hichina.com, dns21.hichina.com åŸŸåè§£æä¸Šï¼ŒCNAMEåˆ°ä½ çš„GitHubåå­—.github.io ç„¶ååœ¨ä½ çš„æœ¬åœ°ç«™ç‚¹ç›®å½•é‡Œçš„sourceç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªCNAMEæ–‡ä»¶ã€‚ä»¥æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€CNAMEï¼Œé‡Œé¢æ·»åŠ ä½ çš„åŸŸåï¼ˆä¸åŠ http://ï¼‰ã€‚ åœ¨MyBlogæ–‡ä»¶å¤¹ä¸‹çš„_config.ymlé…ç½®urlï¼š 1234# URL## If your site is put in a subdirectory, ## set url as 'http://yoursite.com/child' and root as '/child/'url: http://wzmyyj.top //ä½ çš„åŸŸå é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶å’Œä¸Šä¼ åˆ°GitHubã€‚ é™„ä»¶1. å‚è€ƒæ–‡çŒ®ï¼šHexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆæ­å»ºä¸ªäººåšå®¢-hexo+githubè¯¦ç»†å®Œæ•´æ­¥éª¤æˆ‘çš„åšå®¢æ˜¯å¦‚ä½•æ­å»ºçš„ï¼ˆgithub pages + HEXO + åŸŸåç»‘å®šï¼‰Hexoä¸­æ–‡æ–‡æ¡£ 2. æˆ‘çš„ä¸»é¡µï¼š æ¬¢è¿å¤§å®¶æµè§ˆæˆ‘çš„ä¸»é¡µï¼šhttp://wzmyyj.top/","tags":[{"name":"IT","slug":"IT","permalink":"https://wzmyyj.top/tags/IT/"}]},{"title":"ã€Šæé—®çš„æ™ºæ…§ã€‹","date":"2018-06-04T12:08:19.000Z","path":"2018/06/04/it_3/","text":"æé—®çš„æ™ºæ…§è‰¾ç‘å…‹.å²è’‚æ–‡.é›·è’™å¾·ï¼ˆEric Steven Raymondï¼‰Thyrsus Enterprises &#101;&#x73;&#x72;&#64;&#116;&#104;&#x79;&#114;&#115;&#x75;&#x73;&#x2e;&#x63;&#111;&#x6d;ç‘å…‹.è«æ©ï¼ˆRick Moenï¼‰ &#114;&#101;&#x73;&#112;&#111;&#110;&#x64;&#45;&#97;&#x75;&#x74;&#x6f;&#x40;&#108;&#x69;&#x6e;&#x75;&#x78;&#109;&#97;&#x66;&#x69;&#x61;&#46;&#99;&#x6f;&#x6d;ç‰ˆæƒÂ©2001, 2006 Eric S. Raymond, Rick Moen ä¼ é€é—¨ä¸­æ–‡ï¼šã€Šæé—®çš„æ™ºæ…§ã€‹ åŸæ–‡ï¼šã€ŠHow To Ask Questions The Smart Wayã€‹ è¦æ±‚å£°æ˜ï¼šï¼ˆæˆ‘ä»¬ä¸æä¾›è¯¥é¡¹ç›®çš„æœåŠ¡æ”¯æŒï¼ï¼‰","tags":[{"name":"IT","slug":"IT","permalink":"https://wzmyyj.top/tags/IT/"}]},{"title":"ä»…ä»…æ˜¯å‡ å¼ å›¾è€Œå·²å“¦^_^","date":"2018-06-01T13:20:06.000Z","path":"2018/06/01/pic_1/","text":"ä»…ä»…æ˜¯å‡ å¼ å›¾è€Œå·²å“¦^_^ã€‚ã€‚ã€‚å•¦å•¦å•¦å•¦å•¦ã€‚ã€‚ã€‚ã€‚","tags":[{"name":"å›¾ç‰‡","slug":"å›¾ç‰‡","permalink":"https://wzmyyj.top/tags/å›¾ç‰‡/"}]},{"title":"Androidæ—¥å¿—å·¥å…·Logç±»","date":"2018-05-22T12:43:30.000Z","path":"2018/05/22/android_1/","text":"android.util.Logç±»android.util.Logå¸¸ç”¨çš„æ–¹æ³•æœ‰ä»¥ä¸‹5ä¸ªï¼šLog.v()ï¼Œ Log.d() ï¼ŒLog.i() ï¼ŒLog.w() ä»¥åŠ Log.e() ã€‚æ ¹æ®é¦–å­—æ¯å¯¹åº”VERBOSEï¼ŒDEBUGï¼ŒINFOï¼Œ WARNï¼ŒERRORã€‚ Log.v çš„è¾“å‡ºé¢œè‰²ä¸ºé»‘è‰²çš„ï¼Œä»»ä½•æ¶ˆæ¯éƒ½ä¼šè¾“å‡ºï¼Œè¿™é‡Œçš„vä»£è¡¨verboseå•°å—¦çš„æ„æ€ã€‚ Log.dçš„è¾“å‡ºé¢œè‰²ä¸ºè“è‰²çš„ï¼Œä»…è¾“å‡ºdebugè°ƒè¯•çš„æ„æ€ï¼Œä½†ä»–ä¼šè¾“å‡ºä¸Šå±‚çš„ä¿¡æ¯ï¼Œè¿‡æ»¤èµ·æ¥å¯ä»¥é€šè¿‡DDMSçš„Logcatæ ‡ç­¾æ¥é€‰æ‹©ã€‚ Log.içš„è¾“å‡ºé¢œè‰²ä¸ºç»¿è‰²ï¼Œä¸€èˆ¬æç¤ºæ€§çš„æ¶ˆæ¯informationï¼Œå®ƒä¸ä¼šè¾“å‡ºLog.vå’ŒLog.dçš„ä¿¡æ¯ï¼Œä½†ä¼šæ˜¾ç¤ºiã€wå’Œeçš„ä¿¡æ¯ã€‚ Log.wçš„è¾“å‡ºé¢œè‰²ä¸ºæ©™è‰²ï¼Œå¯ä»¥çœ‹ä½œä¸ºwarningè­¦å‘Šï¼Œä¸€èˆ¬éœ€è¦æˆ‘ä»¬æ³¨æ„ä¼˜åŒ–Androidä»£ç ï¼ŒåŒæ—¶é€‰æ‹©å®ƒåè¿˜ä¼šè¾“å‡ºLog.eçš„ä¿¡æ¯ã€‚ Log.eçš„è¾“å‡ºé¢œè‰²ä¸ºçº¢è‰²ï¼Œå¯ä»¥æƒ³åˆ°erroré”™è¯¯ï¼Œè¿™é‡Œä»…æ˜¾ç¤ºçº¢è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™äº›é”™è¯¯å°±éœ€è¦æˆ‘ä»¬è®¤çœŸçš„åˆ†æï¼ŒæŸ¥çœ‹æ ˆçš„ä¿¡æ¯äº†ã€‚ 1,å¸¸è§„ç”¨æ³•12345Log.v(TAG,\"ä¸€æ¡å•°å—¦æ—¥å¿—\");Log.d(TAG,\"ä¸€æ¡è°ƒè¯•æ—¥å¿—\");Log.i(TAG,\"ä¸€æ¡æç¤ºæ—¥å¿—\");Log.w(TAG,\"ä¸€æ¡è­¦å‘Šæ—¥å¿—\");Log.e(TAG,\"ä¸€æ¡é”™è¯¯æ—¥å¿—\"); å…¶ä¸­TAGä¸ºå­—ç¬¦ä¸²ã€‚ç”¨äºæ ‡è®°ã€‚åŒä¸€ä¸ªåº”ç”¨TAGåŸºæœ¬å¯ä»¥æˆä¸€æ ·ã€‚å¹¶ä¸”ï¼Œåº”ç”¨æ‰“åŒ…å‘å¸ƒæ—¶ï¼Œæœ€å¥½æŠŠå…¨éƒ¨Logæ³¨é‡Šæ‰ï¼Œå¦åˆ™å°†äº§ç”Ÿä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ï¼ˆè™½ç„¶å¾ˆå°ï¼‰ã€‚ 2,åˆ†è£…Log123456789101112131415161718192021222324252627282930313233343536373839404142public class L &#123; private static String TAG = \"WZM\"; // å¼€å…³ private static boolean debug = true; private L() &#123; &#125; public static void setTAG(String TAG) &#123; L.TAG = TAG; &#125; public static void setDebug(boolean debug) &#123; L.debug = debug; &#125; public static void v(String msg) &#123; if (debug) Log.v(TAG, msg); &#125; public static void d(String msg) &#123; if (debug) Log.d(TAG, msg); &#125; public static void i(String msg) &#123; if (debug) Log.i(TAG, msg); &#125; public static void w(String msg) &#123; if (debug) Log.w(TAG, msg); &#125; public static void e(String msg) &#123; if (debug) Log.e(TAG, msg); &#125;&#125; ä½¿ç”¨æ—¶ï¼š12345L.v(\"ä¸€æ¡å•°å—¦æ—¥å¿—\");L.d(\"ä¸€æ¡è°ƒè¯•æ—¥å¿—\");L.i(\"ä¸€æ¡æç¤ºæ—¥å¿—\");L.w(\"ä¸€æ¡è­¦å‘Šæ—¥å¿—\");L.e(\"ä¸€æ¡é”™è¯¯æ—¥å¿—\"); å¹¶ä¸”ï¼Œå¯åœ¨Applicationä¸­è®¾ç½®å¼€å…³ï¼ˆæ˜¯å¦è¾“å‡ºæ—¥å¿—ï¼‰æˆ–TAGï¼ˆé»˜è®¤WZMï¼‰12345678public class MyApplication extends Application &#123; @Override public void onCreate() &#123; super.onCreate(); L.setTAG(\"TAG\"); L.setDebug(false); &#125;&#125; æ‰“åŒ…å‘å¸ƒæ—¶ï¼Œdebugè®¾ä¸ºfalseå³å¯ã€‚ å…¶ä»–è¿˜æœ‰å¯¹Toastçš„ç®€å•å°è£…ï¼šAndroid å°è£…Toast","tags":[{"name":"android","slug":"android","permalink":"https://wzmyyj.top/tags/android/"}]},{"title":"ã€è®¾è®¡æ¨¡å¼ã€‘æŠ½è±¡å·¥å‚æ¨¡å¼","date":"2018-05-19T09:50:00.000Z","path":"2018/05/19/design_4/","text":"å·¥å‚æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯æ‰€æœ‰å½¢æ€çš„å·¥å‚æ¨¡å¼ä¸­æœ€ä¸ºæŠ½è±¡å’Œæœ€å…·ä¸€èˆ¬æ€§çš„ä¸€ç§å½¢æ€ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯æŒ‡å½“æœ‰å¤šä¸ªæŠ½è±¡è§’è‰²æ—¶ï¼Œä½¿ç”¨çš„ä¸€ç§å·¥å‚æ¨¡å¼ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥å‘å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œä½¿å®¢æˆ·ç«¯åœ¨ä¸å¿…æŒ‡å®šäº§å“çš„å…·ä½“çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºå¤šä¸ªäº§å“æ—ä¸­çš„äº§å“å¯¹è±¡ã€‚ å¦‚æœè¯»è€…ä¸äº†è§£å·¥å‚æ¨¡å¼ï¼Œè¯·çœ‹ä¸Šç¯‡ã€è®¾è®¡æ¨¡å¼ã€‘å·¥å‚æ¨¡å¼ã€‚ UMLç±»å›¾ æŠ½è±¡äº§å“ç±»ï¼ˆAbstractProductXï¼‰ï¼šå¤šä¸ªç³»åˆ—æŠ½è±¡äº§å“ï¼ˆX=A,B,Câ€¦ï¼‰ã€‚ å…·ä½“äº§å“ç±»ï¼ˆProductXï¼‰ï¼šå®ç°åŸºç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼ˆå¤šä¸ªä¸åŒçš„å…·ä½“äº§å“ï¼ŒX=1,2,3..ï¼‰ã€‚ æŠ½è±¡å·¥å‚ç±»æˆ–æ¥å£ï¼ˆAbstractFactoryï¼‰ï¼šå®šä¹‰å…·ä½“å·¥å‚çš„å¤šä¸ªå…¬å…±æ¥å£ï¼ˆæ‹¥æœ‰å„ç³»åˆ—äº§å“åˆ›å»ºçš„æ¥å£ï¼‰ã€‚ å…·ä½“å·¥å‚ç±»ï¼ˆFactoryXï¼‰ï¼šå®šä¹‰åˆ›å»ºå„ç³»åˆ—å…·ä½“äº§å“å®ä¾‹çš„æ–¹æ³•ã€‚ï¼ˆæ¯ä¸ªå·¥å‚å¯¹åº”ä¸€ç§å…·ä½“äº§å“ï¼ŒX=1,2,3â€¦ï¼‰ã€‚ ä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ« å·¥å‚æ¨¡å¼çš„å·¥å‚åªèƒ½ç”Ÿäº§ä¸€ä¸ªç³»åˆ—çš„äº§å“ã€‚è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å·¥å‚å¯ä»¥ç”Ÿäº§ä¸€ä¸ªæˆ–å¤šä¸ªç³»åˆ—çš„äº§å“ã€‚ å·¥å‚æ¨¡å¼å…³æ³¨çš„æ˜¯ä¸€ä¸ªç³»åˆ—çš„ä¸åŒç§äº§å“ã€‚è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å…³æ³¨çš„æ˜¯ä¸åŒç³»åˆ—äº§å“ã€‚ æ¡ˆä¾‹åˆ†ææ¥ç€ä¸Šç¯‡ã€è®¾è®¡æ¨¡å¼ã€‘å·¥å‚æ¨¡å¼çš„è¯é¢˜ã€‚ åœºæ™¯ï¼šç©ã€Šè‹±é›„è”ç›Ÿã€‹ï¼ˆ5v5 mobaç«¯æ¸¸ï¼‰æ–°å¼€ä¸€å±€æ¸¸æˆï¼Œæ¸¸æˆå¼€å§‹æ¯ä¸ªç©å®¶éœ€è¦é€‰ä¸€ä¸ªè‹±é›„ä¹‹å¤–ï¼Œè¿˜éœ€è¦é€‰æ‹©å¤©èµ‹ï¼Œå¬å”¤å¸ˆæŠ€èƒ½ã€‚ä¹Ÿå°±æ˜¯éœ€è¦åˆ›å»ºä¸‰ç§äº§å“ã€‚å¹¶ä¸”ï¼Œåœ¨ä¸åŒç©æ³•ä¸‹ï¼Œæ¯”å¦‚å¬å”¤å¸ˆå³¡è°·ï¼ˆè‡ªé€‰æˆ–æ’ä½ç­‰ï¼‰ä¸å“­åšæ·±æ¸Šï¼ˆå¤§ä¹±æ–—ï¼‰ï¼Œåˆ›å»ºçš„äº§å“ä¹Ÿç•¥å¾®æœ‰æ‰€å·®å¼‚ï¼Œæ¯”å¦‚å¤§ä¹±æ–—ä¸‹è‹±é›„ä¸€å¼€å§‹å°±3çº§ï¼Œå¬å”¤å¸ˆæŠ€èƒ½æ²¡æœ‰ä¼ é€ï¼Œæœ‰é›ªçƒã€‚ç»“æ„ä¸Šï¼š äº§å“ï¼ˆä¸‰ä¸ªç³»åˆ—ï¼‰ï¼šè‹±é›„ï¼Œå¤©èµ‹ï¼Œå¬å”¤å¸ˆæŠ€èƒ½ã€‚ å·¥å‚ï¼ˆä¸¤ä¸ªï¼‰ï¼šå¬å”¤å¸ˆå³¡è°·å·¥å‚ï¼Œå“­åšæ·±æ¸Šå·¥å‚ã€‚ ä»£ç å®ç°è‹±é›„åŸºç±»ï¼ˆæ–°å¢lvæˆå‘˜å˜é‡å’Œprint()æ–¹æ³•ï¼‰123456789101112public abstract class Hero &#123; protected String name; protected int lv; public abstract void say(); public void print() &#123; System.out.println(\"name:\" + name); System.out.println(\"lv:\" + lv); &#125;&#125; åªè€ƒè™‘ä¸€ç§è‹±é›„ï¼Œæ¯”å¦‚å¯’å†°å°„æ‰‹-è‰¾å¸Œã€‚ è‰¾å¸Œç±»ï¼š123456789101112public class Ashe extends Hero &#123; // ç®€åŒ–æ„é€ æ–¹æ³•ï¼Œåªå¼„ä¸ªåå­—ã€‚ public Ashe() &#123; this.name = \"å¯’å†°å°„æ‰‹-è‰¾å¸Œ\"; &#125; // è‰¾å¸Œå°è¯ï¼ˆä¸é‡è¦ï¼‰ @Override public void say() &#123; System.out.println(name + \"ï¼š\" + \"ä¸–é—´ä¸‡ç‰©çš†ç³»äºä¸€ç®­ä¹‹ä¸Šã€‚\"); &#125;&#125; å¬å”¤å¸ˆå³¡è°·ä¸­çš„è‰¾å¸Œï¼š1234567public class Ashe_XiaGu extends Ashe &#123; // åœ¨å¬å”¤å¸ˆå³¡è°·ä¸­åˆå§‹ç­‰çº§1çº§ã€‚ public Ashe_XiaGu() &#123; super(); this.lv = 1; &#125;&#125; å“­åšæ·±æ¸Šä¸­çš„è‰¾å¸Œï¼š1234567public class Ashe_ShenYuan extends Ashe &#123; // åœ¨å“­åšæ·±æ¸Šä¸­åˆå§‹ç­‰çº§3çº§ã€‚ public Ashe_ShenYuan() &#123; super(); this.lv = 3; &#125;&#125; å¤©èµ‹åŸºç±»ï¼šï¼ˆå°±ç®€å•ç‚¹åªç”¨æ‰“å°ä¿¡æ¯åŒºåˆ†ä¸‹å¥½äº†ï¼‰1234public abstract class Talent &#123; // åªæ‰“å°ä¸€ä¸‹ä¿¡æ¯ public abstract void print();&#125; ä¸¤ä¸ªå¤©èµ‹å®ç°ç±»ï¼š12345678public class Talent_XiaGu extends Talent&#123; @Override public void print() &#123; System.out.println(\"å¬å”¤å¸ˆå³¡è°·ä¸­çš„å¤©èµ‹\"); &#125;&#125; 12345678public class Talent_ShenYuan extends Talent&#123; @Override public void print() &#123; System.out.println(\"å“­åšæ·±æ¸Šä¸­çš„å¤©èµ‹\"); &#125;&#125; å¬å”¤å¸ˆæŠ€èƒ½åŸºç±»ï¼š123456789public abstract class Skill &#123; // å¬å”¤å¸ˆæŠ€èƒ½ç§ç±» protected String[] skill_type; // é€‰æ‹©ä¸¤ç§å¬å”¤å¸ˆæŠ€èƒ½ public void choose(int i, int j) &#123; System.out.println(\"ä½ é€‰æ‹©äº†\" + skill_type[i] + \"å’Œ\" + skill_type[j]); &#125;&#125; ä¸¤ä¸ªå¬å”¤å¸ˆæŠ€èƒ½å®ç°ç±»ï¼š123456public class Skill_XiaGu extends Skill &#123; public Skill_XiaGu() &#123; this.skill_type = new String[] &#123; \"é—ªç°\", \"æ²»ç–—\", \"ä¼ é€\", \"å‡€åŒ–\", \"å…‰ç›¾\", \"è™›å¼±\", \"æƒ©æˆ’\", \"ç–¾èµ°\" &#125;; &#125;&#125; 123456public class Skill_ShenYuan extends Skill &#123; public Skill_ShenYuan() &#123; this.skill_type = new String[] &#123; \"é—ªç°\", \"æ²»ç–—\", \"é›ªçƒ\", \"å‡€åŒ–\", \"å…‰ç›¾\", \"è™›å¼±\", \"å›è“\", \"ç–¾èµ°\" &#125;; &#125;&#125; å‡†å¤‡å·¥ä½œå®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é‡ç‚¹äº†ã€‚ æŠ½è±¡å·¥å‚ç±»æˆ–æ¥å£ï¼š123456789public interface AbstractFactory &#123; //åˆ›å»ºè‹±é›„ public abstract Hero createHero(); //åˆ›å»ºå¤©èµ‹ public abstract Talent createTalent(); //åˆ›å»ºå¬å”¤å¸ˆæŠ€èƒ½ public abstract Skill createSkill();&#125; å¬å”¤å¸ˆå³¡è°·å·¥å‚ç±»ï¼š1234567891011121314public class Factory_XiaGu implements AbstractFactory &#123; //å‡è®¾æˆ‘é€‰è‰¾å¸Œ public Hero createHero() &#123; return new Ashe_XiaGu(); &#125; public Talent createTalent() &#123; return new Talent_XiaGu(); &#125; public Skill createSkill() &#123; return new Skill_XiaGu(); &#125;&#125; å“­åšæ·±æ¸Šå·¥å‚ç±»ï¼š1234567891011121314public class Factory_ShenYuan implements AbstractFactory &#123; //å‡è®¾æˆ‘é€‰è‰¾å¸Œ public Hero createHero() &#123; return new Ashe_ShenYuan(); &#125; public Talent createTalent() &#123; return new Talent_ShenYuan(); &#125; public Skill createSkill() &#123; return new Skill_ShenYuan(); &#125;&#125; æœ€åæ˜¯å®¢æˆ·ç«¯ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132public class Client &#123; public static void main(String[] args) &#123; System.out.println(\"è¯·é€‰æ‹©æ¸¸æˆæ¨¡å¼\"); System.out.println(\"1,å¬å”¤å¸ˆå³¡è°· 2,å“­åšæ·±æ¸Š\"); Scanner can = new Scanner(System.in); int w = can.nextInt(); can.close(); AbstractFactory factory = null; switch (w) &#123; case 1: // å¬å”¤å¸ˆå³¡è°· factory = new Factory_XiaGu(); break; case 2: // å“­åšæ·±æ¸Š factory = new Factory_ShenYuan(); break; &#125; // è‹±é›„ï¼ˆé€‰æ‹©çš„æ˜¯è‰¾å¸Œï¼‰ Hero hero = factory.createHero(); hero.print(); hero.say(); // å¤©èµ‹ Talent talent = factory.createTalent(); talent.print(); // å¬å”¤å¸ˆæŠ€èƒ½ Skill skill = factory.createSkill(); skill.choose(0, 2); &#125;&#125; å®¢æˆ·ç«¯é€‰æ‹©æ¸¸æˆæ¨¡å¼ï¼Œå°±ç›¸å½“äºé€‰æ‹©äº†ä¸åŒçš„å·¥å‚å»ç”Ÿäº§æ¸¸æˆå…ƒç´ ï¼ˆè‹±é›„ï¼Œå¤©èµ‹ï¼Œå¬å”¤å¸ˆæŠ€èƒ½ï¼‰ã€‚ ä¹Ÿå¯ä»¥ç»“åˆå·¥å‚æ¨¡å¼ä½¿ç”¨ï¼Œæ¯”å¦‚é€‰æ‹©æ¸¸æˆç±»å‹åï¼Œåˆ©ç”¨å·¥å‚æ¨¡å¼é€‰æ‹©è‹±é›„ç­‰ç­‰ã€‚ åŒå·¥å‚æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“äº§å“çš„åˆ›å»ºè¿‡ç¨‹ã€‚å¹¶ä¸”ï¼Œå®¢æˆ·ç«¯åªéœ€è¦é€‰æ‹©æ¸¸æˆæ¨¡å¼ï¼Œå°±å¯ä»¥ç”¨å·¥å‚åˆ›å»ºå¤šä¸ªç³»åˆ—çš„äº§å“ï¼ˆè‹±é›„ï¼Œå¤©èµ‹ï¼Œå¬å”¤å¸ˆæŠ€èƒ½ï¼‰ã€‚ä¸»è¦ç‰¹ç‚¹å°±æ˜¯ä¸€ä¸ªå·¥å‚å¤šç³»åˆ—äº§å“ã€‚ è¿è¡Œç»“æœç©å±€åŒ¹é…ï¼Œé€‰å¬å”¤å¸ˆå³¡è°·ï¼š æºè®¡åˆ’çš®è‚¤çš„å¯’å†°å°„æ‰‹ã€‚ å®é™…åº”ç”¨å¸¸è§çš„æ¡ˆä¾‹å°±æ˜¯ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“ï¼Œæ•°æ®åº“èƒ½å¤„ç†ç”¨æˆ·ï¼Œä¹Ÿèƒ½å¤„ç†å…³ç³»ã€‚ä½†æ˜¯ï¼Œæ•°æ®åº“åˆ†MySQLï¼ŒOricalç­‰ã€‚å¤„ç†åŒæ ·æˆ–ç±»ä¼¼çš„äº‹æƒ…ï¼Œä»–ä»¬çš„å…·ä½“å®ç°å­˜åœ¨å·®å¼‚ã€‚é‚£å°±å¯ä»¥æŠ½å‡ºä¸€ä¸ªå·¥å‚åŸºç±»ï¼Œå†åˆ†åˆ«å†™ä¸¤ä¸ªä¸åŒçš„å·¥å‚å»å¤„ç†ã€‚è¿™æ ·çš„è¯ï¼ŒæŸäº›ä¸œè¥¿å°±å¯ä»¥åšåˆ°å¯è¿ç§»çš„ç›®çš„ã€‚ é™„ä»¶è®¾è®¡æ¨¡å¼DemoGitHubæºç ï¼šhttps://github.com/wzmyyj/Design-Pattern","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wzmyyj.top/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"ã€è®¾è®¡æ¨¡å¼ã€‘å·¥å‚æ¨¡å¼","date":"2018-05-18T09:52:10.000Z","path":"2018/05/18/design_3/","text":"å·¥å‚æ¨¡å¼å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰å°±æ˜¯ä¸“é—¨è´Ÿè´£å°†å¤§é‡æœ‰å…±åŒæ¥å£çš„ç±»å®ä¾‹åŒ–ï¼Œè€Œä¸”ä¸å¿…äº‹å…ˆçŸ¥é“æ¯æ¬¡æ˜¯è¦å®ä¾‹åŒ–å“ªä¸€ä¸ªç±»çš„æ¨¡å¼ã€‚å®ƒå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ¨¡å¼ç›¸å½“äºåˆ›å»ºå®ä¾‹å¯¹è±¡çš„newï¼Œç»å¸¸è¦æ ¹æ®ç±»Classç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œå¦‚A a=new A() å·¥å‚æ¨¡å¼ä¹Ÿæ˜¯ç”¨æ¥åˆ›å»ºå®ä¾‹å¯¹è±¡çš„ã€‚ UMLç±»å›¾ æŠ½è±¡äº§å“ç±»ï¼ˆAbstractProductï¼‰ï¼šç±»ä¸­å®šä¹‰æŠ½è±¡ä¸€äº›æ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­å…·ä½“å®ç°ã€‚ å…·ä½“äº§å“ç±»ï¼ˆProductXï¼‰ï¼šå®ç°åŸºç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼ˆå¤šä¸ªä¸åŒçš„å…·ä½“äº§å“ï¼ŒX=1,2,3..ï¼‰ã€‚ æŠ½è±¡å·¥å‚ç±»æˆ–æ¥å£ï¼ˆAbstractFactoryï¼‰ï¼šå®šä¹‰å…·ä½“å·¥å‚çš„å…¬å…±æ¥å£ã€‚ å…·ä½“å·¥å‚ç±»ï¼ˆFactoryXï¼‰ï¼šå®šä¹‰åˆ›å»ºå¯¹åº”å…·ä½“äº§å“å®ä¾‹çš„æ–¹æ³•ã€‚ï¼ˆæ¯ä¸ªå·¥å‚å¯¹åº”ä¸€ç§å…·ä½“äº§å“ï¼ŒX=1,2,3â€¦ï¼‰ã€‚ æ¡ˆä¾‹åˆ†ææ—¢ç„¶æ˜¯å·¥å‚ï¼Œå½“ç„¶æ˜¯è¦ç”Ÿäº§äº§å“ã€‚é‚£æˆ‘ä»¬æ¥é€ ä»€ä¹ˆå¥½å‘¢ï¼Ÿï¼Œï¼Œå—¯ï¼Œï¼Œï¼Œé€ å°å­©ï¼ŸNOï¼ŒNOï¼ŒNOï¼æˆ‘ä»¬è¿˜æ˜¯æ¥é€ è‹±é›„å§ã€‚ åœºæ™¯ï¼šç©ã€Šè‹±é›„è”ç›Ÿã€‹ï¼ˆ5v5 mobaç«¯æ¸¸ï¼‰æ–°å¼€ä¸€å±€æ¸¸æˆï¼Œæ¸¸æˆå¼€å§‹æ¯ä¸ªç©å®¶éœ€è¦é€‰ä¸€ä¸ªä¿¡èµ–çš„è‹±é›„ã€‚é€‰å¥½åï¼Œè‹±é›„ä¼šå¾ˆå…´å¥‹ï¼Œè¯´ä¸€å¥ä¸“å±çš„å°è¯ã€‚é‚£ä¹ˆç¨‹åºä¸Šæ˜¯newå‡ºè¯¥è‹±é›„çš„å¯¹è±¡ï¼Œæ‰§è¡Œè¯¥å¯¹è±¡çš„say()æ–¹æ³•ã€‚ å¸¸è§„å†™æ³•ï¼šå»ºç«‹è‹±é›„ç±»ï¼š123456public abstract class Hero &#123; protected String name; public abstract void say();&#125; å¯’å†°å°„æ‰‹-è‰¾å¸Œç±»ï¼ˆç»§æ‰¿Heroç±»ï¼‰ï¼š12345678910111213public class Ashe extends Hero &#123; // ç®€åŒ–æ„é€ æ–¹æ³•ï¼Œåªå¼„ä¸ªåå­—ã€‚ public Ashe() &#123; this.name = \"å¯’å†°å°„æ‰‹-è‰¾å¸Œ\"; &#125; // è‰¾å¸Œå°è¯ @Override public void say() &#123; System.out.println(name + \"ï¼š\" + \"ä¸–é—´ä¸‡ç‰©çš†ç³»äºä¸€ç®­ä¹‹ä¸Šã€‚\"); &#125;&#125; ç±»ä¼¼çš„å†™äº†äºšç´¢ç±»ï¼Œå…‰è¾‰ç±»ï¼Œç›–ä¼¦ç±»ï¼Œå‰‘åœ£ç±»ï¼ˆå…¨éƒ¨è‹±é›„çš„è¯ï¼Œè¿˜æœ‰å¥½å¤šï¼‰ã€‚å†å†™ä¸ªæšä¸¾ï¼ˆå¯ä»¥ä¸éœ€è¦ï¼Œä»…ä»…æ‹¿æ¥å½“å¯¹åº”æ ‡è¯†ä½¿ç”¨ï¼‰ã€‚1234567public enum Who &#123; Ashe, Garen, Yi, Lux, Yasuo&#125; ç„¶åå®¢æˆ·ç«¯è°ƒç”¨ï¼šï¼ˆèœé¸Ÿå†™æ³•ï¼‰1234567891011121314151617181920212223242526272829303132333435363738import java.util.Scanner;public class Client1 &#123; public static void main(String[] args) &#123; Scanner can = new Scanner(System.in); String name = can.next(); can.close(); switch (Who.valueOf(name)) &#123; case Ashe: // è‰¾å¸Œ Ashe ashe = new Ashe(); ashe.say(); break; case Yasuo: // äºšç´¢ Yasuo yasuo = new Yasuo(); yasuo.say(); break; case Garen: // å¾·ç› Garen garen = new Garen(); garen.say(); break; case Lux: // å…‰è¾‰ Lux lux = new Lux(); lux.say(); break; case Yi: // å‰‘åœ£ Yi yi = new Yi(); yi.say(); break; &#125; &#125;&#125; å®¢æˆ·ç«¯è°ƒç”¨ï¼šï¼ˆå¥½å­¦ç”Ÿå†™æ³•ï¼Œçˆ¶ç±»çš„å­ç±»å¼•ç”¨ï¼‰123456789101112131415161718192021222324252627282930313233public class Client2 &#123; public static void main(String[] args) &#123; Scanner can = new Scanner(System.in); String name = can.next(); can.close(); Hero hero = null; switch (Who.valueOf(name)) &#123; case Ashe: // è‰¾å¸Œ hero = new Ashe(); break; case Yasuo: // äºšç´¢ hero = new Yasuo(); break; case Garen: // å¾·ç› hero = new Garen(); break; case Lux: // å…‰è¾‰ hero = new Lux(); break; case Yi: // å‰‘åœ£ hero = new Yi(); break; &#125; hero.say(); &#125;&#125; è¿™é‡Œå®¢æˆ·ç«¯éœ€è¦çŸ¥é“ï¼š è‹±é›„æ€ä¹ˆæ„é€ ï¼Œæ€ä¹ˆnewå‡ºæ¥ã€‚ï¼ˆäº‹å®ä¸Šè‹±é›„çš„æ„é€ è¿œæ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚ï¼‰ æ¯ä¸ªè‹±é›„çš„æ–¹æ³•æ€ä¹ˆè°ƒç”¨ã€‚ï¼ˆè¿™é‡Œéƒ½æ˜¯say()æ–¹æ³•ï¼‰ æˆ‘ä»¬å‰é¢æåˆ°ï¼Œåˆ©ç”¨å·¥å‚å¯ä»¥æŠŠåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å°è£…æ‰ï¼Œå®¢æˆ·ç«¯åªè¦çŸ¥é“å¾—åˆ°å¯¹è±¡åè°ƒç”¨å…¶æ–¹æ³•å³å¯ã€‚ç”¨å·¥å‚ä»£æ›¿newçš„è¿‡ç¨‹ã€‚é‚£å°±çœ‹çœ‹å·¥å‚æ–¹æ³•æ€ä¹ˆå»å®ç°å§ã€‚ ####å·¥å‚æ¨¡å¼å†™æ³•å…ˆå»ºç«‹ä¸€ä¸ªå·¥å‚ç±»çš„æ¥å£ï¼š1234public interface Factory &#123; //åˆ›å»ºè‹±é›„çš„æ¥å£ public abstract Hero create();&#125; ç„¶åå»ºç«‹ä¸åŒè‹±é›„å¯¹åº”çš„å·¥å‚å®ç°ç±»ã€‚æ¯”å¦‚è‰¾å¸Œå·¥å‚ï¼š123456public class AsheFactory implements Factory &#123; //å®ç°å…·ä½“çš„åˆ›å»ºè‹±é›„çš„æ–¹æ³•ã€‚ public Hero create() &#123; return new Ashe(); &#125;&#125; åŒæ ·çš„å»ºç«‹äºšç´¢å·¥å‚ï¼Œå…‰è¾‰å·¥å‚ï¼Œç›–ä¼¦å·¥å‚ï¼Œå‰‘åœ£å·¥å‚ç­‰ã€‚ ç„¶åå®¢æˆ·ç«¯è°ƒç”¨ï¼š12345678910111213141516171819202122232425262728293031323334public class Client3 &#123; public static void main(String[] args) &#123; Scanner can = new Scanner(System.in); String name = can.next(); can.close(); Factory factory = null; switch (Who.valueOf(name)) &#123; case Ashe: // è‰¾å¸Œå·¥å‚ factory = new AsheFactory(); break; case Yasuo: // äºšç´¢å·¥å‚ factory = new YasuoFactory(); break; case Garen: // å¾·ç›å·¥å‚ factory = new GarenFactory(); break; case Lux: // å…‰è¾‰å·¥å‚ factory = new LuxFactory(); break; case Yi: // å‰‘åœ£å·¥å‚ factory = new YiFactory(); break; &#125; Hero hero = factory.create(); hero.say(); &#125;&#125; switchä¸­ä¸å†æ˜¯è‹±é›„çš„åˆ›å»ºè¿‡ç¨‹ï¼Œè€Œæ˜¯é€‰æ‹©è‹±é›„å·¥å‚çš„è¿‡ç¨‹ã€‚æ ¹æ®ä¸åŒnameé€‰æ‹©ä¸åŒçš„å·¥å‚ï¼Œç„¶åç”±å·¥å‚å»å®ä¾‹åŒ–å…·ä½“è‹±é›„å¯¹è±¡ã€‚ æ–°å¢ä¸€ä¸ªè‹±é›„ï¼Œå°±æ–°å¢ä¸€ä¸ªå¯¹åº”çš„å·¥å‚ã€‚éœ€è¦ä¿®æ”¹çš„åªæœ‰å®¢æˆ·ç«¯ä»£ç ã€‚ å¦‚æœä¸éœ€è¦æ–°å¢ä¹Ÿä¸éœ€è¦å‡å°‘ã€‚æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠŠå·¥å‚çš„é€‰æ‹©å°è£…èµ·æ¥ã€‚è®©å¤šå®¶å·¥å‚åˆå¹¶æˆä¸€å®¶å·¥å‚ã€‚é‚£å°±æ˜¯æ¥ä¸‹æ¥è¦è®²çš„ç®€å•å·¥å‚æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰æ˜¯ç±»çš„åˆ›å»ºæ¨¡å¼ï¼Œåˆå«åšé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚å°±æ˜¯ç”±ä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚é‡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚ä¸ä¸Šé¢å·¥å‚æ¨¡å¼çš„åŒºåˆ«å°±æ˜¯å®ƒåªéœ€è¦ä¸€ä¸ªå·¥å‚ã€‚ UMLç±»å›¾ æŠ½è±¡äº§å“ç±»ï¼ˆAbstractProductï¼‰ï¼šç±»ä¸­å®šä¹‰æŠ½è±¡ä¸€äº›æ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­å…·ä½“å®ç°ã€‚ å…·ä½“äº§å“ç±»ï¼ˆConcreteProductï¼‰ï¼šå®ç°åŸºç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚ å·¥å‚ç±»ï¼ˆFactoryï¼‰ï¼šç”¨ä»¥å°è£…å®ä¾‹åŒ–å¯¹è±¡è¿‡ç¨‹ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°å†³å®šç”Ÿäº§ä¸åŒçš„äº§å“ã€‚ åˆ©ç”¨ç®€å•å·¥å‚çš„å†™æ³•ï¼šå…¶ä»–åœ°æ–¹ä¸å˜ï¼Œå°†å·¥å‚åˆå¹¶æˆä¸€ä¸ªå·¥å‚ç±»ï¼Œå¹¶åœ¨å†…éƒ¨å†™ä¸ªé™æ€æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°å†³å®šåˆ›å»ºä¸åŒçš„è‹±é›„å¯¹è±¡ï¼š12345678910111213141516171819202122232425262728293031public class SimpleFactory &#123; public static Hero create(String name) &#123; Hero hero = null; switch (Who.valueOf(name)) &#123; case Ashe: // è‰¾å¸Œ hero = new Ashe(); break; case Yasuo: // äºšç´¢ hero = new Yasuo(); break; case Garen: // å¾·ç› hero = new Garen(); break; case Lux: // å…‰è¾‰ hero = new Lux(); break; case Yi: // å‰‘åœ£ hero= new Yi(); break; &#125; return hero; &#125;&#125; å®¢æˆ·ç«¯ä»£ç åšç®€å•ä¿®æ”¹ï¼š12345678910public class Client4 &#123; public static void main(String[] args) &#123; Scanner can = new Scanner(System.in); String name = can.next(); can.close(); // æ ¹æ®ä¼ å…¥çš„åå­—æ„å»ºä¸åŒçš„è‹±é›„ã€‚ Hero hero = SimpleFactory.create(name); hero.say(); &#125;&#125; å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ï¼Œåªè¦ä¼ å…¥å‚æ•°å¾—åˆ°ä¸åŒå¯¹è±¡ã€‚ ä½†æ˜¯ç®€å•å·¥å‚æ˜¯å›ºå®šçš„ï¼Œå¦‚æœå¢å‡è‹±é›„ä»–å°±è¦ä¿®æ”¹ã€‚ä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚è¿™æ—¶å€™ç”¨å‰é¢å·¥å‚æ¨¡å¼å¥½ï¼ŒæŠŠä¿®æ”¹è½¬ç§»ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸ä¿®æ”¹å·¥å‚ä»£ç ã€‚ è¿è¡Œç»“æœé€‰ä¸ªç›–ä¼¦è¯•è¯•ï¼š ä¸æµªäº†ï¼Œä¸æµªäº†ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼è¯·çœ‹ä¸‹ç¯‡ã€è®¾è®¡æ¨¡å¼ã€‘æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚ é™„ä»¶è®¾è®¡æ¨¡å¼DemoGitHubæºç ï¼šhttps://github.com/wzmyyj/Design-Pattern","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wzmyyj.top/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"ã€è®¾è®¡æ¨¡å¼ã€‘å•ä¾‹æ¨¡å¼","date":"2018-04-17T13:20:06.000Z","path":"2018/04/17/design_2/","text":"å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚åœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”è¯¥å®ä¾‹æ˜“äºå¤–ç•Œè®¿é—®ï¼Œä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æºã€‚ æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚ å®ƒå¿…é¡»è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹ã€‚ å®ƒå¿…é¡»è‡ªè¡Œå‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚ å•ä¾‹æ¨¡å¼å…³é”®ç‚¹ï¼š æ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼ˆä¸è®©å¤–éƒ¨åˆ›å»ºæ­¤ç±»å¯¹è±¡ï¼‰ã€‚ é€šè¿‡ä¸€ä¸ªé™æ€æ–¹æ³•æˆ–æšä¸¾è¿”å›å•ä¾‹ç±»å¯¹è±¡ã€‚ å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¡®ä¿å•ä¾‹ï¼ˆéš¾ç‚¹ï¼‰ã€‚ ååºåˆ—åŒ–ä¸ä¼šé‡æ–°æ„å»ºå¯¹è±¡ã€‚ é¥¿æ±‰å¼12345678910111213141516171819public class Singleton &#123; // å•ä¾‹å¯¹è±¡ private final static Singleton INSTANCE = new Singleton(); // æˆ– // private final static Singleton INSTANCE; // static &#123; // INSTANCE = new Singleton(); // &#125; // ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123; &#125; // å…¬æœ‰é™æ€æ–¹æ³•ç”¨äºè·å–å•ä¾‹å¯¹è±¡ public static Singleton getInstance() &#123; return INSTANCE; &#125;&#125; çº¿ç¨‹å®‰å…¨ã€‚ä½†æ˜¯æ²¡ä½¿ç”¨å®ƒæ—¶ï¼Œå°±å·²ç»å»ºç«‹äº†å¯¹è±¡ï¼Œå¼€é”€å†…å­˜ã€‚ æ‡’æ±‰å¼12345678910111213141516public class Singleton &#123; // å•ä¾‹å¯¹è±¡ private static Singleton INSTANCE = null; // ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123; &#125; // synchronizedå…³é”®å­—ä¿®é¥°é™æ€æ–¹æ³• public static synchronized Singleton getInstance() &#123; if (null == INSTANCE) &#123;// ç©ºå€¼åˆ¤æ–­ INSTANCE = new Singleton(); &#125; return INSTANCE; &#125;&#125; åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ—¶ï¼Œåˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚synchronizedå…³é”®å­—ä¿®é¥°ï¼Œä½¿getInstance()æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ã€‚ä¿è¯å¤šçº¿ç¨‹æƒ…å†µä¸‹å•ä¾‹å¯¹è±¡çš„å”¯ä¸€ã€‚ä½†æ˜¯ï¼ŒåŒæ­¥ä¼šè€—è´¹èµ„æºã€‚ åŒæ£€é”å¼ï¼ˆDouble Check Lockï¼ˆDCLï¼‰ï¼‰1234567891011121314151617181920public class Singleton &#123; // å•ä¾‹å¯¹è±¡ï¼Œvolatileå…³é”®å­—ä¿è¯INSTANCEçš„åŸå­æ€§ private volatile static Singleton INSTANCE = null; // ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123; &#125; // ä¸¤æ¬¡ç©ºå€¼æ£€æŸ¥ï¼Œsynchronizedå…³é”®å­—åŒæ­¥ public static Singleton getInstance() &#123; if (null == INSTANCE) &#123; synchronized (Singleton.class) &#123; if (null == INSTANCE) &#123; INSTANCE = new Singleton(); &#125; &#125; &#125; return INSTANCE; &#125;&#125; è¯­å¥INSTANCE = new Singleton();åœ¨ç¼–è¯‘æ—¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š ç»™Singletonçš„å®ä¾‹åˆ†é…å†…å­˜ã€‚ è°ƒç”¨Singleton()çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å­—æ®µã€‚ å°†INSTANCE å¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ­¤æ—¶å¯¹è±¡éç©ºï¼‰ã€‚ Javaç¼–è¯‘å™¨å…è®¸å¤„ç†å™¨ä¹±åºæ‰§è¡Œã€‚ä¸Šè¯‰çš„2ï¼Œ3ä¸¤æ­¥çš„é¡ºåºå¯èƒ½è¢«æ‰“ä¹±ã€‚æ‰“ä¹±åï¼Œéç©ºåˆ¤æ–­çš„çº¿ç¨‹ä¸å®‰å…¨ã€‚åœ¨JDK1.5ä¹‹åï¼Œè°ƒæ•´äº†JVMï¼Œå…·ä½“åŒ–äº†volatileå…³é”®å­—ï¼Œè¡¨ç¤ºæ­¤æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œä¸èƒ½ä¸­é—´è¢«åˆ†å‰²æ‰§è¡Œã€‚ä½¿ç”¨volatileå…³é”®å­—ä¼šå½±å“æ€§èƒ½ã€‚ é™æ€å†…éƒ¨ç±»123456789101112131415public class Singleton &#123; // å†…éƒ¨ç±»ï¼ŒåŒ…å«å•ä¾‹çš„å¯¹è±¡ private static class SingletonHolder &#123; public static final Singleton INSTANCE = new Singleton(); &#125; // ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123; &#125; // å…¬æœ‰é™æ€æ–¹æ³•ç”¨äºè·å–å•ä¾‹å¯¹è±¡ public static final Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125;&#125; ç¬¬ä¸€æ¬¡åŠ è½½Singletonæ—¶ï¼ŒSingletonHolderä¸ä¼šè¢«åŠ è½½ã€‚åªç”¨è°ƒç”¨getInstance()æ—¶ï¼Œæ‰åŠ è½½SingletonHolderï¼Œå¹¶åˆ›å»ºINSTANCEã€‚æ¨èå¤§å®¶ä½¿ç”¨ã€‚ æšä¸¾å¼123public enum SingletonEnum &#123; INSTANCE;&#125; è™½è¯´ä»£ç ç®€å•ï¼Œenumçš„å®è´¨ä¹Ÿæ˜¯classï¼ˆç¼–è¯‘æ—¶ï¼Œä¼šå…ˆç¿»è¯‘æˆä¸€ä¸ªclassï¼‰ã€‚ä¼˜ç‚¹æ˜¯ååºåˆ—åŒ–ä¹Ÿä¸ä¼šé‡æ–°ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚ å‰å‡ ç§æ–¹å¼ï¼Œå¦‚æœè¦é¿å…ååºåˆ—åŒ–ä¹Ÿä¸ä¼šé‡æ–°ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚éœ€è¦é‡å†™ï¼š123private Object readResolve() throws ObjectStreamException&#123; return INSTANCE;&#125; å•ä¾‹ç®¡ç†ç±»ä¸€ä¸ªç¨‹åºå¯èƒ½æœ‰å¤šä¸ªå•ä¾‹å¯¹è±¡ã€‚å…ˆå»ºç«‹ä¸€ä¸ªä¸Šè¯‰ç®¡ç†ç±»ã€‚1234567891011121314151617181920public class SingletonManager &#123; // å®¹å™¨ private static Map&lt;String, Object&gt; objMap = new HashMap&lt;String, Object&gt;(); // ç§æœ‰æ„é€ æ–¹æ³• private SingletonManager() &#123; &#125; // æ³¨å†Œå•ä¾‹ public static void ascendSingleton(String key, Object instance) &#123; if (!objMap.containsKey(key)) &#123; objMap.put(key, instance); &#125; &#125; // è·å¾—å•ä¾‹å¯¹è±¡ public static Object getInstance(String key) &#123; return objMap.get(key); &#125;&#125; é€šè¿‡æ³¨å†Œï¼Œå¯ä»¥ç®¡ç†å¤šç§ç±»å‹çš„å•ä¾‹ï¼Œä½¿ç”¨ç»Ÿä¸€æ¥å£ï¼Œéšè—å…·ä½“å®ç°ã€‚ä½¿ç”¨æ—¶ï¼š12//æ³¨å†Œå•ä¾‹SingletonManager.ascendSingleton(\"SingletonKey\",Singleton.getInstance()); 12//è·å¾—å•ä¾‹å¯¹è±¡Singleton singleton = SingletonManager.getInstance(\"SingletonKey\"); ä¼˜ç‚¹ åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå…¨å±€ä½¿ç”¨ã€‚ åªéœ€è¦å»ºç«‹ä¸€æ¬¡ï¼Œå ä¸€ä¸ªå†…å­˜ï¼ŒèŠ‚çº¦èµ„æºã€‚ ç¼ºç‚¹ æ²¡æœ‰æ¥å£ï¼Œéš¾ä»¥æ‰©å±•ã€‚ ç”Ÿå‘½å‘¨æœŸé•¿ï¼Œå¦‚æœå¼•ç”¨çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ä¼šå†…å­˜æ³„æ¼ã€‚ è¡¥å……é€šè¿‡Javaåå°„æœºåˆ¶æ˜¯èƒ½å¤Ÿå®ä¾‹åŒ–æ„é€ æ–¹æ³•ä¸ºprivateçš„ç±»çš„ï¼Œé‚£åŸºæœ¬ä¸Šä¼šä½¿æ‰€æœ‰çš„Javaå•ä¾‹å®ç°å¤±æ•ˆã€‚ é™„ä»¶è®¾è®¡æ¨¡å¼DemoGitHubæºç ï¼šhttps://github.com/wzmyyj/Design-Pattern","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wzmyyj.top/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"ã€è®¾è®¡æ¨¡å¼ã€‘é¢å‘å¯¹è±¡å…­å¤§åŸåˆ™","date":"2018-04-14T16:08:04.000Z","path":"2018/04/15/design_1/","text":"è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚è®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ã€‚è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ›å»ºå‹æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼ã€‚ 23ç§è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ï¼Œå…±5ç§ï¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€‚ ç»“æ„å‹æ¨¡å¼ï¼Œå…±7ç§ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚ è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…±11ç§ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€‚ å…­å¤§åŸåˆ™1ï¼Œå•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle, SRPï¼‰å®šä¹‰ï¼šä¸€ä¸ªç±»åº”åªåŒ…å«å•ä¸€çš„èŒè´£ã€‚ å¦‚æœä¸€ä¸ªç±»èŒè´£è¿‡å¤šï¼Œä»£ç é‡å°±å¤šï¼Œè€Œä½¿ç”¨èµ·æ¥æ˜¾å¾—è¿‡åˆ†å†—ä½™ï¼Œä¸åˆ©äºå¤ç”¨ã€‚ å¦‚æœä¿®æ”¹æŸä¸ªèŒè´£ï¼Œå¯èƒ½å½±å“å¦ä¸€ä¸ªèŒè´£ã€‚ 2ï¼Œå¼€æ”¾å°é—­åŸåˆ™(Open - ClosedPrinciple ,OCP)å®šä¹‰ï¼šä¸€ä¸ªæ¨¡å—ã€ç±»ã€å‡½æ•°åº”å½“æ˜¯å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚ ä¿®æ”¹åŸæœ‰çš„ä»£ç å¯èƒ½ä¼šå¯¼è‡´åŸæœ¬æ­£å¸¸çš„åŠŸèƒ½å‡ºç°é—®é¢˜ã€‚ å½“éœ€æ±‚æ”¹å˜æ—¶ï¼Œæœ€å¥½é€šè¿‡æ‰©å±•æ¥å®ç°ï¼Œå¢åŠ æ–°çš„æ–¹æ³•æˆ–ç±»æ»¡è¶³éœ€æ±‚ï¼Œè€Œä¸æ˜¯å»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚ 3ï¼Œé‡Œæ°ä»£æ¢åŸåˆ™( Liskov Substitution Principle ,LSP )å®šä¹‰ï¼šä½¿ç”¨çˆ¶ç±»çš„åœ°æ–¹èƒ½å¤Ÿä½¿ç”¨å­ç±»æ¥æ›¿æ¢ï¼Œåè¿‡æ¥ï¼Œåˆ™ä¸è¡Œã€‚ ä½¿ç”¨å­ç±»å¯¹è±¡å»æ›¿æ¢çˆ¶ç±»å¯¹è±¡ï¼Œç¨‹åºå°†ä¸ä¼šäº§ç”Ÿé”™è¯¯ã€‚ ç¨‹åºä¸­å°½é‡ä½¿ç”¨åŸºç±»ç±»å‹æ¥å¯¹å¯¹è±¡è¿›è¡Œå®šä¹‰ï¼Œå¦‚çˆ¶ç±»çš„å­ç±»å¼•ç”¨ï¼Œè€Œåœ¨è¿è¡Œæ—¶å†ç¡®å®šå…¶å­ç±»ç±»å‹ï¼Œç”¨å­ç±»å¯¹è±¡æ¥æ›¿æ¢çˆ¶ç±»å¯¹è±¡ã€‚ 4ï¼Œä¾èµ–å€’è½¬åŸåˆ™( Dependence Inversion Principle ,DIP )å®šä¹‰ï¼šæŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”å½“ä¾èµ–äºæŠ½è±¡ã€‚ å³è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å…·ä½“å®ç°å»ç¼–ç¨‹ã€‚ é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œåº”è¯¥å»ä¾èµ–æŠ½è±¡ã€‚ æ–¹æ³•å®šä¹‰æ—¶ï¼Œä¼ å…¥å¯¹è±¡ç”¨æŠ½è±¡ç±»å‹ï¼Œå®é™…ä½¿ç”¨æ—¶ä¼ å…¥å­ç±»å¯¹è±¡ã€‚ 5ï¼Œæ¥å£éš”ç¦»æ³•åˆ™(Interface Segregation Principleï¼ŒISLï¼‰å®šä¹‰ï¼šä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚ ä¸€ä¸ªç±»ä¸åº”è¯¥ä¾èµ–ä»–ä¸éœ€è¦çš„æ¥å£ï¼Œæ¥å£çš„æ–¹æ³•å…¨è¦ç”¨å¾—åˆ°ã€‚ æ¥å£ç²’åº¦è¦å°½å¯èƒ½å°ï¼Œå°½é‡ä¸èƒ½å†åˆ†å‰²ã€‚ä¸€ä¸ªæ¥å£çš„æ–¹æ³•è¿‡å¤šï¼Œå¯ä»¥æ‹†æˆå¤šä¸ªæ¥å£ã€‚ 6ï¼Œè¿ªç±³ç‰¹æ³•åˆ™(Law of Demeter, LoD)å®šä¹‰ï¼šä¸€ä¸ªç±»å°½é‡ä¸è¦ä¸å…¶ä»–ç±»å‘ç”Ÿå…³ç³» ä¸€ä¸ªç±»å¯¹å…¶ä»–ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ï¼Œè€¦åˆè¶Šå°ã€‚å¯¼å…¥çš„ä¸œè¥¿è¶Šå°‘è¶Šå¥½ã€‚ å½“ä¿®æ”¹ä¸€ä¸ªç±»æ—¶ï¼Œå…¶ä»–ç±»çš„å½±å“å°±è¶Šå°ï¼Œå‘ç”Ÿé”™è¯¯çš„å¯èƒ½æ€§å°±è¶Šå°ã€‚ é™„ä»¶è®¾è®¡æ¨¡å¼DemoGitHubæºç ï¼šhttps://github.com/wzmyyj/Design-Pattern","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wzmyyj.top/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"ã€ç®—æ³•ã€‘å½’å¹¶æ’åº","date":"2018-04-14T13:35:08.000Z","path":"2018/04/14/java_1/","text":"å½’å¹¶æ’åºå½’å¹¶æ’åºï¼ˆMERGE-SORTï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•,è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶ã€‚ å½’å¹¶æ’åºç®—æ³•ç¨³å®šï¼Œæ•°ç»„éœ€è¦O(n)çš„é¢å¤–ç©ºé—´ï¼Œé“¾è¡¨éœ€è¦O(log(n))çš„é¢å¤–ç©ºé—´ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlog(n))ï¼Œç®—æ³•ä¸æ˜¯è‡ªé€‚åº”çš„ï¼Œä¸éœ€è¦å¯¹æ•°æ®çš„éšæœºè¯»å–ã€‚ å·¥ä½œåŸç† ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ã€‚ è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚ æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ã€‚ é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ã€‚ å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class MergeSortTest &#123; public static void main(String[] args) &#123; //æµ‹è¯•æ•°æ® int A[] = &#123; 1, 6, 4, 5, 2, 9, 7, 23, 56, 43, 99 &#125;; // æ’åºå‰ System.out.println(\"æ’åºå‰ï¼š\"); for (int a : A) &#123; System.out.print(a + \" \"); &#125; System.out.println(); // æ’åº mergeSort(A); // æ’åºå System.out.println(\"æ’åºåï¼š\"); for (int a : A) &#123; System.out.print(a + \" \"); &#125; System.out.println(); &#125; // æ’åºå…¥å£ public static void mergeSort(int[] A) &#123; sort(A, 0, A.length - 1); &#125; //é€’å½’ public static void sort(int[] A, int start, int end) &#123; if (start &gt;= end) return; // æ‰¾å‡ºä¸­é—´ç´¢å¼• int mid = (start + end) / 2; // å¯¹å·¦è¾¹æ•°ç»„è¿›è¡Œé€’å½’ sort(A, start, mid); // å¯¹å³è¾¹æ•°ç»„è¿›è¡Œé€’å½’ sort(A, mid + 1, end); // åˆå¹¶ merge(A, start, mid, end); &#125; // å°†ä¸¤ä¸ªæ•°ç»„è¿›è¡Œå½’å¹¶ï¼Œå½’å¹¶å‰é¢2ä¸ªæ•°ç»„å·²æœ‰åºï¼Œå½’å¹¶åä¾ç„¶æœ‰åº public static void merge(int[] A, int start, int mid, int end) &#123; int[] temp = new int[A.length];// ä¸´æ—¶æ•°ç»„ int k = 0; int i = start; int j = mid + 1; while (i &lt;= mid &amp;&amp; j &lt;= end) &#123; // ä»ä¸¤ä¸ªæ•°ç»„ä¸­å–å‡ºè¾ƒå°çš„æ”¾å…¥ä¸´æ—¶æ•°ç»„ if (A[i] &lt;= A[j]) &#123; temp[k++] = A[i++]; &#125; else &#123; temp[k++] = A[j++]; &#125; &#125; // å‰©ä½™éƒ¨åˆ†ä¾æ¬¡æ”¾å…¥ä¸´æ—¶æ•°ç»„ï¼ˆå®é™…ä¸Šä¸¤ä¸ªwhileåªä¼šæ‰§è¡Œå…¶ä¸­ä¸€ä¸ªï¼‰ while (i &lt;= mid) &#123; temp[k++] = A[i++]; &#125; while (j &lt;= end) &#123; temp[k++] = A[j++]; &#125; // å°†ä¸´æ—¶æ•°ç»„ä¸­çš„å†…å®¹æ‹·è´å›åŸæ•°ç»„ä¸­ ï¼ˆleft-rightèŒƒå›´çš„å†…å®¹ï¼‰ for (int m = 0; m &lt; k; m++) &#123; A[m + start] = temp[m]; &#125; &#125;&#125; å¯¹äºç®—æ³•ï¼Œç†è§£åŸç†å¾ˆé‡è¦ã€‚ã€‚ã€‚ é™„é¡µGitHubæºç ï¼šhttps://github.com/wzmyyj/MergeSort","tags":[{"name":"java","slug":"java","permalink":"https://wzmyyj.top/tags/java/"}]},{"title":"L2TP/IPSecé…ç½®æ•™ç¨‹","date":"2018-04-10T13:40:49.000Z","path":"2018/04/10/it_2/","text":"L2TP/IPSecL2TPæ˜¯ä¸€ç§å·¥ä¸šæ ‡å‡†çš„Internetéš§é“åè®®ï¼ŒåŠŸèƒ½å¤§è‡´å’ŒPPTPåè®®ç±»ä¼¼ï¼Œæ¯”å¦‚åŒæ ·å¯ä»¥å¯¹ç½‘ç»œæ•°æ®æµè¿›è¡ŒåŠ å¯†ã€‚ä¸è¿‡ä¹Ÿæœ‰ä¸åŒä¹‹å¤„ï¼Œæ¯”å¦‚PPTPè¦æ±‚ç½‘ç»œä¸ºIPç½‘ç»œï¼ŒL2TPè¦æ±‚é¢å‘æ•°æ®åŒ…çš„ç‚¹å¯¹ç‚¹è¿æ¥ï¼›PPTPä½¿ç”¨å•ä¸€éš§é“ï¼ŒL2TPä½¿ç”¨å¤šéš§é“ï¼›L2TPæä¾›åŒ…å¤´å‹ç¼©ã€éš§é“éªŒè¯ï¼Œè€ŒPPTPä¸æ”¯æŒã€‚ æœåŠ¡å™¨é¦–å…ˆï¼Œéœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚æˆ‘é‡‡ç”¨çš„æ˜¯VultræœåŠ¡å™¨ã€‚ é…ç½®æœåŠ¡å™¨ç«¯æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯Githubä¸Šsetup-ipsec-vpnè¿™ä¸ªè„šæœ¬å®‰è£…æ–¹æ³•ï¼Œä¸éœ€è¦ç‰¹åˆ«é…ç½®ï¼Œç®€å•å®‰è£…ã€‚ 1, Ubuntu &amp; Debianï¼š1, è¿œç¨‹è¿æ¥åˆ°ä¸Šè¯‰ä¹°çš„æœåŠ¡å™¨ã€‚ï¼ˆé»˜è®¤çš„ç”¨æˆ·åæ˜¯rootï¼‰ 1ssh root@æœåŠ¡å™¨ipåœ°å€ è¿™é‡Œï¼Œä¸‹ä¸€æ­¥ä¼šè®©ä½ è¾“å…¥å¯†ç ã€‚å¤åˆ¶ç²˜è´´ï¼ˆå³é”®ç²˜è´´ï¼Œä¸èƒ½Ctrl+vï¼‰å³å¯ã€‚ï¼ˆæ§åˆ¶å°ä¸Šä¸ä¼šæ˜¾ç¤ºå‡ºå¯†ç ï¼Œç²˜è´´åç›´æ¥å›è½¦å³å¯ï¼‰ ç­‰å¾…è¿æ¥å®Œæˆã€‚ 2, åˆ·æ–°ä¸€ä¸‹ã€‚å¤åˆ¶ç²˜è´´ä¸‹è¡Œä»£ç ã€‚1sudo apt-get update 3, å®‰è£…è„šæœ¬ã€‚å¤åˆ¶ç²˜è´´ä¸‹è¡Œä»£ç ã€‚ 1wget https://git.io/vpnsetup -O vpnsetup.sh &amp;&amp; sudo sh vpnsetup.sh ç­‰å¾…å®‰è£…å®Œæˆï¼Œéœ€è¦ç‚¹ç‚¹æ—¶é—´ã€‚ å®‰è£…å¥½åï¼Œä¼šè‡ªåŠ¨åˆ†é… Usernameï¼ŒPasswordï¼ŒPre-Shared keyï¼ˆä¸€äº›å‚æ•°ï¼Œé»˜è®¤æ˜¯ä¸€äº›éšæœºæ•°ã€‚ï¼‰ 4, ä¿®æ”¹å‚æ•°ã€‚ 123456#æ‰€æœ‰å˜é‡å€¼å¿…é¡»ç”¨ 'å•å¼•å·' æ‹¬èµ·æ¥#*ä¸è¦* åœ¨å€¼ä¸­ä½¿ç”¨è¿™äº›å­—ç¬¦ï¼š \\ \" ' wget https://git.io/vpnsetup -O vpnsetup.sh&amp;&amp;sudo \\VPN_IPSEC_PSK='ä½ çš„IPsecé¢„å…±äº«å¯†é’¥'\\VPN_USER='ä½ çš„VPNç”¨æˆ·å'\\VPN_PASSWORD='ä½ çš„VPNå¯†ç ' sh vpnsetup.sh 2, CentOS &amp; RHELï¼šé¦–å…ˆï¼Œæ›´æ–°ä½ çš„ç³»ç»Ÿã€‚ç¬¬ä¸€æ­¥æ”¹æˆï¼š1yum update é‡å¯ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ¨èã€‚ æŒ‰ç…§ä¸ä¸Šé¢ç›¸åŒçš„æ­¥éª¤ï¼Œä½†æ˜¯ å°† https://git.io/vpnsetup æ¢æˆ https://git.io/vpnsetup-centosã€‚ åˆ°æ­¤ï¼Œä½ çš„L2TP/IPSecç±»å‹VPNé…ç½®å®Œæˆã€‚ é…ç½®å®¢æˆ·ç«¯1, å®‰å“æ‰‹æœºè®¾ç½®â€“&gt;è¿æ¥â€“&gt;VPNè¿æ¥â€“&gt;æ·»åŠ è¿æ¥â€“&gt;åç§°éšä¾¿å–â€“&gt;ç±»å‹é€‰L2TP/IPSec PSKâ€“&gt;è¾“å…¥IPåœ°å€ï¼Œé¢„ç”¨å…±äº«å¯†é’¥ï¼ˆä¸æ˜¯L2TPå¯†é’¥ï¼Œæœªä½¿ç”¨çš„ä¸è¦å¡«ï¼‰ï¼Œç”¨æˆ·åï¼Œå¯†ç â€“&gt;è¿æ¥ï¼ˆå¦‚æœç¬¬ä¸€æ¬¡è¿æ¥å¤±è´¥ï¼Œé‡è¯•å¯èƒ½ä»å¤±è´¥ï¼Œå»ºè®®åˆ é™¤è¿æ¥ï¼Œé‡æ–°é…ç½®ï¼‰ã€‚ 2, Windowsç”µè„‘æ‰“å¼€ç½‘ç»œå…±äº«ä¸­å¿ƒâ€“&gt;è®¾ç½®æ–°çš„è¿æ¥æˆ–ç½‘ç»œâ€“&gt;è¿æ¥åˆ°å·¥ä½œåŒºâ€“&gt;åˆ›å»ºæ–°çš„è¿æ¥â€“&gt;ä½¿ç”¨æˆ‘çš„Internetè¿æ¥â€“&gt;å¡«å†™åœ°å€å’Œåç§°â€“&gt;å¡«å†™ç”¨æˆ·åå’Œå¯†ç ï¼ˆåŸŸä¸è¦å¡«ï¼‰â€“&gt;ä¿å­˜è¿æ¥ï¼ˆä¸è¦ç«‹åˆ»è¿æ¥ï¼‰â€“&gt;ç”µè„‘ä¸Šå‡ºç°æ–°çš„è¿æ¥â€“&gt;å³é”®â€“&gt;å±æ€§â€“&gt;å®‰å…¨â€“&gt;VPNç±»å‹ï¼ˆé€‰L2TP/IPSecï¼‰â€“&gt;é«˜çº§è®¾ç½®â€“&gt;å¡«å†™å¯†é’¥â€“&gt;ä¿å­˜ï¼Œè¿æ¥ã€‚ ï¼ˆä¸åŒwinç‰ˆæœ¬ä¼šæœ‰æ‰€ä¸åŒã€‚ï¼‰ 3, å…¶ä»–ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ã€‚ ä½œç”¨å­¦ä¹ ä½¿äººå¿«ä¹ï¼","tags":[{"name":"IT","slug":"IT","permalink":"https://wzmyyj.top/tags/IT/"}]},{"title":"ä¸€èµ·æ¥æ•´ä¸ªæœåŠ¡å™¨ç©ç©","date":"2018-04-07T08:11:50.000Z","path":"2018/04/07/it_1/","text":"æœåŠ¡å™¨Vultræ˜¯ä¸€å®¶æœåŠ¡å™¨å‚å•†,è¿™ä¸ªVPSæœåŠ¡å•†æ˜¯æŒ‰å°æ—¶æ”¶è´¹çš„ã€‚è¿™æ„å‘³ç€,æ¶è®¾ä¸€å°VPSçš„æˆæœ¬è¾ƒä½ã€‚ ##è´­ä¹°æ­¥éª¤ 1, ç™»å½•å®˜ç½‘ï¼šhttps://www.vultr.com/ã€‚æ³¨å†Œä¸€ä¸ªè‡ªå·±çš„è´¦å·ã€‚ 2, ç¡®å®šéœ€è¦çš„æœåŠ¡å™¨é…ç½®ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åªéœ€è¦æœ€ä½é…ç½®é€‰æ‹©$2.5/æœˆï¼ˆå¤§çº¦15å…ƒ/æœˆï¼‰çš„å³å¯ã€‚ï¼ˆå¥½å¤šå¯èƒ½å”®å®Œï¼Œåªæœ‰Miamiè¿˜æœ‰$2.5çš„ï¼‰ã€‚ç³»ç»Ÿé€‰æ‹©æ¨èUbuntu ï¼ˆ16.04æˆ–14.04ï¼‰ã€‚ 2.1, åœ°ç‚¹ 2.2, ç³»ç»Ÿ 2.3, é™„åŠ æœåŠ¡ 2.4, ä¸»æœºå 3, æ”¯ä»˜ã€‚é€‰æ‹©æ”¯ä»˜å®æ‰«ç æ”¯ä»˜ã€‚è‡³å°‘æ”¯ä»˜$10ï¼ˆ60å¤šå…ƒï¼‰ã€‚ 4, è´­ä¹°æ­¥éª¤2é€‰çš„æœåŠ¡å™¨ã€‚ åˆ°æ­¤ã€‚ä½ çš„æœåŠ¡å™¨è´­ä¹°å®Œæ¯•ã€‚ ç®¡ç†VultræœåŠ¡å™¨1, æœåŠ¡å™¨ç®¡ç†ç•Œé¢ã€‚ é‡ç‚¹çœ‹IDï¼Œç”¨æˆ·åå’Œå¯†ç ï¼Œè¿æ¥æœåŠ¡å¿…é¡»ã€‚","tags":[{"name":"IT","slug":"IT","permalink":"https://wzmyyj.top/tags/IT/"}]}]