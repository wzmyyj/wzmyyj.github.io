<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="good good study"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>【设计模式】抽象工厂模式 | wzmyyj</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">【设计模式】抽象工厂模式</h1><a id="logo" href="/.">wzmyyj</a><p class="description">Let life be beautiful like summer flowers.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">【设计模式】抽象工厂模式</h1><div class="post-meta"><a href="/2018/05/19/design_4/#comments" class="comment-count"></a><p><span class="date">May 19, 2018</span></p></div><div class="post-content"><h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><p> <strong>抽象工厂模式</strong>（Abstract Factory Pattern）是所有形态的<a href="https://www.jianshu.com/p/539975502ad1" target="_blank" rel="noopener">工厂模式</a>中最为抽象和最具一般性的一种形态。抽象工厂模式是指当有多个抽象角色时，使用的一种工厂模式。抽象工厂模式可以向客户端提供一个接口，使客户端在不必指定产品的具体的情况下，创建多个<a href="https://baike.sogou.com/v10638486.htm" target="_blank" rel="noopener">产品族</a>中的产品对象。<br><a id="more"></a></p>
<ul>
<li>如果读者不了解<strong>工厂模式</strong>，请看上篇<a href="https://www.jianshu.com/p/539975502ad1" target="_blank" rel="noopener">【设计模式】工厂模式</a>。</li>
</ul>
<h4 id="UML类图"><a href="#UML类图" class="headerlink" title="UML类图"></a>UML类图</h4><p><img src="https://upload-images.jianshu.io/upload_images/3262738-6c0756dcdf876de8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="抽象工厂模式"></p>
<ol>
<li>抽象产品类（AbstractProductX）：<strong>多个系列</strong>抽象产品（X=A,B,C…）。</li>
<li>具体产品类（ProductX）：实现基类中的抽象方法（多个不同的具体产品，X=1,2,3..）。</li>
<li>抽象工厂类或接口（AbstractFactory）：定义具体工厂的<strong>多个</strong>公共接口（拥有<strong>各系列</strong>产品创建的接口）。</li>
<li>具体工厂类（FactoryX）：定义创建<strong>各系列</strong>具体产品实例的方法。（每个工厂对应一种具体产品，X=1,2,3…）。</li>
</ol>
<h4 id="与工厂模式的区别"><a href="#与工厂模式的区别" class="headerlink" title="与工厂模式的区别"></a>与工厂模式的区别</h4><blockquote>
<ol>
<li><strong>工厂模式</strong>的工厂只能生产一个系列的产品。而<strong>抽象工厂模式</strong>的工厂可以生产一个或多个系列的产品。</li>
<li><strong>工厂模式</strong>关注的是一个系列的不同种产品。而<strong>抽象工厂模式</strong>关注的是不同系列产品。</li>
</ol>
</blockquote>
<h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>接着上篇<a href="https://www.jianshu.com/p/539975502ad1" target="_blank" rel="noopener">【设计模式】工厂模式</a>的话题。</p>
<p>场景：玩《英雄联盟》（5v5 moba端游）新开一局游戏，游戏开始每个玩家需要选一个英雄之外，还需要选择天赋，召唤师技能。也就是需要创建三种产品。并且，在不同玩法下，比如召唤师峡谷（自选或排位等）与哭嚎深渊（大乱斗），创建的产品也略微有所差异，比如大乱斗下英雄一开始就3级，召唤师技能没有传送，有雪球。结构上：</p>
<ol>
<li>产品（三个系列）：英雄，天赋，召唤师技能。</li>
<li>工厂（两个）：召唤师峡谷工厂，哭嚎深渊工厂。</li>
</ol>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><p>英雄基类（新增<code>lv</code>成员变量和<code>print()</code>方法）<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Hero</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> lv;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">say</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"name:"</span> + name);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"lv:"</span> + lv);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>只考虑一种英雄，比如寒冰射手-艾希。<br><img src="https://upload-images.jianshu.io/upload_images/3262738-01365eddc5e014f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="艾希"></p>
<p>艾希类：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Ashe</span> <span class="keyword">extends</span> <span class="title">Hero</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 简化构造方法，只弄个名字。</span></span><br><span class="line">    public <span class="type">Ashe</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">"寒冰射手-艾希"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 艾希台词（不重要）</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void say() &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(name + <span class="string">"："</span> + <span class="string">"世间万物皆系于一箭之上。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>召唤师峡谷中的艾希：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Ashe_XiaGu</span> <span class="keyword">extends</span> <span class="title">Ashe</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在召唤师峡谷中初始等级1级。</span></span><br><span class="line">    public <span class="type">Ashe_XiaGu</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.lv = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>哭嚎深渊中的艾希：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Ashe_ShenYuan</span> <span class="keyword">extends</span> <span class="title">Ashe</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在哭嚎深渊中初始等级3级。</span></span><br><span class="line">    public <span class="type">Ashe_ShenYuan</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.lv = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>天赋基类：（就简单点只用打印信息区分下好了）<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Talent</span> &#123;</span><br><span class="line">    <span class="comment">// 只打印一下信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>两个天赋实现类：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Talent_XiaGu</span> <span class="keyword">extends</span> <span class="title">Talent</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void print() &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"召唤师峡谷中的天赋"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Talent_ShenYuan</span> <span class="keyword">extends</span> <span class="title">Talent</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void print() &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"哭嚎深渊中的天赋"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>召唤师技能基类：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Skill</span> &#123;</span><br><span class="line">    <span class="comment">// 召唤师技能种类</span></span><br><span class="line">    <span class="keyword">protected</span> String[] skill_type;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 选择两种召唤师技能</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">choose</span>(<span class="params"><span class="keyword">int</span> i, <span class="keyword">int</span> j</span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"你选择了"</span> + skill_type[i] + <span class="string">"和"</span> + skill_type[j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>两个召唤师技能实现类：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Skill_XiaGu</span> <span class="keyword">extends</span> <span class="title">Skill</span> </span>&#123;</span><br><span class="line">    public <span class="type">Skill_XiaGu</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.skill_type = <span class="keyword">new</span> <span class="type">String</span>[] &#123; <span class="string">"闪现"</span>, <span class="string">"治疗"</span>, <span class="string">"传送"</span>, <span class="string">"净化"</span>, <span class="string">"光盾"</span>, <span class="string">"虛弱"</span>,</span><br><span class="line">                <span class="string">"惩戒"</span>, <span class="string">"疾走"</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Skill_ShenYuan</span> <span class="keyword">extends</span> <span class="title">Skill</span> </span>&#123;</span><br><span class="line">    public <span class="type">Skill_ShenYuan</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.skill_type = <span class="keyword">new</span> <span class="type">String</span>[] &#123; <span class="string">"闪现"</span>, <span class="string">"治疗"</span>, <span class="string">"雪球"</span>, <span class="string">"净化"</span>, <span class="string">"光盾"</span>, <span class="string">"虛弱"</span>,</span><br><span class="line">                <span class="string">"回蓝"</span>, <span class="string">"疾走"</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>准备工作完毕，接下来就是重点了。</p>
<p>抽象工厂类或接口：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">AbstractFactory</span> &#123;</span><br><span class="line">    <span class="comment">//创建英雄</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Hero <span class="title">createHero</span>(<span class="params"></span>)</span>;</span><br><span class="line">    <span class="comment">//创建天赋</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Talent <span class="title">createTalent</span>(<span class="params"></span>)</span>;</span><br><span class="line">    <span class="comment">//创建召唤师技能</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Skill <span class="title">createSkill</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>召唤师峡谷工厂类：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory_XiaGu</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">AbstractFactory</span></span> </span>&#123;</span><br><span class="line">    <span class="comment">//假设我选艾希</span></span><br><span class="line">    <span class="keyword">public</span> Hero createHero() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Ashe_XiaGu</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Talent createTalent() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Talent_XiaGu</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Skill createSkill() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Skill_XiaGu</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>哭嚎深渊工厂类：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory_ShenYuan</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">AbstractFactory</span></span> </span>&#123;</span><br><span class="line">    <span class="comment">//假设我选艾希</span></span><br><span class="line">    <span class="keyword">public</span> Hero createHero() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Ashe_ShenYuan</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Talent createTalent() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Talent_ShenYuan</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Skill createSkill() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Skill_ShenYuan</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后是客户端代码：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        System.out.println(<span class="string">"请选择游戏模式"</span>);</span><br><span class="line">        System.out.println(<span class="string">"1,召唤师峡谷   2,哭嚎深渊"</span>);</span><br><span class="line">        Scanner can = <span class="keyword">new</span> Scanner(System.<span class="keyword">in</span>);</span><br><span class="line">        <span class="built_in">int</span> w = can.nextInt();</span><br><span class="line">        can.close();</span><br><span class="line">        AbstractFactory <span class="keyword">factory</span> = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (w) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="comment">// 召唤师峡谷</span></span><br><span class="line">            <span class="keyword">factory</span> = <span class="keyword">new</span> Factory_XiaGu();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="comment">// 哭嚎深渊</span></span><br><span class="line">            <span class="keyword">factory</span> = <span class="keyword">new</span> Factory_ShenYuan();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 英雄（选择的是艾希）</span></span><br><span class="line">        Hero hero = <span class="keyword">factory</span>.createHero();</span><br><span class="line">        hero.<span class="built_in">print</span>();</span><br><span class="line">        hero.say();</span><br><span class="line">        <span class="comment">// 天赋</span></span><br><span class="line">        Talent talent = <span class="keyword">factory</span>.createTalent();</span><br><span class="line">        talent.<span class="built_in">print</span>();</span><br><span class="line">        <span class="comment">// 召唤师技能</span></span><br><span class="line">        Skill skill = <span class="keyword">factory</span>.createSkill();</span><br><span class="line">        skill.choose(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>客户端选择游戏模式，就相当于选择了不同的工厂去生产游戏元素（英雄，天赋，召唤师技能）。</p>
<p>也可以结合<strong>工厂模式</strong>使用，比如选择游戏类型后，利用工厂模式选择英雄等等。</p>
<blockquote>
<p>同<strong>工厂模式</strong>，客户端不需要知道产品的创建过程。并且，客户端只需要选择游戏模式，就可以用工厂创建多个系列的产品（英雄，天赋，召唤师技能）。主要特点就是一个工厂多系列产品。</p>
</blockquote>
<h4 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h4><p>玩局匹配，选召唤师峡谷：<br><img src="https://upload-images.jianshu.io/upload_images/3262738-a2e4762e21f5fcd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="控制台"></p>
<p>源计划皮肤的寒冰射手。<br><img src="https://upload-images.jianshu.io/upload_images/3262738-9a32cb36ad0073ab.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="源计划-艾希"></p>
<h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2><p>常见的案例就是使用不同的数据库，数据库能处理用户，也能处理关系。但是，数据库分MySQL，Orical等。处理同样或类似的事情，他们的具体实现存在差异。那就可以抽出一个工厂基类，再分别写两个不同的工厂去处理。这样的话，某些东西就可以做到<strong>可迁移</strong>的目的。</p>
<h2 id="附件"><a href="#附件" class="headerlink" title="附件"></a>附件</h2><p>设计模式Demo<br>GitHub源码：<a href="https://github.com/wzmyyj/Design-Pattern" target="_blank" rel="noopener">https://github.com/wzmyyj/Design-Pattern</a></p>
</div><div class="post-copyright"><blockquote><p>原文作者: wzmyyj</p><p>原文链接: <a href="https://wzmyyj.top/2018/05/19/design_4/">https://wzmyyj.top/2018/05/19/design_4/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/设计模式/">设计模式</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2018/05/22/android_1/" class="pre">Android日志工具Log类</a><a href="/2018/05/18/design_3/" class="next">【设计模式】工厂模式</a></div><div id="comments"></div></div></div></div><div class="layout-r hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/21/android_10/">IM中群消息发送者信息刷新方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/21/android_9/">IM中按名称拼音字母分组排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/21/android_8/">IM项目中群成员获取与缓存策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/20/story_2/">小故事：未熟的果实</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/19/android_7/">IM项目中的自定义小表情实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/12/android_6/">TextView识别文本中的超链接并能点击跳转</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/12/android_5/">ClickableSpan的一点点摸索</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/11/android_4/">Fragment 监听返回按键</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/10/android_3/">LiveData实现消息总线</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/13/kotlin_1/">kotlin使用let报java.lang.NoClassDefFoundError</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/IT/" style="font-size: 15px;">IT</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/kotlin/" style="font-size: 15px;">kotlin</a> <a href="/tags/故事/" style="font-size: 15px;">故事</a> <a href="/tags/图片/" style="font-size: 15px;">图片</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://shiyi.today/" title="李昊昊：诗意" target="_blank">李昊昊：诗意</a><ul></ul><a href="https://wangzeliangbsd.github.io/" title="王亮亮：WZL Blog" target="_blank">王亮亮：WZL Blog</a><ul></ul><a href="https://foreverlf.github.io/" title="方胖子：ForeverLF" target="_blank">方胖子：ForeverLF</a><ul></ul><a href="https://zqhgit.github.io/" title="曾小辉：Sprider" target="_blank">曾小辉：Sprider</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p><span> Copyright &copy;<a href="/." rel="nofollow">wzmyyj.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"superSample":2,"width":100,"height":200,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.1},"react":{"opacityDefault":1,"opacityOnHover":0.2}});</script></body></html>